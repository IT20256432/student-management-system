/*! For license information please see main.eb66f44f.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),a=n(43),s=n(950);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(i(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),N=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),x=Symbol.for("react.lazy");Symbol.for("react.scope");var I=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var _=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=_&&e[_]||e["@@iterator"])?e:null}var R=Symbol.for("react.client.reference");function D(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===R?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case w:return"Profiler";case v:return"StrictMode";case b:return"Suspense";case E:return"SuspenseList";case I:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case p:return"Portal";case N:return e.displayName||"Context";case S:return(e._context.displayName||"Context")+".Consumer";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:D(e.type)||"Memo";case x:t=e._payload,e=e._init;try{return D(e(t))}catch(n){}}return null}var M=Array.isArray,O=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P={pending:!1,data:null,method:null,action:null},L=[],F=-1;function B(e){return{current:e}}function U(e){0>F||(e.current=L[F],L[F]=null,F--)}function z(e,t){F++,L[F]=e.current,e.current=t}var H,V,G=B(null),W=B(null),Y=B(null),X=B(null);function Q(e,t){switch(z(Y,t),z(W,e),z(G,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=vd(t=yd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(G),z(G,e)}function q(){U(G),U(W),U(Y)}function Z(e){null!==e.memoizedState&&z(X,e);var t=G.current,n=vd(t,e.type);t!==n&&(z(W,e),z(G,n))}function K(e){W.current===e&&(U(G),U(W)),X.current===e&&(U(X),uh._currentValue=P)}function $(e){if(void 0===H)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||"",V=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+H+e+V}var J=!1;function ee(e,t){if(!e||J)return"";J=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var r=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(i){r=i}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),i=s[0],o=s[1];if(i&&o){var l=i.split("\n"),c=o.split("\n");for(a=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(r===l.length||a===c.length)for(r=l.length-1,a=c.length-1;1<=r&&0<=a&&l[r]!==c[a];)a--;for(;1<=r&&0<=a;r--,a--)if(l[r]!==c[a]){if(1!==r||1!==a)do{if(r--,0>--a||l[r]!==c[a]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=a);break}}}finally{J=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?$(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return $(e.type);case 16:return $("Lazy");case 13:return e.child!==t&&null!==t?$("Suspense Fallback"):$("Suspense");case 19:return $("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return $("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,ae=r.unstable_scheduleCallback,se=r.unstable_cancelCallback,ie=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,me=r.unstable_IdlePriority,ge=r.log,pe=r.unstable_setDisableYieldValue,ye=null,ve=null;function we(e){if("function"===typeof ge&&pe(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var Se=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Ne(e)/Ce|0)|0},Ne=Math.log,Ce=Math.LN2;var be=256,Ee=262144,Ae=4194304;function xe(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ie(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,s=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~s)?a=xe(r):0!==(i&=o)?a=xe(i):n||0!==(n=o&~e)&&(a=xe(n)):0!==(o=r&~s)?a=xe(o):0!==i?a=xe(i):n||0!==(n=r&~e)&&(a=xe(n)),0===a?0:0!==t&&t!==a&&0===(t&s)&&((s=a&-a)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:a}function Te(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function _e(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function je(){var e=Ae;return 0===(62914560&(Ae<<=1))&&(Ae=4194304),e}function Re(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function De(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Me(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Se(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Se(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function ke(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Pe(n))&(e.suspendedLanes|t))?0:n}function Pe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Le(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Fe(){var e=k.p;return 0!==e?e:void 0===(e=window.event)?32:xh(e.type)}function Be(e,t){var n=k.p;try{return k.p=e,t()}finally{k.p=n}}var Ue=Math.random().toString(36).slice(2),ze="__reactFiber$"+Ue,He="__reactProps$"+Ue,Ve="__reactContainer$"+Ue,Ge="__reactEvents$"+Ue,We="__reactListeners$"+Ue,Ye="__reactHandles$"+Ue,Xe="__reactResources$"+Ue,Qe="__reactMarker$"+Ue;function qe(e){delete e[ze],delete e[He],delete e[Ge],delete e[We],delete e[Ye]}function Ze(e){var t=e[ze];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ve]||n[ze]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Pd(e);null!==e;){if(n=e[ze])return n;e=Pd(e)}return t}n=(e=n).parentNode}return null}function Ke(e){if(e=e[ze]||e[Ve]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function $e(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function Je(e){var t=e[Xe];return t||(t=e[Xe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Qe]=!0}var tt=new Set,nt={};function rt(e,t){at(e,t),at(e+"Capture",t)}function at(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var st=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},ot={};function lt(e,t,n){if(a=t,re.call(ot,a)||!re.call(it,a)&&(st.test(a)?ot[a]=!0:(it[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function mt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function gt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function yt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,a,s,i,o){e.name="",null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?St(e,i,dt(t)):null!=n?St(e,i,dt(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=s&&(e.defaultChecked=!!s),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+dt(o):e.removeAttribute("name")}function wt(e,t,n,r,a,s,i,o){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:a)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.name=i),ft(e)}function St(e,t,n){"number"===t&&gt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Nt(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function Ct(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function bt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(i(92));if(M(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var At=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||At.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function It(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(i(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&xt(e,a,r)}else for(var s in t)t.hasOwnProperty(s)&&xt(e,s,t[s])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rt(e){return jt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Dt(){}var Mt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var kt=null,Pt=null;function Lt(e){var t=Ke(e);if(t&&(e=t.stateNode)){var n=e[He]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[He]||null;if(!a)throw Error(i(90));vt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&mt(r)}break e;case"textarea":Ct(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&Nt(e,!!n.multiple,t,!1)}}}var Ft=!1;function Bt(e,t,n){if(Ft)return e(t,n);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==kt||null!==Pt)&&(Jc(),kt&&(t=kt,e=Pt,Pt=kt=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var r=n[He]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var zt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ht=!1;if(zt)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Ht=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Kh){Ht=!1}var Gt=null,Wt=null,Yt=null;function Xt(){if(Yt)return Yt;var e,t,n=Wt,r=n.length,a="value"in Gt?Gt.value:Gt.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[s-t];t++);return Yt=a.slice(e,1<t?1-t:void 0)}function Qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function qt(){return!0}function Zt(){return!1}function Kt(e){function t(t,n,r,a,s){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?qt:Zt,this.isPropagationStopped=Zt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qt)},persist:function(){},isPersistent:qt}),t}var $t,Jt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Kt(tn),rn=f({},tn,{view:0,detail:0}),an=Kt(rn),sn=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?($t=e.screenX-en.screenX,Jt=e.screenY-en.screenY):Jt=$t=0,en=e),$t)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),on=Kt(sn),ln=Kt(f({},sn,{dataTransfer:0})),cn=Kt(f({},rn,{relatedTarget:0})),un=Kt(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=Kt(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=Kt(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=gn[e])&&!!t[e]}function yn(){return pn}var vn=Kt(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?mn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),wn=Kt(f({},sn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Sn=Kt(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),Nn=Kt(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cn=Kt(f({},sn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Kt(f({},tn,{newState:0,oldState:0})),En=[9,13,27,32],An=zt&&"CompositionEvent"in window,xn=null;zt&&"documentMode"in document&&(xn=document.documentMode);var In=zt&&"TextEvent"in window&&!xn,Tn=zt&&(!An||xn&&8<xn&&11>=xn),_n=String.fromCharCode(32),jn=!1;function Rn(e,t){switch(e){case"keyup":return-1!==En.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Mn=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Pn(e,t,n,r){kt?Pt?Pt.push(r):Pt=[r]:kt=r,0<(t=rd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ln=null,Fn=null;function Bn(e){qu(e,0)}function Un(e){if(mt($e(e)))return e}function zn(e,t){if("change"===e)return t}var Hn=!1;if(zt){var Vn;if(zt){var Gn="oninput"in document;if(!Gn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),Gn="function"===typeof Wn.oninput}Vn=Gn}else Vn=!1;Hn=Vn&&(!document.documentMode||9<document.documentMode)}function Yn(){Ln&&(Ln.detachEvent("onpropertychange",Xn),Fn=Ln=null)}function Xn(e){if("value"===e.propertyName&&Un(Fn)){var t=[];Pn(t,Fn,e,Ot(e)),Bt(Bn,t)}}function Qn(e,t,n){"focusin"===e?(Yn(),Fn=n,(Ln=t).attachEvent("onpropertychange",Xn)):"focusout"===e&&Yn()}function qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(Fn)}function Zn(e,t){if("click"===e)return Un(t)}function Kn(e,t){if("input"===e||"change"===e)return Un(t)}var $n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Jn(e,t){if($n(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!re.call(t,a)||!$n(e[a],t[a]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=gt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=gt((e=t.contentWindow).document)}return t}function ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var sr=zt&&"documentMode"in document&&11>=document.documentMode,ir=null,or=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==ir||ir!==gt(r)||("selectionStart"in(r=ir)&&ar(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Jn(lr,r)||(lr=r,0<(r=rd(or,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ir)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},fr={},mr={};function gr(e){if(fr[e])return fr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in mr)return fr[e]=n[t];return e}zt&&(mr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var pr=gr("animationend"),yr=gr("animationiteration"),vr=gr("animationstart"),wr=gr("transitionrun"),Sr=gr("transitionstart"),Nr=gr("transitioncancel"),Cr=gr("transitionend"),br=new Map,Er="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){br.set(e,t),rt(t,[e])}Er.push("scrollEnd");var xr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ir=[],Tr=0,_r=0;function jr(){for(var e=Tr,t=_r=Tr=0;t<e;){var n=Ir[t];Ir[t++]=null;var r=Ir[t];Ir[t++]=null;var a=Ir[t];Ir[t++]=null;var s=Ir[t];if(Ir[t++]=null,null!==r&&null!==a){var i=r.pending;null===i?a.next=a:(a.next=i.next,i.next=a),r.pending=a}0!==s&&Or(n,a,s)}}function Rr(e,t,n,r){Ir[Tr++]=e,Ir[Tr++]=t,Ir[Tr++]=n,Ir[Tr++]=r,_r|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Dr(e,t,n,r){return Rr(e,t,n,r),kr(e)}function Mr(e,t){return Rr(e,null,null,t),kr(e)}function Or(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(a=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,a&&null!==t&&(a=31-Se(n),null===(r=(e=s.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),s):null}function kr(e){if(50<Gc)throw Gc=0,Wc=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Pr={};function Lr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,r){return new Lr(e,t,n,r)}function Br(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ur(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Hr(e,t,n,r,a,s){var o=0;if(r=e,"function"===typeof e)Br(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,G.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case I:return(e=Fr(31,n,t,a)).elementType=I,e.lanes=s,e;case y:return Vr(n.children,a,s,t);case v:o=8,a|=24;break;case w:return(e=Fr(12,n,t,2|a)).elementType=w,e.lanes=s,e;case b:return(e=Fr(13,n,t,a)).elementType=b,e.lanes=s,e;case E:return(e=Fr(19,n,t,a)).elementType=E,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:o=10;break e;case S:o=9;break e;case C:o=11;break e;case A:o=14;break e;case x:o=16,r=null;break e}o=29,n=Error(i(130,null===e?"null":typeof e,"")),r=null}return(t=Fr(o,n,t,a)).elementType=e,t.type=r,t.lanes=s,t}function Vr(e,t,n,r){return(e=Fr(7,e,r,t)).lanes=n,e}function Gr(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function Wr(e){var t=Fr(18,null,null,0);return t.stateNode=e,t}function Yr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Xr=new WeakMap;function Qr(e,t){if("object"===typeof e&&null!==e){var n=Xr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Xr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var qr=[],Zr=0,Kr=null,$r=0,Jr=[],ea=0,ta=null,na=1,ra="";function aa(e,t){qr[Zr++]=$r,qr[Zr++]=Kr,Kr=e,$r=t}function sa(e,t,n){Jr[ea++]=na,Jr[ea++]=ra,Jr[ea++]=ta,ta=e;var r=na;e=ra;var a=32-Se(r)-1;r&=~(1<<a),n+=1;var s=32-Se(t)+a;if(30<s){var i=a-a%5;s=(r&(1<<i)-1).toString(32),r>>=i,a-=i,na=1<<32-Se(t)+a|n<<a|r,ra=s+e}else na=1<<s|n<<a|r,ra=e}function ia(e){null!==e.return&&(aa(e,1),sa(e,1,0))}function oa(e){for(;e===Kr;)Kr=qr[--Zr],qr[Zr]=null,$r=qr[--Zr],qr[Zr]=null;for(;e===ta;)ta=Jr[--ea],Jr[ea]=null,ra=Jr[--ea],Jr[ea]=null,na=Jr[--ea],Jr[ea]=null}function la(e,t){Jr[ea++]=na,Jr[ea++]=ra,Jr[ea++]=ta,na=t.id,ra=t.overflow,ta=e}var ca=null,ua=null,da=!1,ha=null,fa=!1,ma=Error(i(519));function ga(e){throw Na(Qr(Error(i(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),ma}function pa(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ze]=e,t[He]=r,n){case"dialog":Zu("cancel",t),Zu("close",t);break;case"iframe":case"object":case"embed":Zu("load",t);break;case"video":case"audio":for(n=0;n<Xu.length;n++)Zu(Xu[n],t);break;case"source":Zu("error",t);break;case"img":case"image":case"link":Zu("error",t),Zu("load",t);break;case"details":Zu("toggle",t);break;case"input":Zu("invalid",t),wt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Zu("invalid",t);break;case"textarea":Zu("invalid",t),bt(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||cd(t.textContent,n)?(null!=r.popover&&(Zu("beforetoggle",t),Zu("toggle",t)),null!=r.onScroll&&Zu("scroll",t),null!=r.onScrollEnd&&Zu("scrollend",t),null!=r.onClick&&(t.onclick=Dt),t=!0):t=!1,t||ga(e,!0)}function ya(e){for(ca=e.return;ca;)switch(ca.tag){case 5:case 31:case 13:return void(fa=!1);case 27:case 3:return void(fa=!0);default:ca=ca.return}}function va(e){if(e!==ca)return!1;if(!da)return ya(e),da=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||wd(e.type,e.memoizedProps)),t=!t),t&&ua&&ga(e),ya(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));ua=kd(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));ua=kd(e)}else 27===n?(n=ua,xd(e.type)?(e=Od,Od=null,ua=e):ua=n):ua=ca?Md(e.stateNode.nextSibling):null;return!0}function wa(){ua=ca=null,da=!1}function Sa(){var e=ha;return null!==e&&(null===jc?jc=e:jc.push.apply(jc,e),ha=null),e}function Na(e){null===ha?ha=[e]:ha.push(e)}var Ca=B(null),ba=null,Ea=null;function Aa(e,t,n){z(Ca,t._currentValue),t._currentValue=n}function xa(e){e._currentValue=Ca.current,U(Ca)}function Ia(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ta(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var s=a.dependencies;if(null!==s){var o=a.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ia(s.return,n,e),r||(o=null);break e}s=l.next}}else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),Ia(o,n,e),o=null}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}}function _a(e,t,n,r){e=null;for(var a=t,s=!1;null!==a;){if(!s)if(0!==(524288&a.flags))s=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var o=a.alternate;if(null===o)throw Error(i(387));if(null!==(o=o.memoizedProps)){var l=a.type;$n(a.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(a===X.current){if(null===(o=a.alternate))throw Error(i(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}a=a.return}null!==e&&Ta(t,e,n,r),t.flags|=262144}function ja(e){for(e=e.firstContext;null!==e;){if(!$n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ra(e){ba=e,Ea=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Da(e){return Oa(ba,e)}function Ma(e,t){return null===ba&&Ra(e),Oa(e,t)}function Oa(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Ea){if(null===e)throw Error(i(308));Ea=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ea=Ea.next=t;return n}var ka="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Pa=r.unstable_scheduleCallback,La=r.unstable_NormalPriority,Fa={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ba(){return{controller:new ka,data:new Map,refCount:0}}function Ua(e){e.refCount--,0===e.refCount&&Pa(La,function(){e.controller.abort()})}var za=null,Ha=0,Va=0,Ga=null;function Wa(){if(0===--Ha&&null!==za){null!==Ga&&(Ga.status="fulfilled");var e=za;za=null,Va=0,Ga=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ya=O.S;O.S=function(e,t){Mc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===za){var n=za=[];Ha=0,Va=Hu(),Ga={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ha++,t.then(Wa,Wa)}(0,t),null!==Ya&&Ya(e,t)};var Xa=B(null);function Qa(){var e=Xa.current;return null!==e?e:mc.pooledCache}function qa(e,t){z(Xa,null===t?Xa.current:t.pool)}function Za(){var e=Qa();return null===e?null:{parent:Fa._currentValue,pool:e}}var Ka=Error(i(460)),$a=Error(i(474)),Ja=Error(i(542)),es={then:function(){}};function ts(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ns(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Dt,Dt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw is(e=t.reason),e;default:if("string"===typeof t.status)t.then(Dt,Dt);else{if(null!==(e=mc)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw is(e=t.reason),e}throw as=t,Ka}}function rs(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw as=t,Ka;throw t}}var as=null;function ss(){if(null===as)throw Error(i(459));var e=as;return as=null,e}function is(e){if(e===Ka||e===Ja)throw Error(i(483))}var os=null,ls=0;function cs(e){var t=ls;return ls+=1,null===os&&(os=[]),ns(os,e,t)}function us(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ds(e,t){if(t.$$typeof===m)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Ur(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Gr(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===y?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===x&&rs(s)===t.type)?(us(t=a(t,n.props),n),t.return=e,t):(us(t=Hr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Yr(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Vr(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Gr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case g:return us(n=Hr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case p:return(t=Yr(t,e.mode,n)).return=e,t;case x:return h(e,t=rs(t),n)}if(M(t)||j(t))return(t=Vr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,cs(t),n);if(t.$$typeof===N)return h(e,Ma(e,t),n);ds(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case g:return n.key===a?c(e,t,n,r):null;case p:return n.key===a?u(e,t,n,r):null;case x:return f(e,t,n=rs(n),r)}if(M(n)||j(n))return null!==a?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,cs(n),r);if(n.$$typeof===N)return f(e,t,Ma(e,n),r);ds(e,n)}return null}function m(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case g:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case x:return m(e,t,n,r=rs(r),a)}if(M(r)||j(r))return d(t,e=e.get(n)||null,r,a,null);if("function"===typeof r.then)return m(e,t,n,cs(r),a);if(r.$$typeof===N)return m(e,t,n,Ma(t,r),a);ds(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===y&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case g:e:{for(var w=u.key;null!==c;){if(c.key===w){if((w=u.type)===y){if(7===c.tag){n(l,c.sibling),(d=a(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===w||"object"===typeof w&&null!==w&&w.$$typeof===x&&rs(w)===c.type){n(l,c.sibling),us(d=a(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===y?((d=Vr(u.props.children,l.mode,d,u.key)).return=l,l=d):(us(d=Hr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case p:e:{for(w=u.key;null!==c;){if(c.key===w){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=a(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Yr(u,l.mode,d)).return=l,l=d}return o(l);case x:return v(l,c,u=rs(u),d)}if(M(u))return function(a,i,o,l){for(var c=null,u=null,d=i,g=i=0,p=null;null!==d&&g<o.length;g++){d.index>g?(p=d,d=null):p=d.sibling;var y=f(a,d,o[g],l);if(null===y){null===d&&(d=p);break}e&&d&&null===y.alternate&&t(a,d),i=s(y,i,g),null===u?c=y:u.sibling=y,u=y,d=p}if(g===o.length)return n(a,d),da&&aa(a,g),c;if(null===d){for(;g<o.length;g++)null!==(d=h(a,o[g],l))&&(i=s(d,i,g),null===u?c=d:u.sibling=d,u=d);return da&&aa(a,g),c}for(d=r(d);g<o.length;g++)null!==(p=m(d,a,g,o[g],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?g:p.key),i=s(p,i,g),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach(function(e){return t(a,e)}),da&&aa(a,g),c}(l,c,u,d);if(j(u)){if("function"!==typeof(w=j(u)))throw Error(i(150));return function(a,o,l,c){if(null==l)throw Error(i(151));for(var u=null,d=null,g=o,p=o=0,y=null,v=l.next();null!==g&&!v.done;p++,v=l.next()){g.index>p?(y=g,g=null):y=g.sibling;var w=f(a,g,v.value,c);if(null===w){null===g&&(g=y);break}e&&g&&null===w.alternate&&t(a,g),o=s(w,o,p),null===d?u=w:d.sibling=w,d=w,g=y}if(v.done)return n(a,g),da&&aa(a,p),u;if(null===g){for(;!v.done;p++,v=l.next())null!==(v=h(a,v.value,c))&&(o=s(v,o,p),null===d?u=v:d.sibling=v,d=v);return da&&aa(a,p),u}for(g=r(g);!v.done;p++,v=l.next())null!==(v=m(g,a,p,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?p:v.key),o=s(v,o,p),null===d?u=v:d.sibling=v,d=v);return e&&g.forEach(function(e){return t(a,e)}),da&&aa(a,p),u}(l,c,u=w.call(u),d)}if("function"===typeof u.then)return v(l,c,cs(u),d);if(u.$$typeof===N)return v(l,c,Ma(l,u),d);ds(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=a(c,u)).return=l,l=d):(n(l,c),(d=Gr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{ls=0;var a=v(e,t,n,r);return os=null,a}catch(i){if(i===Ka||i===Ja)throw i;var s=Fr(29,i,null,e.mode);return s.lanes=r,s.return=e,s}}}var fs=hs(!0),ms=hs(!1),gs=!1;function ps(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ys(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ws(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&fc)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=kr(e),Or(e,null,n),t}return Rr(e,r,t,n),kr(e)}function Ss(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function Ns(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?a=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Cs=!1;function bs(){if(Cs){if(null!==Ga)throw Ga}}function Es(e,t,n,r){Cs=!1;var a=e.updateQueue;gs=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=a.baseState;for(i=0,u=c=l=null,o=s;;){var h=-536870913&o.lane,m=h!==o.lane;if(m?(pc&h)===h:(r&h)===h){0!==h&&h===Va&&(Cs=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var g=e,p=o;h=t;var y=n;switch(p.tag){case 1:if("function"===typeof(g=p.payload)){d=g.call(y,d,h);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(h="function"===typeof(g=p.payload)?g.call(y,d,h):g)||void 0===h)break e;d=f({},d,h);break e;case 2:gs=!0}}null!==(h=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=a.callbacks)?a.callbacks=[h]:m.push(h))}else m={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(m=o).next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null===s&&(a.shared.lanes=0),Ec|=i,e.lanes=i,e.memoizedState=d}}function As(e,t){if("function"!==typeof e)throw Error(i(191,e));e.call(t)}function xs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)As(n[e],t)}var Is=B(null),Ts=B(0);function _s(e,t){z(Ts,e=Cc),z(Is,t),Cc=e|t.baseLanes}function js(){z(Ts,Cc),z(Is,Is.current)}function Rs(){Cc=Ts.current,U(Is),U(Ts)}var Ds=B(null),Ms=null;function Os(e){var t=e.alternate;z(Bs,1&Bs.current),z(Ds,e),null===Ms&&(null===t||null!==Is.current||null!==t.memoizedState)&&(Ms=e)}function ks(e){z(Bs,Bs.current),z(Ds,e),null===Ms&&(Ms=e)}function Ps(e){22===e.tag?(z(Bs,Bs.current),z(Ds,e),null===Ms&&(Ms=e)):Ls()}function Ls(){z(Bs,Bs.current),z(Ds,Ds.current)}function Fs(e){U(Ds),Ms===e&&(Ms=null),U(Bs)}var Bs=B(0);function Us(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Rd(n)||Dd(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zs=0,Hs=null,Vs=null,Gs=null,Ws=!1,Ys=!1,Xs=!1,Qs=0,qs=0,Zs=null,Ks=0;function $s(){throw Error(i(321))}function Js(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$n(e[n],t[n]))return!1;return!0}function ei(e,t,n,r,a,s){return zs=s,Hs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?po:yo,Xs=!1,s=n(r,a),Xs=!1,Ys&&(s=ni(t,n,r,a)),ti(e),s}function ti(e){O.H=go;var t=null!==Vs&&null!==Vs.next;if(zs=0,Gs=Vs=Hs=null,Ws=!1,qs=0,Zs=null,t)throw Error(i(300));null===e||Mo||null!==(e=e.dependencies)&&ja(e)&&(Mo=!0)}function ni(e,t,n,r){Hs=e;var a=0;do{if(Ys&&(Zs=null),qs=0,Ys=!1,25<=a)throw Error(i(301));if(a+=1,Gs=Vs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}O.H=vo,s=t(n,r)}while(Ys);return s}function ri(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?ci(t):t,e=e.useState()[0],(null!==Vs?Vs.memoizedState:null)!==e&&(Hs.flags|=1024),t}function ai(){var e=0!==Qs;return Qs=0,e}function si(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ii(e){if(Ws){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ws=!1}zs=0,Gs=Vs=Hs=null,Ys=!1,qs=Qs=0,Zs=null}function oi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Gs?Hs.memoizedState=Gs=e:Gs=Gs.next=e,Gs}function li(){if(null===Vs){var e=Hs.alternate;e=null!==e?e.memoizedState:null}else e=Vs.next;var t=null===Gs?Hs.memoizedState:Gs.next;if(null!==t)Gs=t,Vs=e;else{if(null===e){if(null===Hs.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(Vs=e).memoizedState,baseState:Vs.baseState,baseQueue:Vs.baseQueue,queue:Vs.queue,next:null},null===Gs?Hs.memoizedState=Gs=e:Gs=Gs.next=e}return Gs}function ci(e){var t=qs;return qs+=1,null===Zs&&(Zs=[]),e=ns(Zs,e,t),t=Hs,null===(null===Gs?t.memoizedState:Gs.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?po:yo),e}function ui(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ci(e);if(e.$$typeof===N)return Da(e)}throw Error(i(438,String(e)))}function di(e){var t=null,n=Hs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Hs.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Hs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=T;return t.index++,n}function hi(e,t){return"function"===typeof t?t(e):t}function fi(e){return mi(li(),Vs,e)}function mi(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,s=r.pending;if(null!==s){if(null!==a){var o=a.next;a.next=s.next,s.next=o}t.baseQueue=a=s,r.pending=null}if(s=e.baseState,null===a)e.memoizedState=s;else{var l=o=null,c=null,u=t=a.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(pc&h)===h:(zs&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Va&&(d=!0);else{if((zs&f)===f){u=u.next,f===Va&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=s):c=c.next=h,Hs.lanes|=f,Ec|=f}h=u.action,Xs&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=s):c=c.next=f,Hs.lanes|=h,Ec|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=s:c.next=l,!$n(s,e.memoizedState)&&(Mo=!0,d&&null!==(n=Ga)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=c,r.lastRenderedState=s}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function gi(e){var t=li(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{s=e(s,o.action),o=o.next}while(o!==a);$n(s,t.memoizedState)||(Mo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function pi(e,t,n){var r=Hs,a=li(),s=da;if(s){if(void 0===n)throw Error(i(407));n=n()}else n=t();var o=!$n((Vs||a).memoizedState,n);if(o&&(a.memoizedState=n,Mo=!0),a=a.queue,zi(wi.bind(null,r,a,e),[e]),a.getSnapshot!==t||o||null!==Gs&&1&Gs.memoizedState.tag){if(r.flags|=2048,Pi(9,{destroy:void 0},vi.bind(null,r,a,n,t),null),null===mc)throw Error(i(349));s||0!==(127&zs)||yi(r,t,n)}return n}function yi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Hs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Hs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function vi(e,t,n,r){t.value=n,t.getSnapshot=r,Si(t)&&Ni(e)}function wi(e,t,n){return n(function(){Si(t)&&Ni(e)})}function Si(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$n(e,n)}catch(r){return!0}}function Ni(e){var t=Mr(e,2);null!==t&&Qc(t,e,2)}function Ci(e){var t=oi();if("function"===typeof e){var n=e;if(e=n(),Xs){we(!0);try{n()}finally{we(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:e},t}function bi(e,t,n,r){return e.baseState=n,mi(e,Vs,"function"===typeof r?r:hi)}function Ei(e,t,n,r,a){if(ho(e))throw Error(i(485));if(null!==(e=t.action)){var s={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==O.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,Ai(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Ai(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var s=O.T,i={};O.T=i;try{var o=n(a,r),l=O.S;null!==l&&l(i,o),xi(e,t,o)}catch(c){Ti(e,t,c)}finally{null!==s&&null!==i.types&&(s.types=i.types),O.T=s}}else try{xi(e,t,s=n(a,r))}catch(u){Ti(e,t,u)}}function xi(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Ii(e,t,n)},function(n){return Ti(e,t,n)}):Ii(e,t,n)}function Ii(e,t,n){t.status="fulfilled",t.value=n,_i(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Ai(e,n)))}function Ti(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,_i(t),t=t.next}while(t!==r)}e.action=null}function _i(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ji(e,t){return t}function Ri(e,t){if(da){var n=mc.formState;if(null!==n){e:{var r=Hs;if(da){if(ua){t:{for(var a=ua,s=fa;8!==a.nodeType;){if(!s){a=null;break t}if(null===(a=Md(a.nextSibling))){a=null;break t}}a="F!"===(s=a.data)||"F"===s?a:null}if(a){ua=Md(a.nextSibling),r="F!"===a.data;break e}}ga(r)}r=!1}r&&(t=n[0])}}return(n=oi()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:t},n.queue=r,n=lo.bind(null,Hs,r),r.dispatch=n,r=Ci(!1),s=uo.bind(null,Hs,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=oi()).queue=a,n=Ei.bind(null,Hs,a,s,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function Di(e){return Mi(li(),Vs,e)}function Mi(e,t,n){if(t=mi(e,t,ji)[0],e=fi(hi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=ci(t)}catch(i){if(i===Ka)throw Ja;throw i}else r=t;var a=(t=li()).queue,s=a.dispatch;return n!==t.memoizedState&&(Hs.flags|=2048,Pi(9,{destroy:void 0},Oi.bind(null,a,n),null)),[r,s,e]}function Oi(e,t){e.action=t}function ki(e){var t=li(),n=Vs;if(null!==n)return Mi(t,n,e);li(),t=t.memoizedState;var r=(n=li()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Pi(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Hs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Hs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Li(){return li().memoizedState}function Fi(e,t,n,r){var a=oi();Hs.flags|=e,a.memoizedState=Pi(1|t,{destroy:void 0},n,void 0===r?null:r)}function Bi(e,t,n,r){var a=li();r=void 0===r?null:r;var s=a.memoizedState.inst;null!==Vs&&null!==r&&Js(r,Vs.memoizedState.deps)?a.memoizedState=Pi(t,s,n,r):(Hs.flags|=e,a.memoizedState=Pi(1|t,s,n,r))}function Ui(e,t){Fi(8390656,8,e,t)}function zi(e,t){Bi(2048,8,e,t)}function Hi(e){var t=li().memoizedState;return function(e){Hs.flags|=4;var t=Hs.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Hs.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&fc))throw Error(i(440));return t.impl.apply(void 0,arguments)}}function Vi(e,t){return Bi(4,2,e,t)}function Gi(e,t){return Bi(4,4,e,t)}function Wi(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Yi(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Bi(4,4,Wi.bind(null,t,e),n)}function Xi(){}function Qi(e,t){var n=li();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Js(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qi(e,t){var n=li();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Js(t,r[1]))return r[0];if(r=e(),Xs){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r}function Zi(e,t,n){return void 0===n||0!==(1073741824&zs)&&0===(261930&pc)?e.memoizedState=t:(e.memoizedState=n,e=Xc(),Hs.lanes|=e,Ec|=e,n)}function Ki(e,t,n,r){return $n(n,t)?n:null!==Is.current?(e=Zi(e,n,r),$n(e,t)||(Mo=!0),e):0===(42&zs)||0!==(1073741824&zs)&&0===(261930&pc)?(Mo=!0,e.memoizedState=n):(e=Xc(),Hs.lanes|=e,Ec|=e,t)}function $i(e,t,n,r,a){var s=k.p;k.p=0!==s&&8>s?s:8;var i=O.T,o={};O.T=o,uo(e,!1,t,n);try{var l=a(),c=O.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)co(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Yc());else co(e,t,r,Yc())}catch(u){co(e,t,{then:function(){},status:"rejected",reason:u},Yc())}finally{k.p=s,null!==i&&null!==o.types&&(i.types=o.types),O.T=i}}function Ji(){}function eo(e,t,n,r){if(5!==e.tag)throw Error(i(476));var a=to(e).queue;$i(e,a,t,P,null===n?Ji:function(){return no(e),n(r)})}function to(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:P},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function no(e){var t=to(e);null===t.next&&(t=e.alternate.memoizedState),co(e,t.next.queue,{},Yc())}function ro(){return Da(uh)}function ao(){return li().memoizedState}function so(){return li().memoizedState}function io(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Yc(),r=ws(t,e=vs(n),n);return null!==r&&(Qc(r,t,n),Ss(r,t,n)),t={cache:Ba()},void(e.payload=t)}t=t.return}}function oo(e,t,n){var r=Yc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ho(e)?fo(t,n):null!==(n=Dr(e,t,n,r))&&(Qc(n,e,r),mo(n,t,r))}function lo(e,t,n){co(e,t,n,Yc())}function co(e,t,n,r){var a={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ho(e))fo(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(a.hasEagerState=!0,a.eagerState=o,$n(o,i))return Rr(e,t,a,0),null===mc&&jr(),!1}catch(l){}if(null!==(n=Dr(e,t,a,r)))return Qc(n,e,r),mo(n,t,r),!0}return!1}function uo(e,t,n,r){if(r={lane:2,revertLane:Hu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ho(e)){if(t)throw Error(i(479))}else null!==(t=Dr(e,n,r,2))&&Qc(t,e,2)}function ho(e){var t=e.alternate;return e===Hs||null!==t&&t===Hs}function fo(e,t){Ys=Ws=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mo(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var go={readContext:Da,use:ui,useCallback:$s,useContext:$s,useEffect:$s,useImperativeHandle:$s,useLayoutEffect:$s,useInsertionEffect:$s,useMemo:$s,useReducer:$s,useRef:$s,useState:$s,useDebugValue:$s,useDeferredValue:$s,useTransition:$s,useSyncExternalStore:$s,useId:$s,useHostTransitionStatus:$s,useFormState:$s,useActionState:$s,useOptimistic:$s,useMemoCache:$s,useCacheRefresh:$s};go.useEffectEvent=$s;var po={readContext:Da,use:ui,useCallback:function(e,t){return oi().memoizedState=[e,void 0===t?null:t],e},useContext:Da,useEffect:Ui,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Fi(4194308,4,Wi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fi(4194308,4,e,t)},useInsertionEffect:function(e,t){Fi(4,2,e,t)},useMemo:function(e,t){var n=oi();t=void 0===t?null:t;var r=e();if(Xs){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=oi();if(void 0!==n){var a=n(t);if(Xs){we(!0);try{n(t)}finally{we(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=oo.bind(null,Hs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},oi().memoizedState=e},useState:function(e){var t=(e=Ci(e)).queue,n=lo.bind(null,Hs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Xi,useDeferredValue:function(e,t){return Zi(oi(),e,t)},useTransition:function(){var e=Ci(!1);return e=$i.bind(null,Hs,e.queue,!0,!1),oi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Hs,a=oi();if(da){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===mc)throw Error(i(349));0!==(127&pc)||yi(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,Ui(wi.bind(null,r,s,e),[e]),r.flags|=2048,Pi(9,{destroy:void 0},vi.bind(null,r,s,n,t),null),n},useId:function(){var e=oi(),t=mc.identifierPrefix;if(da){var n=ra;t="_"+t+"R_"+(n=(na&~(1<<32-Se(na)-1)).toString(32)+n),0<(n=Qs++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Ks++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ro,useFormState:Ri,useActionState:Ri,useOptimistic:function(e){var t=oi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=uo.bind(null,Hs,!0,n),n.dispatch=t,[e,t]},useMemoCache:di,useCacheRefresh:function(){return oi().memoizedState=io.bind(null,Hs)},useEffectEvent:function(e){var t=oi(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&fc))throw Error(i(440));return n.impl.apply(void 0,arguments)}}},yo={readContext:Da,use:ui,useCallback:Qi,useContext:Da,useEffect:zi,useImperativeHandle:Yi,useInsertionEffect:Vi,useLayoutEffect:Gi,useMemo:qi,useReducer:fi,useRef:Li,useState:function(){return fi(hi)},useDebugValue:Xi,useDeferredValue:function(e,t){return Ki(li(),Vs.memoizedState,e,t)},useTransition:function(){var e=fi(hi)[0],t=li().memoizedState;return["boolean"===typeof e?e:ci(e),t]},useSyncExternalStore:pi,useId:ao,useHostTransitionStatus:ro,useFormState:Di,useActionState:Di,useOptimistic:function(e,t){return bi(li(),0,e,t)},useMemoCache:di,useCacheRefresh:so};yo.useEffectEvent=Hi;var vo={readContext:Da,use:ui,useCallback:Qi,useContext:Da,useEffect:zi,useImperativeHandle:Yi,useInsertionEffect:Vi,useLayoutEffect:Gi,useMemo:qi,useReducer:gi,useRef:Li,useState:function(){return gi(hi)},useDebugValue:Xi,useDeferredValue:function(e,t){var n=li();return null===Vs?Zi(n,e,t):Ki(n,Vs.memoizedState,e,t)},useTransition:function(){var e=gi(hi)[0],t=li().memoizedState;return["boolean"===typeof e?e:ci(e),t]},useSyncExternalStore:pi,useId:ao,useHostTransitionStatus:ro,useFormState:ki,useActionState:ki,useOptimistic:function(e,t){var n=li();return null!==Vs?bi(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:di,useCacheRefresh:so};function wo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}vo.useEffectEvent=Hi;var So={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Yc(),a=vs(r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ws(e,a,r))&&(Qc(t,e,r),Ss(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Yc(),a=vs(r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ws(e,a,r))&&(Qc(t,e,r),Ss(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Yc(),r=vs(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ws(e,r,n))&&(Qc(t,e,n),Ss(t,e,n))}};function No(e,t,n,r,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!Jn(n,r)||!Jn(a,s))}function Co(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&So.enqueueReplaceState(t,t.state,null)}function bo(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=f({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}function Eo(e){xr(e)}function Ao(e){console.error(e)}function xo(e){xr(e)}function Io(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function To(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function _o(e,t,n){return(n=vs(n)).tag=3,n.payload={element:null},n.callback=function(){Io(e,t)},n}function jo(e){return(e=vs(e)).tag=3,e}function Ro(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"===typeof a){var s=r.value;e.payload=function(){return a(s)},e.callback=function(){To(t,n,r)}}var i=n.stateNode;null!==i&&"function"===typeof i.componentDidCatch&&(e.callback=function(){To(t,n,r),"function"!==typeof a&&(null===Pc?Pc=new Set([this]):Pc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Do=Error(i(461)),Mo=!1;function Oo(e,t,n,r){t.child=null===e?ms(t,null,n,r):fs(t,e.child,n,r)}function ko(e,t,n,r,a){n=n.render;var s=t.ref;if("ref"in r){var i={};for(var o in r)"ref"!==o&&(i[o]=r[o])}else i=r;return Ra(t),r=ei(e,t,n,i,s,a),o=ai(),null===e||Mo?(da&&o&&ia(t),t.flags|=1,Oo(e,t,r,a),t.child):(si(e,t,a),al(e,t,a))}function Po(e,t,n,r,a){if(null===e){var s=n.type;return"function"!==typeof s||Br(s)||void 0!==s.defaultProps||null!==n.compare?((e=Hr(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Lo(e,t,s,r,a))}if(s=e.child,!sl(e,a)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(i,r)&&e.ref===t.ref)return al(e,t,a)}return t.flags|=1,(e=Ur(s,r)).ref=t.ref,e.return=t,t.child=e}function Lo(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(Jn(s,r)&&e.ref===t.ref){if(Mo=!1,t.pendingProps=r=s,!sl(e,a))return t.lanes=e.lanes,al(e,t,a);0!==(131072&e.flags)&&(Mo=!0)}}return Go(e,t,n,r,a)}function Fo(e,t,n,r){var a=r.children,s=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(s=null!==s?s.baseLanes|n:n,null!==e){for(r=t.child=e.child,a=0;null!==r;)a=a|r.lanes|r.childLanes,r=r.sibling;r=a&~s}else r=0,t.child=null;return Uo(e,t,s,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Uo(e,t,null!==s?s.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&qa(0,null!==s?s.cachePool:null),null!==s?_s(t,s):js(),Ps(t)}else null!==s?(qa(0,s.cachePool),_s(t,s),Ls(),t.memoizedState=null):(null!==e&&qa(0,null),js(),Ls());return Oo(e,t,a,n),t.child}function Bo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Uo(e,t,n,r,a){var s=Qa();return s=null===s?null:{parent:Fa._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&qa(0,null),js(),Ps(t),null!==e&&_a(e,t,r,!0),t.childLanes=a,null}function zo(e,t){return(t=Jo({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Ho(e,t,n){return fs(t,e.child,null,n),(e=zo(t,t.pendingProps)).flags|=2,Fs(t),t.memoizedState=null,e}function Vo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Go(e,t,n,r,a){return Ra(t),n=ei(e,t,n,r,void 0,a),r=ai(),null===e||Mo?(da&&r&&ia(t),t.flags|=1,Oo(e,t,n,a),t.child):(si(e,t,a),al(e,t,a))}function Wo(e,t,n,r,a,s){return Ra(t),t.updateQueue=null,n=ni(t,r,n,a),ti(e),r=ai(),null===e||Mo?(da&&r&&ia(t),t.flags|=1,Oo(e,t,n,s),t.child):(si(e,t,s),al(e,t,s))}function Yo(e,t,n,r,a){if(Ra(t),null===t.stateNode){var s=Pr,i=n.contextType;"object"===typeof i&&null!==i&&(s=Da(i)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=So,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ps(t),i=n.contextType,s.context="object"===typeof i&&null!==i?Da(i):Pr,s.state=t.memoizedState,"function"===typeof(i=n.getDerivedStateFromProps)&&(wo(t,n,i,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(i=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),i!==s.state&&So.enqueueReplaceState(s,s.state,null),Es(t,r,s,a),bs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=bo(n,o);s.props=l;var c=s.context,u=n.contextType;i=Pr,"object"===typeof u&&null!==u&&(i=Da(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o||c!==i)&&Co(t,s,r,i),gs=!1;var h=t.memoizedState;s.state=h,Es(t,r,s,a),bs(),c=t.memoizedState,o||h!==c||gs?("function"===typeof d&&(wo(t,n,d,r),c=t.memoizedState),(l=gs||No(t,n,l,r,h,c,i))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=i,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,ys(e,t),u=bo(n,i=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=Pr,"object"===typeof c&&null!==c&&(l=Da(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(i!==d||h!==l)&&Co(t,s,r,l),gs=!1,h=t.memoizedState,s.state=h,Es(t,r,s,a),bs();var f=t.memoizedState;i!==d||h!==f||gs||null!==e&&null!==e.dependencies&&ja(e.dependencies)?("function"===typeof o&&(wo(t,n,o,r),f=t.memoizedState),(u=gs||No(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&ja(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Vo(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=fs(t,e.child,null,a),t.child=fs(t,null,n,a)):Oo(e,t,n,a),t.memoizedState=s.state,e=t.child):e=al(e,t,a),e}function Xo(e,t,n,r){return wa(),t.flags|=256,Oo(e,t,n,r),t.child}var Qo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qo(e){return{baseLanes:e,cachePool:Za()}}function Zo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Ic),e}function Ko(e,t,n){var r,a=t.pendingProps,s=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Bs.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(da){if(s?Os(t):Ls(),(e=ua)?null!==(e=null!==(e=jd(e,fa))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ta?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,ca=t,ua=null):e=null,null===e)throw ga(t);return Dd(e)?t.lanes=32:t.lanes=536870912,null}var l=a.children;return a=a.fallback,s?(Ls(),l=Jo({mode:"hidden",children:l},s=t.mode),a=Vr(a,s,n,null),l.return=t,a.return=t,l.sibling=a,t.child=l,(a=t.child).memoizedState=qo(n),a.childLanes=Zo(e,r,n),t.memoizedState=Qo,Bo(null,a)):(Os(t),$o(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Os(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Ls(),t.child=e.child,t.flags|=128,t=null):(Ls(),l=a.fallback,s=t.mode,a=Jo({mode:"visible",children:a.children},s),(l=Vr(l,s,n,null)).flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,fs(t,e.child,null,n),(a=t.child).memoizedState=qo(n),a.childLanes=Zo(e,r,n),t.memoizedState=Qo,t=Bo(null,a));else if(Os(t),Dd(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(a=Error(i(419))).stack="",a.digest=r,Na({value:a,source:null,stack:null}),t=el(e,t,n)}else if(Mo||_a(e,t,n,!1),r=0!==(n&e.childLanes),Mo||r){if(null!==(r=mc)&&(0!==(a=ke(r,n))&&a!==c.retryLane))throw c.retryLane=a,Mr(e,a),Qc(r,e,a),Do;Rd(l)||iu(),t=el(e,t,n)}else Rd(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ua=Md(l.nextSibling),ca=t,da=!0,ha=null,fa=!1,null!==e&&la(t,e),(t=$o(t,a.children)).flags|=4096);return t}return s?(Ls(),l=a.fallback,s=t.mode,u=(c=e.child).sibling,(a=Ur(c,{mode:"hidden",children:a.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Ur(u,l):(l=Vr(l,s,n,null)).flags|=2,l.return=t,a.return=t,a.sibling=l,t.child=a,Bo(null,a),a=t.child,null===(l=e.child.memoizedState)?l=qo(n):(null!==(s=l.cachePool)?(c=Fa._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Za(),l={baseLanes:l.baseLanes|n,cachePool:s}),a.memoizedState=l,a.childLanes=Zo(e,r,n),t.memoizedState=Qo,Bo(e.child,a)):(Os(t),e=(n=e.child).sibling,(n=Ur(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function $o(e,t){return(t=Jo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Jo(e,t){return(e=Fr(22,e,null,t)).lanes=0,e}function el(e,t,n){return fs(t,e.child,null,n),(e=$o(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ia(e.return,t,n)}function nl(e,t,n,r,a,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,treeForkCount:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a,i.treeForkCount=s)}function rl(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;r=r.children;var i=Bs.current,o=0!==(2&i);if(o?(i=1&i|2,t.flags|=128):i&=1,z(Bs,i),Oo(e,t,r,n),r=da?$r:0,!o&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Us(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),nl(t,!1,a,n,s,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Us(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}nl(t,!0,n,null,s,r);break;case"together":nl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function al(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ec|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(_a(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function sl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ja(e))}function il(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Mo=!0;else{if(!sl(e,n)&&0===(128&t.flags))return Mo=!1,function(e,t,n){switch(t.tag){case 3:Q(t,t.stateNode.containerInfo),Aa(0,Fa,e.memoizedState.cache),wa();break;case 27:case 5:Z(t);break;case 4:Q(t,t.stateNode.containerInfo);break;case 10:Aa(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,ks(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Os(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ko(e,t,n):(Os(t),null!==(e=al(e,t,n))?e.sibling:null);Os(t);break;case 19:var a=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(_a(e,t,n,!1),r=0!==(n&t.childLanes)),a){if(r)return rl(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),z(Bs,Bs.current),r)break;return null;case 22:return t.lanes=0,Fo(e,t,n,t.pendingProps);case 24:Aa(0,Fa,e.memoizedState.cache)}return al(e,t,n)}(e,t,n);Mo=0!==(131072&e.flags)}else Mo=!1,da&&0!==(1048576&t.flags)&&sa(t,$r,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=rs(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var a=e.$$typeof;if(a===C){t.tag=11,t=ko(null,t,e,r,n);break e}if(a===A){t.tag=14,t=Po(null,t,e,r,n);break e}}throw t=D(e)||e,Error(i(306,t,""))}Br(e)?(r=bo(e,r),t.tag=1,t=Yo(null,t,e,r,n)):(t.tag=0,t=Go(null,t,e,r,n))}return t;case 0:return Go(e,t,t.type,t.pendingProps,n);case 1:return Yo(e,t,r=t.type,a=bo(r,t.pendingProps),n);case 3:e:{if(Q(t,t.stateNode.containerInfo),null===e)throw Error(i(387));r=t.pendingProps;var s=t.memoizedState;a=s.element,ys(e,t),Es(t,r,null,n);var o=t.memoizedState;if(r=o.cache,Aa(0,Fa,r),r!==s.cache&&Ta(t,[Fa],n,!0),bs(),r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Xo(e,t,r,n);break e}if(r!==a){Na(a=Qr(Error(i(424)),t)),t=Xo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ua=Md(e.firstChild),ca=t,da=!0,ha=null,fa=!0,n=ms(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(wa(),r===a){t=al(e,t,n);break e}Oo(e,t,r,n)}t=t.child}return t;case 26:return Vo(e,t),null===e?(n=Wd(t.type,null,t.pendingProps,null))?t.memoizedState=n:da||(n=t.type,e=t.pendingProps,(r=pd(Y.current).createElement(n))[ze]=t,r[He]=e,hd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Wd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Z(t),null===e&&da&&(r=t.stateNode=Ld(t.type,t.pendingProps,Y.current),ca=t,fa=!0,a=ua,xd(t.type)?(Od=a,ua=Md(r.firstChild)):ua=a),Oo(e,t,t.pendingProps.children,n),Vo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&da&&((a=r=ua)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===s)return e}if(null===(e=Md(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,fa))?(t.stateNode=r,ca=t,ua=Md(r.firstChild),fa=!1,a=!0):a=!1),a||ga(t)),Z(t),a=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,r=s.children,wd(a,s)?r=null:null!==o&&wd(a,o)&&(t.flags|=32),null!==t.memoizedState&&(a=ei(e,t,ri,null,null,n),uh._currentValue=a),Vo(e,t),Oo(e,t,r,n),t.child;case 6:return null===e&&da&&((e=n=ua)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Md(e.nextSibling)))return null}return e}(n,t.pendingProps,fa))?(t.stateNode=n,ca=t,ua=null,e=!0):e=!1),e||ga(t)),null;case 13:return Ko(e,t,n);case 4:return Q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=fs(t,null,r,n):Oo(e,t,r,n),t.child;case 11:return ko(e,t,t.type,t.pendingProps,n);case 7:return Oo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Aa(0,t.type,r.value),Oo(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Ra(t),r=r(a=Da(a)),t.flags|=1,Oo(e,t,r,n),t.child;case 14:return Po(e,t,t.type,t.pendingProps,n);case 15:return Lo(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,a=0!==(128&t.flags);if(t.flags&=-129,null===e){if(da){if("hidden"===r.mode)return e=zo(t,r),t.lanes=536870912,Bo(null,e);if(ks(t),(e=ua)?null!==(e=null!==(e=jd(e,fa))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ta?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,ca=t,ua=null):e=null,null===e)throw ga(t);return t.lanes=536870912,null}return zo(t,r)}var s=e.memoizedState;if(null!==s){var o=s.dehydrated;if(ks(t),a)if(256&t.flags)t.flags&=-257,t=Ho(e,t,n);else{if(null===t.memoizedState)throw Error(i(558));t.child=e.child,t.flags|=128,t=null}else if(Mo||_a(e,t,n,!1),a=0!==(n&e.childLanes),Mo||a){if(null!==(r=mc)&&0!==(o=ke(r,n))&&o!==s.retryLane)throw s.retryLane=o,Mr(e,o),Qc(r,e,o),Do;iu(),t=Ho(e,t,n)}else e=s.treeContext,ua=Md(o.nextSibling),ca=t,da=!0,ha=null,fa=!1,null!==e&&la(t,e),(t=zo(t,r)).flags|=4096;return t}return(e=Ur(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Fo(e,t,n,t.pendingProps);case 24:return Ra(t),r=Da(Fa),null===e?(null===(a=Qa())&&(a=mc,s=Ba(),a.pooledCache=s,s.refCount++,null!==s&&(a.pooledCacheLanes|=n),a=s),t.memoizedState={parent:r,cache:a},ps(t),Aa(0,Fa,a)):(0!==(e.lanes&n)&&(ys(e,t),Es(t,null,null,n),bs()),a=e.memoizedState,s=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),Aa(0,Fa,r)):(r=s.cache,Aa(0,Fa,r),r!==a.cache&&Ta(t,[Fa],n,!0))),Oo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function ol(e){e.flags|=4}function ll(e,t,n,r,a){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&a)===a)if(e.stateNode.complete)e.flags|=8192;else{if(!ru())throw as=es,$a;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!ah(t)){if(!ru())throw as=es,$a;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?je():536870912,e.lanes|=t,Tc|=t)}function dl(e,t){if(!da)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fl(e,t,n){var r=t.pendingProps;switch(oa(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),xa(Fa),q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(va(t)?ol(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,Sa())),hl(t),null;case 26:var a=t.type,s=t.memoizedState;return null===e?(ol(t),null!==s?(hl(t),cl(t,s)):(hl(t),ll(t,a,0,0,n))):s?s!==e.memoizedState?(ol(t),hl(t),cl(t,s)):(hl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ol(t),hl(t),ll(t,a,0,0,n)),null;case 27:if(K(t),n=Y.current,a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return hl(t),null}e=G.current,va(t)?pa(t):(e=Ld(a,r,n),t.stateNode=e,ol(t))}return hl(t),null;case 5:if(K(t),a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return hl(t),null}if(s=G.current,va(t))pa(t);else{var o=pd(Y.current);switch(s){case 1:s=o.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:s=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":s=o.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":s=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":(s=o.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?s.multiple=!0:r.size&&(s.size=r.size);break;default:s="string"===typeof r.is?o.createElement(a,{is:r.is}):o.createElement(a)}}s[ze]=t,s[He]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)s.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=s;e:switch(hd(s,a,r),a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ol(t)}}return hl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(e=Y.current,va(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=ca))switch(a.tag){case 27:case 5:r=a.memoizedProps}e[ze]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||cd(e.nodeValue,n)))||ga(t,!0)}else(e=pd(e).createTextNode(r))[ze]=t,t.stateNode=e}return hl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=va(t),null!==n){if(null===e){if(!r)throw Error(i(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(i(557));e[ze]=t}else wa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),e=!1}else n=Sa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Fs(t),t):(Fs(t),null);if(0!==(128&t.flags))throw Error(i(558))}return hl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=va(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[ze]=t}else wa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),a=!1}else a=Sa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(Fs(t),t):(Fs(t),null)}return Fs(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool),s=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ul(t,t.updateQueue),hl(t),null);case 4:return q(),null===e&&Ju(t.stateNode.containerInfo),hl(t),null;case 10:return xa(t.type),hl(t),null;case 19:if(U(Bs),null===(r=t.memoizedState))return hl(t),null;if(a=0!==(128&t.flags),null===(s=r.rendering))if(a)dl(r,!1);else{if(0!==bc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Us(e))){for(t.flags|=128,dl(r,!1),e=s.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return z(Bs,1&Bs.current|2),da&&aa(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Oc&&(t.flags|=128,a=!0,dl(r,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=Us(s))){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),dl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!da)return hl(t),null}else 2*le()-r.renderingStartTime>Oc&&536870912!==n&&(t.flags|=128,a=!0,dl(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=r.last)?e.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Bs.current,z(Bs,a?1&n|2:1&n),da&&aa(t,r.treeForkCount),e):(hl(t),null);case 22:case 23:return Fs(t),Rs(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(hl(t),6&t.subtreeFlags&&(t.flags|=8192)):hl(t),null!==(n=t.updateQueue)&&ul(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&U(Xa),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xa(Fa),hl(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function ml(e,t){switch(oa(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xa(Fa),q(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return K(t),null;case 31:if(null!==t.memoizedState){if(Fs(t),null===t.alternate)throw Error(i(340));wa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Fs(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));wa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(Bs),null;case 4:return q(),null;case 10:return xa(t.type),null;case 22:case 23:return Fs(t),Rs(),null!==e&&U(Xa),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xa(Fa),null;default:return null}}function gl(e,t){switch(oa(t),t.tag){case 3:xa(Fa),q();break;case 26:case 27:case 5:K(t);break;case 4:q();break;case 31:null!==t.memoizedState&&Fs(t);break;case 13:Fs(t);break;case 19:U(Bs);break;case 10:xa(t.type);break;case 22:case 23:Fs(t),Rs(),null!==e&&U(Xa);break;case 24:xa(Fa)}}function pl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var s=n.create,i=n.inst;r=s(),i.destroy=r}n=n.next}while(n!==a)}}catch(o){bu(t,t.return,o)}}function yl(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var s=a.next;r=s;do{if((r.tag&e)===e){var i=r.inst,o=i.destroy;if(void 0!==o){i.destroy=void 0,a=t;var l=n,c=o;try{c()}catch(u){bu(a,l,u)}}}r=r.next}while(r!==s)}}catch(u){bu(t,t.return,u)}}function vl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{xs(t,n)}catch(r){bu(e,e.return,r)}}}function wl(e,t,n){n.props=bo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){bu(e,t,r)}}function Sl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(a){bu(e,t,a)}}function Nl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(a){bu(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){bu(e,t,s)}else n.current=null}function Cl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){bu(e,e.return,a)}}function bl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,s=null,o=null,l=null,c=null,u=null,d=null;for(m in n){var h=n[m];if(n.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(m)||ud(e,t,m,null,r,h)}}for(var f in r){var m=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=m||null!=h))switch(f){case"type":s=m;break;case"name":a=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":o=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(i(137,t));break;default:m!==h&&ud(e,t,f,m,r,h)}}return void vt(e,o,l,c,u,d,s,a);case"select":for(s in m=o=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":m=c;default:r.hasOwnProperty(s)||ud(e,t,s,null,r,c)}for(a in r)if(s=r[a],c=n[a],r.hasOwnProperty(a)&&(null!=s||null!=c))switch(a){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&ud(e,t,a,s,r,c)}return t=l,n=o,r=m,void(null!=f?Nt(e,!!n,f,!1):!!r!==!!n&&(null!=t?Nt(e,!!n,t,!0):Nt(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=f=null,n)if(a=n[l],n.hasOwnProperty(l)&&null!=a&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ud(e,t,l,null,r,a)}for(o in r)if(a=r[o],s=n[o],r.hasOwnProperty(o)&&(null!=a||null!=s))switch(o){case"value":f=a;break;case"defaultValue":m=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(i(91));break;default:a!==s&&ud(e,t,o,a,r,s)}return void Ct(e,f,m);case"option":for(var g in n)if(f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else ud(e,t,g,null,r,f);for(c in r)if(f=r[c],m=n[c],r.hasOwnProperty(c)&&f!==m&&(null!=f||null!=m))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else ud(e,t,c,f,r,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var p in n)f=n[p],n.hasOwnProperty(p)&&null!=f&&!r.hasOwnProperty(p)&&ud(e,t,p,null,r,f);for(u in r)if(f=r[u],m=n[u],r.hasOwnProperty(u)&&f!==m&&(null!=f||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(i(137,t));break;default:ud(e,t,u,f,r,m)}return;default:if(Tt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&dd(e,t,y,void 0,r,f);for(d in r)f=r[d],m=n[d],!r.hasOwnProperty(d)||f===m||void 0===f&&void 0===m||dd(e,t,d,f,r,m);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&ud(e,t,v,null,r,f);for(h in r)f=r[h],m=n[h],!r.hasOwnProperty(h)||f===m||null==f&&null==m||ud(e,t,h,f,r,m)}(r,e.type,n,t),r[He]=t}catch(a){bu(e,e.return,a)}}function El(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&xd(e.type)||4===e.tag}function Al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||El(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&xd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function xl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Dt));else if(4!==r&&(27===r&&xd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(xl(e,t,n),e=e.sibling;null!==e;)xl(e,t,n),e=e.sibling}function Il(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&xd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Il(e,t,n),e=e.sibling;null!==e;)Il(e,t,n),e=e.sibling}function Tl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);hd(t,r,n),t[ze]=e,t[He]=n}catch(s){bu(e,e.return,s)}}var _l=!1,jl=!1,Rl=!1,Dl="function"===typeof WeakSet?WeakSet:Set,Ml=null;function Ol(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ql(e,n),4&r&&pl(5,n);break;case 1:if(Ql(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(i){bu(n,n.return,i)}else{var a=bo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){bu(n,n.return,o)}}64&r&&vl(n),512&r&&Sl(n,n.return);break;case 3:if(Ql(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{xs(e,t)}catch(i){bu(n,n.return,i)}}break;case 27:null===t&&4&r&&Tl(n);case 26:case 5:Ql(e,n),null===t&&4&r&&Cl(n),512&r&&Sl(n,n.return);break;case 12:Ql(e,n);break;case 31:Ql(e,n),4&r&&Ul(e,n);break;case 13:Ql(e,n),4&r&&zl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Iu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||_l)){t=null!==t&&null!==t.memoizedState||jl,a=_l;var s=jl;_l=r,(jl=t)&&!s?Zl(e,n,0!==(8772&n.subtreeFlags)):Ql(e,n),_l=a,jl=s}break;case 30:break;default:Ql(e,n)}}function kl(e){var t=e.alternate;null!==t&&(e.alternate=null,kl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&qe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pl=null,Ll=!1;function Fl(e,t,n){for(n=n.child;null!==n;)Bl(e,t,n),n=n.sibling}function Bl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(s){}switch(n.tag){case 26:jl||Nl(n,t),Fl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:jl||Nl(n,t);var r=Pl,a=Ll;xd(n.type)&&(Pl=n.stateNode,Ll=!1),Fl(e,t,n),Fd(n.stateNode),Pl=r,Ll=a;break;case 5:jl||Nl(n,t);case 6:if(r=Pl,a=Ll,Pl=null,Fl(e,t,n),Ll=a,null!==(Pl=r))if(Ll)try{(9===Pl.nodeType?Pl.body:"HTML"===Pl.nodeName?Pl.ownerDocument.body:Pl).removeChild(n.stateNode)}catch(i){bu(n,t,i)}else try{Pl.removeChild(n.stateNode)}catch(i){bu(n,t,i)}break;case 18:null!==Pl&&(Ll?(Id(9===(e=Pl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Gh(e)):Id(Pl,n.stateNode));break;case 4:r=Pl,a=Ll,Pl=n.stateNode.containerInfo,Ll=!0,Fl(e,t,n),Pl=r,Ll=a;break;case 0:case 11:case 14:case 15:yl(2,n,t),jl||yl(4,n,t),Fl(e,t,n);break;case 1:jl||(Nl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&wl(n,t,r)),Fl(e,t,n);break;case 21:Fl(e,t,n);break;case 22:jl=(r=jl)||null!==n.memoizedState,Fl(e,t,n),jl=r;break;default:Fl(e,t,n)}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Gh(e)}catch(n){bu(t,t.return,n)}}}function zl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Gh(e)}catch(n){bu(t,t.return,n)}}function Hl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Dl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Dl),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Tu.bind(null,e,t);t.then(r,r)}})}function Vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(xd(l.type)){Pl=l.stateNode,Ll=!1;break e}break;case 5:Pl=l.stateNode,Ll=!1;break e;case 3:case 4:Pl=l.stateNode.containerInfo,Ll=!0;break e}l=l.return}if(null===Pl)throw Error(i(160));Bl(s,o,a),Pl=null,Ll=!1,null!==(s=a.alternate)&&(s.return=null),a.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Wl(t,e),t=t.sibling}var Gl=null;function Wl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vl(t,e),Yl(e),4&r&&(yl(3,e,e.return),pl(3,e),yl(5,e,e.return));break;case 1:Vl(t,e),Yl(e),512&r&&(jl||null===n||Nl(n,n.return)),64&r&&_l&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var a=Gl;if(Vl(t,e),Yl(e),512&r&&(jl||null===n||Nl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":(!(s=a.getElementsByTagName("title")[0])||s[Qe]||s[ze]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=a.createElement(r),a.head.insertBefore(s,a.querySelector("head > title"))),hd(s,r,n),s[ze]=e,et(s),r=s;break e;case"link":var o=nh("link","href",a).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}hd(s=a.createElement(r),r,n),a.head.appendChild(s);break;case"meta":if(o=nh("meta","content",a).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}hd(s=a.createElement(r),r,n),a.head.appendChild(s);break;default:throw Error(i(468,r))}s[ze]=e,et(s),r=s}e.stateNode=r}else rh(a,e.type,e.stateNode);else e.stateNode=Kd(a,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?rh(a,e.type,e.stateNode):Kd(a,r,e.memoizedProps)):null===r&&null!==e.stateNode&&bl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Vl(t,e),Yl(e),512&r&&(jl||null===n||Nl(n,n.return)),null!==n&&4&r&&bl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Vl(t,e),Yl(e),512&r&&(jl||null===n||Nl(n,n.return)),32&e.flags){a=e.stateNode;try{Et(a,"")}catch(g){bu(e,e.return,g)}}4&r&&null!=e.stateNode&&bl(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&r&&(Rl=!0);break;case 6:if(Vl(t,e),Yl(e),4&r){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(g){bu(e,e.return,g)}}break;case 3:if(th=null,a=Gl,Gl=zd(t.containerInfo),Vl(t,e),Gl=a,Yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gh(t.containerInfo)}catch(g){bu(e,e.return,g)}Rl&&(Rl=!1,Xl(e));break;case 4:r=Gl,Gl=zd(e.stateNode.containerInfo),Vl(t,e),Yl(e),Gl=r;break;case 12:default:Vl(t,e),Yl(e);break;case 31:case 19:Vl(t,e),Yl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Hl(e,r)));break;case 13:Vl(t,e),Yl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Dc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Hl(e,r)));break;case 22:a=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=_l,d=jl;if(_l=u||a,jl=d||c,Vl(t,e),jl=d,_l=u,Yl(e),8192&r)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===n||c||_l||jl||ql(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,a)"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(g){bu(c,c.return,g)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(g){bu(c,c.return,g)}}}else if(18===t.tag){if(null===n){c=t;try{var m=c.stateNode;a?Td(m,!0):Td(c.stateNode,!1)}catch(g){bu(c,c.return,g)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Hl(e,n))));case 30:case 21:}}function Yl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(El(r)){n=r;break}r=r.return}if(null==n)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode;Il(e,Al(e),a);break;case 5:var s=n.stateNode;32&n.flags&&(Et(s,""),n.flags&=-33),Il(e,Al(e),s);break;case 3:case 4:var o=n.stateNode.containerInfo;xl(e,Al(e),o);break;default:throw Error(i(161))}}catch(l){bu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Xl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Xl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ql(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ol(e,t.alternate,t),t=t.sibling}function ql(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yl(4,t,t.return),ql(t);break;case 1:Nl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&wl(t,t.return,n),ql(t);break;case 27:Fd(t.stateNode);case 26:case 5:Nl(t,t.return),ql(t);break;case 22:null===t.memoizedState&&ql(t);break;default:ql(t)}e=e.sibling}}function Zl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,s=t,i=s.flags;switch(s.tag){case 0:case 11:case 15:Zl(a,s,n),pl(4,s);break;case 1:if(Zl(a,s,n),"function"===typeof(a=(r=s).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){bu(r,r.return,c)}if(null!==(a=(r=s).updateQueue)){var o=r.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)As(l[a],o)}catch(c){bu(r,r.return,c)}}n&&64&i&&vl(s),Sl(s,s.return);break;case 27:Tl(s);case 26:case 5:Zl(a,s,n),n&&null===r&&4&i&&Cl(s),Sl(s,s.return);break;case 12:Zl(a,s,n);break;case 31:Zl(a,s,n),n&&4&i&&Ul(a,s);break;case 13:Zl(a,s,n),n&&4&i&&zl(a,s);break;case 22:null===s.memoizedState&&Zl(a,s,n),Sl(s,s.return);break;case 30:break;default:Zl(a,s,n)}t=t.sibling}}function Kl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ua(n))}function $l(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ua(e))}function Jl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,r),t=t.sibling}function ec(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Jl(e,t,n,r),2048&a&&pl(9,t);break;case 1:case 31:case 13:default:Jl(e,t,n,r);break;case 3:Jl(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ua(e)));break;case 12:if(2048&a){Jl(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,i=s.id,o=s.onPostCommit;"function"===typeof o&&o(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){bu(t,t.return,l)}}else Jl(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,i=t.alternate,null!==t.memoizedState?2&s._visibility?Jl(e,t,n,r):nc(e,t):2&s._visibility?Jl(e,t,n,r):(s._visibility|=2,tc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&a&&Kl(i,t);break;case 24:Jl(e,t,n,r),2048&a&&$l(t.alternate,t)}}function tc(e,t,n,r,a){for(a=a&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var s=e,i=t,o=n,l=r,c=i.flags;switch(i.tag){case 0:case 11:case 15:tc(s,i,o,l,a),pl(8,i);break;case 23:break;case 22:var u=i.stateNode;null!==i.memoizedState?2&u._visibility?tc(s,i,o,l,a):nc(s,i):(u._visibility|=2,tc(s,i,o,l,a)),a&&2048&c&&Kl(i.alternate,i);break;case 24:tc(s,i,o,l,a),a&&2048&c&&$l(i.alternate,i);break;default:tc(s,i,o,l,a)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:nc(n,r),2048&a&&Kl(r.alternate,r);break;case 24:nc(n,r),2048&a&&$l(r.alternate,r);break;default:nc(n,r)}t=t.sibling}}var rc=8192;function ac(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)sc(e,t,n),e=e.sibling}function sc(e,t,n){switch(e.tag){case 26:ac(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var a=Yd(r.href),s=t.querySelector(Xd(a));if(s)return null!==(t=s._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ih.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,void et(s);s=t.ownerDocument||t,r=Qd(r),(a=Bd.get(a))&&Jd(r,a),et(s=s.createElement("link"));var i=s;i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),hd(s,"link",r),n.instance=s}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=ih.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Gl,e.memoizedState,e.memoizedProps);break;case 5:default:ac(e,t,n);break;case 3:case 4:var r=Gl;Gl=zd(e.stateNode.containerInfo),ac(e,t,n),Gl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rc,rc=16777216,ac(e,t,n),rc=r):ac(e,t,n))}}function ic(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function oc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ml=r,uc(r,e)}ic(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:oc(e),2048&e.flags&&yl(9,e,e.return);break;case 3:case 12:default:oc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):oc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ml=r,uc(r,e)}ic(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Ml;){var n=Ml;switch(n.tag){case 0:case 11:case 15:yl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ua(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Ml=r;else e:for(n=e;null!==Ml;){var a=(r=Ml).sibling,s=r.return;if(kl(r),r===n){Ml=null;break e}if(null!==a){a.return=s,Ml=a;break e}Ml=s}}}var dc={getCacheForType:function(e){var t=Da(Fa),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Da(Fa).controller.signal}},hc="function"===typeof WeakMap?WeakMap:Map,fc=0,mc=null,gc=null,pc=0,yc=0,vc=null,wc=!1,Sc=!1,Nc=!1,Cc=0,bc=0,Ec=0,Ac=0,xc=0,Ic=0,Tc=0,_c=null,jc=null,Rc=!1,Dc=0,Mc=0,Oc=1/0,kc=null,Pc=null,Lc=0,Fc=null,Bc=null,Uc=0,zc=0,Hc=null,Vc=null,Gc=0,Wc=null;function Yc(){return 0!==(2&fc)&&0!==pc?pc&-pc:null!==O.T?Hu():Fe()}function Xc(){if(0===Ic)if(0===(536870912&pc)||da){var e=Ee;0===(3932160&(Ee<<=1))&&(Ee=262144),Ic=e}else Ic=536870912;return null!==(e=Ds.current)&&(e.flags|=32),Ic}function Qc(e,t,n){(e!==mc||2!==yc&&9!==yc)&&null===e.cancelPendingCommit||(tu(e,0),$c(e,pc,Ic,!1)),De(e,n),0!==(2&fc)&&e===mc||(e===mc&&(0===(2&fc)&&(Ac|=n),4===bc&&$c(e,pc,Ic,!1)),ku(e))}function qc(e,t,n){if(0!==(6&fc))throw Error(i(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Te(e,t),a=r?function(e,t){var n=fc;fc|=2;var r=au(),a=su();mc!==e||pc!==t?(kc=null,Oc=le()+500,tu(e,t)):Sc=Te(e,t);e:for(;;)try{if(0!==yc&&null!==gc){t=gc;var s=vc;t:switch(yc){case 1:yc=0,vc=null,hu(e,t,s,1);break;case 2:case 9:if(ts(s)){yc=0,vc=null,du(t);break}t=function(){2!==yc&&9!==yc||mc!==e||(yc=7),ku(e)},s.then(t,t);break e;case 3:yc=7;break e;case 4:yc=5;break e;case 7:ts(s)?(yc=0,vc=null,du(t)):(yc=0,vc=null,hu(e,t,s,7));break;case 5:var o=null;switch(gc.tag){case 26:o=gc.memoizedState;case 5:case 27:var l=gc;if(o?ah(o):l.stateNode.complete){yc=0,vc=null;var c=l.sibling;if(null!==c)gc=c;else{var u=l.return;null!==u?(gc=u,fu(u)):gc=null}break t}}yc=0,vc=null,hu(e,t,s,5);break;case 6:yc=0,vc=null,hu(e,t,s,6);break;case 8:eu(),bc=6;break e;default:throw Error(i(462))}}cu();break}catch(d){nu(e,d)}return Ea=ba=null,O.H=r,O.A=a,fc=n,null!==gc?0:(mc=null,pc=0,jr(),bc)}(e,t):ou(e,t,!0),s=r;;){if(0===a){Sc&&!r&&$c(e,t,0,!1);break}if(n=e.current.alternate,!s||Kc(n)){if(2===a){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;a=_c;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,o).flags|=256),2!==(o=ou(l,o,!1))){if(Nc&&!c){l.errorRecoveryDisabledLanes|=s,Ac|=s,a=4;break e}s=jc,jc=a,null!==s&&(null===jc?jc=s:jc.push.apply(jc,s))}a=o}if(s=!1,2!==a)continue}}if(1===a){tu(e,0),$c(e,t,0,!0);break}e:{switch(r=e,s=a){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:$c(r,t,Ic,!wc);break e;case 2:jc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(a=Dc+300-le())){if($c(r,t,Ic,!wc),0!==Ie(r,0,!0))break e;Uc=t,r.timeoutHandle=Nd(Zc.bind(null,r,n,jc,kc,Rc,t,Ic,Ac,Tc,wc,s,"Throttled",-0,0),a)}else Zc(r,n,jc,kc,Rc,t,Ic,Ac,Tc,wc,s,null,-0,0)}break}a=ou(e,t,!1),s=!1}ku(e)}function Zc(e,t,n,r,a,s,i,o,l,c,u,d,h,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){sc(t,s,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dt});var m=(62914560&s)===s?Dc-le():(4194048&s)===s?Mc-le():0;if(null!==(m=function(e,t){return e.stylesheets&&0===e.count&&lh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===sh&&(sh=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var a=n[r],s=a.transferSize,i=a.initiatorType,o=a.duration;if(s&&o&&fd(i)){for(i=0,o=a.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&fd(d)&&(i+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--r,t+=8*(s+i)/(a.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var a=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>sh?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(a)}}:null}(d,m)))return Uc=s,e.cancelPendingCommit=m(gu.bind(null,e,t,s,n,r,a,i,o,l,u,d,null,h,f)),void $c(e,s,i,!c)}gu(e,t,s,n,r,a,i,o,l)}function Kc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!$n(s(),a))return!1}catch(i){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $c(e,t,n,r){t&=~xc,t&=~Ac,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var s=31-Se(a),i=1<<s;r[s]=-1,a&=~i}0!==n&&Me(e,n,t)}function Jc(){return 0!==(6&fc)||(Pu(0,!1),!1)}function eu(){if(null!==gc){if(0===yc)var e=gc.return;else Ea=ba=null,ii(e=gc),os=null,ls=0,e=gc;for(;null!==e;)gl(e.alternate,e),e=e.return;gc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc=0,eu(),mc=e,gc=n=Ur(e.current,null),pc=t,yc=0,vc=null,wc=!1,Sc=Te(e,t),Nc=!1,Tc=Ic=xc=Ac=Ec=bc=0,jc=_c=null,Rc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-Se(r),s=1<<a;t|=e[a],r&=~s}return Cc=t,jr(),n}function nu(e,t){Hs=null,O.H=go,t===Ka||t===Ja?(t=ss(),yc=3):t===$a?(t=ss(),yc=4):yc=t===Do?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,vc=t,null===gc&&(bc=1,Io(e,Qr(t,e.current)))}function ru(){var e=Ds.current;return null===e||((4194048&pc)===pc?null===Ms:((62914560&pc)===pc||0!==(536870912&pc))&&e===Ms)}function au(){var e=O.H;return O.H=go,null===e?go:e}function su(){var e=O.A;return O.A=dc,e}function iu(){bc=4,wc||(4194048&pc)!==pc&&null!==Ds.current||(Sc=!0),0===(134217727&Ec)&&0===(134217727&Ac)||null===mc||$c(mc,pc,Ic,!1)}function ou(e,t,n){var r=fc;fc|=2;var a=au(),s=su();mc===e&&pc===t||(kc=null,tu(e,t)),t=!1;var i=bc;e:for(;;)try{if(0!==yc&&null!==gc){var o=gc,l=vc;switch(yc){case 8:eu(),i=6;break e;case 3:case 2:case 9:case 6:null===Ds.current&&(t=!0);var c=yc;if(yc=0,vc=null,hu(e,o,l,c),n&&Sc){i=0;break e}break;default:c=yc,yc=0,vc=null,hu(e,o,l,c)}}lu(),i=bc;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,Ea=ba=null,fc=r,O.H=a,O.A=s,null===gc&&(mc=null,pc=0,jr()),i}function lu(){for(;null!==gc;)uu(gc)}function cu(){for(;null!==gc&&!ie();)uu(gc)}function uu(e){var t=il(e.alternate,e,Cc);e.memoizedProps=e.pendingProps,null===t?fu(e):gc=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Wo(n,t,t.pendingProps,t.type,void 0,pc);break;case 11:t=Wo(n,t,t.pendingProps,t.type.render,t.ref,pc);break;case 5:ii(t);default:gl(n,t),t=il(n,t=gc=zr(t,Cc),Cc)}e.memoizedProps=e.pendingProps,null===t?fu(e):gc=t}function hu(e,t,n,r){Ea=ba=null,ii(t),os=null,ls=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&_a(t,n,a,!0),null!==(n=Ds.current)){switch(n.tag){case 31:case 13:return null===Ms?iu():null===n.alternate&&0===bc&&(bc=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===es?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Eu(e,r,a)),!1;case 22:return n.flags|=65536,r===es?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Eu(e,r,a)),!1}throw Error(i(435,n.tag))}return Eu(e,r,a),iu(),!1}if(da)return null!==(t=Ds.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==ma&&Na(Qr(e=Error(i(422),{cause:r}),n))):(r!==ma&&Na(Qr(t=Error(i(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=Qr(r,n),Ns(e,a=_o(e.stateNode,r,a)),4!==bc&&(bc=2)),!1;var s=Error(i(520),{cause:r});if(s=Qr(s,n),null===_c?_c=[s]:_c.push(s),4!==bc&&(bc=2),null===t)return!0;r=Qr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,Ns(n,e=_o(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Pc||!Pc.has(s))))return n.flags|=65536,a&=-a,n.lanes|=a,Ro(a=jo(a),e,n,r),Ns(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,pc))return bc=1,Io(e,Qr(n,e.current)),void(gc=null)}catch(s){if(null!==a)throw gc=a,s;return bc=1,Io(e,Qr(n,e.current)),void(gc=null)}32768&t.flags?(da||1===r?e=!0:Sc||0!==(536870912&pc)?e=!1:(wc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Ds.current)&&13===r.tag&&(r.flags|=16384))),mu(t,e)):fu(t)}function fu(e){var t=e;do{if(0!==(32768&t.flags))return void mu(t,wc);e=t.return;var n=fl(t.alternate,t,Cc);if(null!==n)return void(gc=n);if(null!==(t=t.sibling))return void(gc=t);gc=t=e}while(null!==t);0===bc&&(bc=5)}function mu(e,t){do{var n=ml(e.alternate,e);if(null!==n)return n.flags&=32767,void(gc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(gc=e);gc=e=n}while(null!==e);bc=6,gc=null}function gu(e,t,n,r,a,s,o,l,c){e.cancelPendingCommit=null;do{Su()}while(0!==Lc);if(0!==(6&fc))throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,a,s){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=i&~n;0<n;){var u=31-Se(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Me(e,r,0),0!==s&&0===a&&0!==e.tag&&(e.suspendedLanes|=s&~(i&~t))}(e,n,s|=_r,o,l,c),e===mc&&(gc=mc=null,pc=0),Bc=t,Fc=e,Uc=n,zc=s,Hc=a,Vc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ae(he,function(){return Nu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,a=k.p,k.p=2,o=fc,fc|=4;try{!function(e,t){if(e=e.containerInfo,md=wh,ar(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(p){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===a&&(l=o),f===s&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gd={focusedElem:e,selectionRange:n},wh=!1,Ml=t;null!==Ml;)if(e=(t=Ml).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ml=e;else for(;null!==Ml;){switch(s=(t=Ml).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(a=e[n]).ref.impl=a.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,a=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var g=bo(n.type,a);e=r.getSnapshotBeforeUpdate(g,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){bu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))_d(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":_d(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,Ml=e;break}Ml=t.return}}(e,t)}finally{fc=o,k.p=a,O.T=r}}Lc=1,pu(),yu(),vu()}}function pu(){if(1===Lc){Lc=0;var e=Fc,t=Bc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=k.p;k.p=2;var a=fc;fc|=4;try{Wl(t,e);var s=gd,i=rr(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(i!==o&&o&&o.ownerDocument&&nr(o.ownerDocument.documentElement,o)){if(null!==l&&ar(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),m=o.textContent.length,g=Math.min(l.start,m),p=void 0===l.end?g:Math.min(l.end,m);!f.extend&&g>p&&(i=p,p=g,g=i);var y=tr(o,g),v=tr(o,p);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var w=d.createRange();w.setStart(y.node,y.offset),f.removeAllRanges(),g>p?(f.addRange(w),f.extend(v.node,v.offset)):(w.setEnd(v.node,v.offset),f.addRange(w))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var S=d[o];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}wh=!!md,gd=md=null}finally{fc=a,k.p=r,O.T=n}}e.current=t,Lc=2}}function yu(){if(2===Lc){Lc=0;var e=Fc,t=Bc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=k.p;k.p=2;var a=fc;fc|=4;try{Ol(e,t.alternate,t)}finally{fc=a,k.p=r,O.T=n}}Lc=3}}function vu(){if(4===Lc||3===Lc){Lc=0,oe();var e=Fc,t=Bc,n=Uc,r=Vc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Lc=5:(Lc=0,Bc=Fc=null,wu(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Pc=null),Le(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,a=k.p,k.p=2,O.T=null;try{for(var s=e.onRecoverableError,i=0;i<r.length;i++){var o=r[i];s(o.value,{componentStack:o.stack})}}finally{O.T=t,k.p=a}}0!==(3&Uc)&&Su(),ku(e),a=e.pendingLanes,0!==(261930&n)&&0!==(42&a)?e===Wc?Gc++:(Gc=0,Wc=e):Gc=0,Pu(0,!1)}}function wu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ua(t)))}function Su(){return pu(),yu(),vu(),Nu()}function Nu(){if(5!==Lc)return!1;var e=Fc,t=zc;zc=0;var n=Le(Uc),r=O.T,a=k.p;try{k.p=32>n?32:n,O.T=null,n=Hc,Hc=null;var s=Fc,o=Uc;if(Lc=0,Bc=Fc=null,Uc=0,0!==(6&fc))throw Error(i(331));var l=fc;if(fc|=4,lc(s.current),ec(s,s.current,o,n),fc=l,Pu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,s)}catch(c){}return!0}finally{k.p=a,O.T=r,wu(e,t)}}function Cu(e,t,n){t=Qr(n,t),null!==(e=ws(e,t=_o(e.stateNode,t,2),2))&&(De(e,2),ku(e))}function bu(e,t,n){if(3===e.tag)Cu(e,e,n);else for(;null!==t;){if(3===t.tag){Cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Pc||!Pc.has(r))){e=Qr(n,e),null!==(r=ws(t,n=jo(2),2))&&(Ro(n,r,t,e),De(r,2),ku(r));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hc;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(Nc=!0,a.add(n),e=Au.bind(null,e,t,n),t.then(e,e))}function Au(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,mc===e&&(pc&n)===n&&(4===bc||3===bc&&(62914560&pc)===pc&&300>le()-Dc?0===(2&fc)&&tu(e,0):xc|=n,Tc===pc&&(Tc=0)),ku(e)}function xu(e,t){0===t&&(t=je()),null!==(e=Mr(e,t))&&(De(e,t),ku(e))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xu(e,n)}function Tu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),xu(e,n)}var _u=null,ju=null,Ru=!1,Du=!1,Mu=!1,Ou=0;function ku(e){e!==ju&&null===e.next&&(null===ju?_u=ju=e:ju=ju.next=e),Du=!0,Ru||(Ru=!0,Ed(function(){0!==(6&fc)?ae(ue,Lu):Fu()}))}function Pu(e,t){if(!Mu&&Du){Mu=!0;do{for(var n=!1,r=_u;null!==r;){if(!t)if(0!==e){var a=r.pendingLanes;if(0===a)var s=0;else{var i=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-Se(42|e)+1)-1,s=201326741&(s&=a&~(i&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,zu(r,s))}else s=pc,0===(3&(s=Ie(r,r===mc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Te(r,s)||(n=!0,zu(r,s));r=r.next}}while(n);Mu=!1}}function Lu(){Fu()}function Fu(){Du=Ru=!1;var e=0;0!==Ou&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Sd&&(Sd=e,!0);return Sd=null,!1}()&&(e=Ou);for(var t=le(),n=null,r=_u;null!==r;){var a=r.next,s=Bu(r,t);0===s?(r.next=null,null===n?_u=a:n.next=a,null===a&&(ju=n)):(n=r,(0!==e||0!==(3&s))&&(Du=!0)),r=a}0!==Lc&&5!==Lc||Pu(e,!1),0!==Ou&&(Ou=0)}function Bu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var i=31-Se(s),o=1<<i,l=a[i];-1===l?0!==(o&n)&&0===(o&r)||(a[i]=_e(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=pc,n=Ie(e,e===(t=mc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===yc||9===yc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&se(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Te(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&se(r),Le(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=me}return r=Uu.bind(null,e),n=ae(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&se(r),e.callbackPriority=2,e.callbackNode=null,2}function Uu(e,t){if(0!==Lc&&5!==Lc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Su()&&e.callbackNode!==n)return null;var r=pc;return 0===(r=Ie(e,e===mc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(qc(e,r,t),Bu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Uu.bind(null,e):null)}function zu(e,t){if(Su())return null;qc(e,t,!0)}function Hu(){if(0===Ou){var e=Va;0===e&&(e=be,0===(261888&(be<<=1))&&(be=256)),Ou=e}return Ou}function Vu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Rt(""+e)}function Gu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Wu=0;Wu<Er.length;Wu++){var Yu=Er[Wu];Ar(Yu.toLowerCase(),"on"+(Yu[0].toUpperCase()+Yu.slice(1)))}Ar(pr,"onAnimationEnd"),Ar(yr,"onAnimationIteration"),Ar(vr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(wr,"onTransitionRun"),Ar(Sr,"onTransitionStart"),Ar(Nr,"onTransitionCancel"),Ar(Cr,"onTransitionEnd"),at("onMouseEnter",["mouseout","mouseover"]),at("onMouseLeave",["mouseout","mouseover"]),at("onPointerEnter",["pointerout","pointerover"]),at("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xu));function qu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;s=o,a.currentTarget=c;try{s(a)}catch(u){xr(u)}a.currentTarget=null,s=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;s=o,a.currentTarget=c;try{s(a)}catch(u){xr(u)}a.currentTarget=null,s=l}}}}function Zu(e,t){var n=t[Ge];void 0===n&&(n=t[Ge]=new Set);var r=e+"__bubble";n.has(r)||(ed(t,e,2,!1),n.add(r))}function Ku(e,t,n){var r=0;t&&(r|=4),ed(n,e,r,t)}var $u="_reactListening"+Math.random().toString(36).slice(2);function Ju(e){if(!e[$u]){e[$u]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Qu.has(t)||Ku(t,!1,e),Ku(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$u]||(t[$u]=!0,Ku("selectionchange",!1,t))}}function ed(e,t,n,r){switch(xh(t)){case 2:var a=Sh;break;case 8:a=Nh;break;default:a=Ch}n=a.bind(null,t,n,e),a=void 0,!Ht||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function td(e,t,n,r,a){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===a)break;if(4===i)for(i=r.return;null!==i;){var c=i.tag;if((3===c||4===c)&&i.stateNode.containerInfo===a)return;i=i.return}for(;null!==o;){if(null===(i=Ze(o)))return;if(5===(c=i.tag)||6===c||26===c||27===c){r=s=i;continue e}o=o.parentNode}}r=r.return}Bt(function(){var r=s,a=Ot(n),i=[];e:{var o=br.get(e);if(void 0!==o){var c=nn,u=e;switch(e){case"keypress":if(0===Qt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Sn;break;case pr:case yr:case vr:c=un;break;case Cr:c=Nn;break;case"scroll":case"scrollend":c=an;break;case"wheel":c=Cn;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=wn;break;case"toggle":case"beforetoggle":c=bn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var m,g=r;null!==g;){var p=g;if(m=p.stateNode,5!==(p=p.tag)&&26!==p&&27!==p||null===m||null===f||null!=(p=Ut(g,f))&&d.push(nd(g,p,m)),h)break;g=g.return}0<d.length&&(o=new c(o,u,null,n,a),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Mt||!(u=n.relatedTarget||n.fromElement)||!Ze(u)&&!u[Ve])&&(c||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ze(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=on,p="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=wn,p="onPointerLeave",f="onPointerEnter",g="pointer"),h=null==c?o:$e(c),m=null==u?o:$e(u),(o=new d(p,g+"leave",c,n,a)).target=h,o.relatedTarget=m,p=null,Ze(a)===r&&((d=new d(f,g+"enter",u,n,a)).target=m,d.relatedTarget=h,p=d),h=p,c&&u)e:{for(d=ad,g=u,m=0,p=f=c;p;p=d(p))m++;p=0;for(var y=g;y;y=d(y))p++;for(;0<m-p;)f=d(f),m--;for(;0<p-m;)g=d(g),p--;for(;m--;){if(f===g||null!==g&&f===g.alternate){d=f;break e}f=d(f),g=d(g)}d=null}else d=null;null!==c&&sd(i,o,c,d,!1),null!==u&&null!==h&&sd(i,h,u,d,!0)}if("select"===(c=(o=r?$e(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=zn;else if(kn(o))if(Hn)v=Kn;else{v=qn;var w=Qn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Tt(r.elementType)&&(v=zn):v=Zn;switch(v&&(v=v(e,r))?Pn(i,v,n,a):(w&&w(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&St(o,"number",o.value)),w=r?$e(r):window,e){case"focusin":(kn(w)||"true"===w.contentEditable)&&(ir=w,or=r,lr=null);break;case"focusout":lr=or=ir=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(i,n,a);break;case"selectionchange":if(sr)break;case"keydown":case"keyup":ur(i,n,a)}var S;if(An)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Mn?Rn(e,n)&&(N="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(N="onCompositionStart");N&&(Tn&&"ko"!==n.locale&&(Mn||"onCompositionStart"!==N?"onCompositionEnd"===N&&Mn&&(S=Xt()):(Wt="value"in(Gt=a)?Gt.value:Gt.textContent,Mn=!0)),0<(w=rd(r,N)).length&&(N=new hn(N,e,null,n,a),i.push({event:N,listeners:w}),S?N.data=S:null!==(S=Dn(n))&&(N.data=S))),(S=In?function(e,t){switch(e){case"compositionend":return Dn(t);case"keypress":return 32!==t.which?null:(jn=!0,_n);case"textInput":return(e=t.data)===_n&&jn?null:e;default:return null}}(e,n):function(e,t){if(Mn)return"compositionend"===e||!An&&Rn(e,t)?(e=Xt(),Yt=Wt=Gt=null,Mn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(N=rd(r,"onBeforeInput")).length&&(w=new hn("onBeforeInput","beforeinput",null,n,a),i.push({event:w,listeners:N}),w.data=S)),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var s=Vu((a[He]||null).action),i=r.submitter;i&&null!==(t=(t=i[He]||null)?Vu(t.formAction):i.getAttribute("formAction"))&&(s=t,i=null);var o=new nn("action","action",null,r,a);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Ou){var e=i?Gu(a,i):new FormData(a);eo(n,{pending:!0,data:e,method:a.method,action:s},null,e)}}else"function"===typeof s&&(o.preventDefault(),e=i?Gu(a,i):new FormData(a),eo(n,{pending:!0,data:e,method:a.method,action:s},s,e))},currentTarget:a}]})}}(i,e,r,n,a)}qu(i,t)})}function nd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rd(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===s||(null!=(a=Ut(e,n))&&r.unshift(nd(e,a,s)),null!=(a=Ut(e,t))&&r.push(nd(e,a,s))),3===e.tag)return r;e=e.return}return[]}function ad(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function sd(e,t,n,r,a){for(var s=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,a?null!=(c=Ut(n,s))&&i.unshift(nd(n,c,l)):a||null!=(c=Ut(n,s))&&i.push(nd(n,c,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var id=/\r\n?/g,od=/\u0000|\uFFFD/g;function ld(e){return("string"===typeof e?e:""+e).replace(id,"\n").replace(od,"")}function cd(e,t){return t=ld(t),ld(e)===t}function ud(e,t,n,r,a,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Et(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Et(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":It(e,r,s);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Rt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&ud(e,t,"name",a.name,a,null),ud(e,t,"formEncType",a.formEncType,a,null),ud(e,t,"formMethod",a.formMethod,a,null),ud(e,t,"formTarget",a.formTarget,a,null)):(ud(e,t,"encType",a.encType,a,null),ud(e,t,"method",a.method,a,null),ud(e,t,"target",a.target,a,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Rt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Dt);break;case"onScroll":null!=r&&Zu("scroll",e);break;case"onScrollEnd":null!=r&&Zu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Rt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Zu("beforetoggle",e),Zu("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=_t.get(n)||n,r)}}function dd(e,t,n,r,a,s){switch(n){case"style":It(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(i(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Et(e,r):("number"===typeof r||"bigint"===typeof r)&&Et(e,""+r);break;case"onScroll":null!=r&&Zu("scroll",e);break;case"onScrollEnd":null!=r&&Zu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Dt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"===typeof(s=null!=(s=e[He]||null)?s[n]:null)&&e.removeEventListener(t,s,a),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a)))}}function hd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zu("error",e),Zu("load",e);var r,a=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":a=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:ud(e,t,r,o,n,null)}}return s&&ud(e,t,"srcSet",n.srcSet,n,null),void(a&&ud(e,t,"src",n.src,n,null));case"input":Zu("invalid",e);var l=r=o=s=null,c=null,u=null;for(a in n)if(n.hasOwnProperty(a)){var d=n[a];if(null!=d)switch(a){case"name":s=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(i(137,t));break;default:ud(e,t,a,d,n,null)}}return void wt(e,r,l,c,u,o,s,!1);case"select":for(s in Zu("invalid",e),a=o=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":a=l;default:ud(e,t,s,l,n,null)}return t=r,n=o,e.multiple=!!a,void(null!=t?Nt(e,!!a,t,!1):null!=n&&Nt(e,!!a,n,!0));case"textarea":for(o in Zu("invalid",e),r=s=a=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":a=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(i(91));break;default:ud(e,t,o,l,n,null)}return void bt(e,a,s,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(a=n[c]))if("selected"===c)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else ud(e,t,c,a,n,null);return;case"dialog":Zu("beforetoggle",e),Zu("toggle",e),Zu("cancel",e),Zu("close",e);break;case"iframe":case"object":Zu("load",e);break;case"video":case"audio":for(a=0;a<Xu.length;a++)Zu(Xu[a],e);break;case"image":Zu("error",e),Zu("load",e);break;case"details":Zu("toggle",e);break;case"embed":case"source":case"link":Zu("error",e),Zu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(a=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:ud(e,t,u,a,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(a=n[d])&&dd(e,t,d,a,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(a=n[l])&&ud(e,t,l,a,n,null))}function fd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var md=null,gd=null;function pd(e){return 9===e.nodeType?e:e.ownerDocument}function yd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function wd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Sd=null;var Nd="function"===typeof setTimeout?setTimeout:void 0,Cd="function"===typeof clearTimeout?clearTimeout:void 0,bd="function"===typeof Promise?Promise:void 0,Ed="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof bd?function(e){return bd.resolve(null).then(e).catch(Ad)}:Nd;function Ad(e){setTimeout(function(){throw e})}function xd(e){return"head"===e}function Id(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)||"/&"===n){if(0===r)return e.removeChild(a),void Gh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Fd(e.ownerDocument.documentElement);else if("head"===n){Fd(n=e.ownerDocument.head);for(var s=n.firstChild;s;){var i=s.nextSibling,o=s.nodeName;s[Qe]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=i}}else"body"===n&&Fd(e.ownerDocument.body);n=a}while(n);Gh(t)}function Td(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function _d(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":_d(n),qe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function jd(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Md(e.nextSibling)))return null}return e}function Rd(e){return"$?"===e.data||"$~"===e.data}function Dd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Md(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Od=null;function kd(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Md(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Pd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Ld(e,t,n){switch(t=pd(n),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function Fd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);qe(e)}var Bd=new Map,Ud=new Set;function zd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Hd=k.d;k.d={f:function(){var e=Hd.f(),t=Jc();return e||t},r:function(e){var t=Ke(e);null!==t&&5===t.tag&&"form"===t.type?no(t):Hd.r(e)},D:function(e){Hd.D(e),Gd("dns-prefetch",e,null)},C:function(e,t){Hd.C(e,t),Gd("preconnect",e,t)},L:function(e,t,n){Hd.L(e,t,n);var r=Vd;if(r&&e&&t){var a='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(a+='[imagesizes="'+yt(n.imageSizes)+'"]')):a+='[href="'+yt(e)+'"]';var s=a;switch(t){case"style":s=Yd(e);break;case"script":s=qd(e)}Bd.has(s)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Bd.set(s,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(Xd(s))||"script"===t&&r.querySelector(Zd(s))||(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Hd.m(e,t);var n=Vd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',s=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=qd(e)}if(!Bd.has(s)&&(e=f({rel:"modulepreload",href:e},t),Bd.set(s,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Zd(s)))return}hd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Hd.X(e,t);var n=Vd;if(n&&e){var r=Je(n).hoistableScripts,a=qd(e),s=r.get(a);s||((s=n.querySelector(Zd(a)))||(e=f({src:e,async:!0},t),(t=Bd.get(a))&&eh(e,t),et(s=n.createElement("script")),hd(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(a,s))}},S:function(e,t,n){Hd.S(e,t,n);var r=Vd;if(r&&e){var a=Je(r).hoistableStyles,s=Yd(e);t=t||"default";var i=a.get(s);if(!i){var o={loading:0,preload:null};if(i=r.querySelector(Xd(s)))o.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Bd.get(s))&&Jd(e,n);var l=i=r.createElement("link");et(l),hd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,$d(i,t,r)}i={type:"stylesheet",instance:i,count:1,state:o},a.set(s,i)}}},M:function(e,t){Hd.M(e,t);var n=Vd;if(n&&e){var r=Je(n).hoistableScripts,a=qd(e),s=r.get(a);s||((s=n.querySelector(Zd(a)))||(e=f({src:e,async:!0,type:"module"},t),(t=Bd.get(a))&&eh(e,t),et(s=n.createElement("script")),hd(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(a,s))}}};var Vd="undefined"===typeof document?null:document;function Gd(e,t,n){var r=Vd;if(r&&"string"===typeof t&&t){var a=yt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof n&&(a+='[crossorigin="'+n+'"]'),Ud.has(a)||(Ud.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Wd(e,t,n,r){var a,s,o,l,c=(c=Y.current)?zd(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Yd(n.href),(r=(n=Je(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Yd(n.href);var u=Je(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Xd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Bd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Bd.set(e,n),u||(a=c,s=e,o=n,l=d.state,a.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=a.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),hd(s,"link",o),et(s),a.head.appendChild(s))))),t&&null===r)throw Error(i(528,""));return d}if(t&&null!==r)throw Error(i(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=qd(n),(r=(n=Je(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Yd(e){return'href="'+yt(e)+'"'}function Xd(e){return'link[rel="stylesheet"]['+e+"]"}function Qd(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function qd(e){return'[src="'+yt(e)+'"]'}function Zd(e){return"script[async]"+e}function Kd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var a=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),hd(r,"style",a),$d(r,n.precedence,e),t.instance=r;case"stylesheet":a=Yd(n.href);var s=e.querySelector(Xd(a));if(s)return t.state.loading|=4,t.instance=s,et(s),s;r=Qd(n),(a=Bd.get(a))&&Jd(r,a),et(s=(e.ownerDocument||e).createElement("link"));var o=s;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),hd(s,"link",r),t.state.loading|=4,$d(s,n.precedence,e),t.instance=s;case"script":return s=qd(n.src),(a=e.querySelector(Zd(s)))?(t.instance=a,et(a),a):(r=n,(a=Bd.get(s))&&eh(r=f({},n),a),et(a=(e=e.ownerDocument||e).createElement("script")),hd(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,$d(r,n.precedence,e));return t.instance}function $d(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,s=a,i=0;i<r.length;i++){var o=r[i];if(o.dataset.precedence===t)s=o;else if(s!==a)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Jd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function nh(e,t,n){if(null===th){var r=new Map,a=th=new Map;a.set(n,r)}else(r=(a=th).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var s=n[a];if(!(s[Qe]||s[ze]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var i=s.getAttribute(t)||"";i=e+i;var o=r.get(i);o?o.push(s):r.set(i,[s])}}return r}function rh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ah(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var sh=0;function ih(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)lh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var oh=null;function lh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,oh=new Map,t.forEach(ch,e),oh=null,ih.call(e))}function ch(e,t){if(!(4&t.state.loading)){var n=oh.get(e);if(n)var r=n.get(null);else{n=new Map,oh.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<a.length;s++){var i=a[s];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),r=i)}r&&n.set(null,r)}i=(a=t.instance).getAttribute("data-precedence"),(s=n.get(i)||r)===r&&n.set(null,a),n.set(i,a),this.count++,r=ih.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),s?s.parentNode.insertBefore(a,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var uh={$$typeof:N,Provider:null,Consumer:null,_currentValue:P,_currentValue2:P,_threadCount:0};function dh(e,t,n,r,a,s,i,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Re(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Re(0),this.hiddenUpdates=Re(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=s,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function hh(e,t,n,r,a,s,i,o,l,c,u,d){return e=new dh(e,t,n,i,l,c,u,d,o),t=1,!0===s&&(t|=24),s=Fr(3,null,null,t),e.current=s,s.stateNode=e,(t=Ba()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ps(s),e}function fh(e){return e?e=Pr:Pr}function mh(e,t,n,r,a,s){a=fh(a),null===r.context?r.context=a:r.pendingContext=a,(r=vs(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=ws(e,r,t))&&(Qc(n,0,t),Ss(n,e,t))}function gh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ph(e,t){gh(e,t),(e=e.alternate)&&gh(e,t)}function yh(e){if(13===e.tag||31===e.tag){var t=Mr(e,67108864);null!==t&&Qc(t,0,67108864),ph(e,67108864)}}function vh(e){if(13===e.tag||31===e.tag){var t=Yc(),n=Mr(e,t=Pe(t));null!==n&&Qc(n,0,t),ph(e,t)}}var wh=!0;function Sh(e,t,n,r){var a=O.T;O.T=null;var s=k.p;try{k.p=2,Ch(e,t,n,r)}finally{k.p=s,O.T=a}}function Nh(e,t,n,r){var a=O.T;O.T=null;var s=k.p;try{k.p=8,Ch(e,t,n,r)}finally{k.p=s,O.T=a}}function Ch(e,t,n,r){if(wh){var a=bh(r);if(null===a)td(e,t,r,Eh,n),kh(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Th=Ph(Th,e,t,n,r,a),!0;case"dragenter":return _h=Ph(_h,e,t,n,r,a),!0;case"mouseover":return jh=Ph(jh,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return Rh.set(s,Ph(Rh.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Dh.set(s,Ph(Dh.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(kh(e,r),4&t&&-1<Oh.indexOf(e)){for(;null!==a;){var s=Ke(a);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var i=xe(s.pendingLanes);if(0!==i){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;i;){var l=1<<31-Se(i);o.entanglements[1]|=l,i&=~l}ku(s),0===(6&fc)&&(Oc=le()+500,Pu(0,!1))}}break;case 31:case 13:null!==(o=Mr(s,2))&&Qc(o,0,2),Jc(),ph(s,2)}if(null===(s=bh(r))&&td(e,t,r,Eh,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else td(e,t,r,null,n)}}function bh(e){return Ah(e=Ot(e))}var Eh=null;function Ah(e){if(Eh=null,null!==(e=Ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Eh=e,null}function xh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case fe:return 32;case me:return 268435456;default:return 32}default:return 32}}var Ih=!1,Th=null,_h=null,jh=null,Rh=new Map,Dh=new Map,Mh=[],Oh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kh(e,t){switch(e){case"focusin":case"focusout":Th=null;break;case"dragenter":case"dragleave":_h=null;break;case"mouseover":case"mouseout":jh=null;break;case"pointerover":case"pointerout":Rh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dh.delete(t.pointerId)}}function Ph(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=Ke(t))&&yh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lh(e){var t=Ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Be(e.priority,function(){vh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Be(e.priority,function(){vh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Fh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=bh(e.nativeEvent);if(null!==n)return null!==(t=Ke(n))&&yh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Mt=r,n.target.dispatchEvent(r),Mt=null,t.shift()}return!0}function Bh(e,t,n){Fh(e)&&n.delete(t)}function Uh(){Ih=!1,null!==Th&&Fh(Th)&&(Th=null),null!==_h&&Fh(_h)&&(_h=null),null!==jh&&Fh(jh)&&(jh=null),Rh.forEach(Bh),Dh.forEach(Bh)}function zh(e,t){e.blockedOn===t&&(e.blockedOn=null,Ih||(Ih=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Uh)))}var Hh=null;function Vh(e){Hh!==e&&(Hh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Hh===e&&(Hh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],a=e[t+2];if("function"!==typeof r){if(null===Ah(r||n))continue;break}var s=Ke(n);null!==s&&(e.splice(t,3),t-=3,eo(s,{pending:!0,data:a,method:n.method,action:r},r,a))}}))}function Gh(e){function t(t){return zh(t,e)}null!==Th&&zh(Th,e),null!==_h&&zh(_h,e),null!==jh&&zh(jh,e),Rh.forEach(t),Dh.forEach(t);for(var n=0;n<Mh.length;n++){var r=Mh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Mh.length&&null===(n=Mh[0]).blockedOn;)Lh(n),null===n.blockedOn&&Mh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],s=n[r+1],i=a[He]||null;if("function"===typeof s)i||Vh(n);else if(i){var o=null;if(s&&s.hasAttribute("formAction")){if(a=s,i=s[He]||null)o=i.formAction;else if(null!==Ah(a))continue}else o=i.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Vh(n)}}}function Wh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return a=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==a&&(a(),a=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==a&&(a(),a=null)}}}function Yh(e){this._internalRoot=e}function Xh(e){this._internalRoot=e}Xh.prototype.render=Yh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));mh(t.current,Yc(),e,t,null,null)},Xh.prototype.unmount=Yh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;mh(e.current,2,null,e,null,null),Jc(),t[Ve]=null}},Xh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mh.length&&0!==t&&t<Mh[n].priority;n++);Mh.splice(n,0,e),0===n&&Lh(e)}};var Qh=a.version;if("19.2.0"!==Qh)throw Error(i(527,Qh,"19.2.0"));k.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(r=a.return)){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return d(a),e;if(s===r)return d(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var o=!1,c=a.child;c;){if(c===n){o=!0,n=a,r=s;break}if(c===r){o=!0,r=a,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=a;break}if(c===r){o=!0,r=s,n=a;break}c=c.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var qh={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zh.isDisabled&&Zh.supportsFiber)try{ye=Zh.inject(qh),ve=Zh}catch($h){}}t.createRoot=function(e,t){if(!o(e))throw Error(i(299));var n=!1,r="",a=Eo,s=Ao,l=xo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=hh(e,1,!1,null,0,n,r,null,a,s,l,Wh),e[Ve]=t.current,Ju(e),new Yh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(i(299));var r=!1,a="",s=Eo,l=Ao,c=xo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=hh(e,1,!0,t,0,r,a,u,s,l,c,Wh)).context=fh(null),n=t.current,(a=vs(r=Pe(r=Yc()))).callback=null,ws(n,a,r),n=r,t.current.lanes=n,De(t,n),ku(t),e[Ve]=t.current,Ju(e),new Xh(t)},t.version="19.2.0"},43:(e,t,n)=>{"use strict";e.exports=n(288)},72:function(e,t,n){!function(e){"use strict";function t(e){return null===e||void 0===e}var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function a(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function s(e,t){var n=Object.setPrototypeOf;n?n(e,t):e.__proto__=t}function i(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}var o,l=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),s(r,n.prototype),i(r),r}return a(t,e),t}(Error);class c extends l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;super(e),this.message=e}getKind(){return this.constructor.kind}}c.kind="Exception";class u extends c{}u.kind="ArgumentException";class d extends c{}d.kind="IllegalArgumentException";class h{constructor(e){if(this.binarizer=e,null===e)throw new d("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const a=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new h(this.binarizer.createBinarizer(a))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new h(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new h(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}class f extends c{static getChecksumInstance(){return new f}}f.kind="ChecksumException";class m{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class g{static arraycopy(e,t,n,r,a){for(;a--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class p extends c{}p.kind="IndexOutOfBoundsException";class y extends p{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;super(t),this.index=e,this.message=t}}y.kind="ArrayIndexOutOfBoundsException";class v{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){v.rangeCheck(e.length,t,n);for(let a=t;a<n;a++)e[a]=r}static rangeCheck(e,t,n){if(t>n)throw new d("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new y(t);if(n>e)throw new y(n)}static asList(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}static create(e,t,n){return Array.from({length:e}).map(e=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(e=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,a=new Int32Array(r);return g.arraycopy(e,t,a,0,r),a}static binarySearch(e,t,n){void 0===n&&(n=v.numberComparator);let r=0,a=e.length-1;for(;r<=a;){const s=a+r>>1,i=n(t,e[s]);if(i>0)r=s+1;else{if(!(i<0))return s;a=s-1}}return-r-1}static numberComparator(e,t){return e-t}}class w{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let n=31;return t=e<<16,0!==t&&(n-=16,e=t),t=e<<8,0!==t&&(n-=8,e=t),t=e<<4,0!==t&&(n-=4,e=t),t=e<<2,0!==t&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}w.MIN_VALUE_32_BITS=-2147483648,w.MAX_VALUE=Number.MAX_SAFE_INTEGER;class S{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=void 0===t||null===t?S.makeArray(e):t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){const t=S.makeArray(e);g.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),a=n[r];a&=~((1<<(31&e))-1);const s=n.length;for(;0===a;){if(++r===s)return t;a=n[r]}const i=32*r+w.numberOfTrailingZeros(a);return i>t?t:i}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),a=~n[r];a&=~((1<<(31&e))-1);const s=n.length;for(;0===a;){if(++r===s)return t;a=~n[r]}const i=32*r+w.numberOfTrailingZeros(a);return i>t?t:i}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new d;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),a=this.bits;for(let s=n;s<=r;s++){const i=(2<<(s<r?31:31&t))-(1<<(s>n?0:31&e));a[s]|=i}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new d;if(t===e)return!0;t--;const r=Math.floor(e/32),a=Math.floor(t/32),s=this.bits;for(let i=r;i<=a;i++){const o=(2<<(i<a?31:31&t))-(1<<(i>r?0:31&e))&4294967295;if((s[i]&o)!==(n?o:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new d("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit(1===(e>>n-1&1))}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new d("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let a=0;a<r;a++){let r=0;for(let t=0;t<8;t++)this.get(e)&&(r|=1<<7-t),e++;t[n+a]=r}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let a=0;a<n;a++){let n=r[a];n=n>>1&1431655765|(1431655765&n)<<1,n=n>>2&858993459|(858993459&n)<<2,n=n>>4&252645135|(252645135&n)<<4,n=n>>8&16711935|(16711935&n)<<8,n=n>>16&65535|(65535&n)<<16,e[t-a]=n}if(this.size!==32*n){const t=32*n-this.size;let r=e[0]>>>t;for(let a=1;a<n;a++){const n=e[a];r|=n<<32-t,e[a-1]=r,r=n>>>t}e[n-1]=r}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof S))return!1;const t=e;return this.size===t.size&&v.equals(this.bits,t.bits)}hashCode(){return 31*this.size+v.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new S(this.size,this.bits.slice())}}!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(o||(o={}));var N,C=o;class b extends c{static getFormatInstance(){return new b}}b.kind="FormatException",function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(N||(N={}));class E{constructor(e,t,n){this.valueIdentifier=e,this.name=n,this.values="number"===typeof t?Int32Array.from([t]):t;for(var r=arguments.length,a=new Array(r>3?r-3:0),s=3;s<r;s++)a[s-3]=arguments[s];this.otherEncodingNames=a,E.VALUE_IDENTIFIER_TO_ECI.set(e,this),E.NAME_TO_ECI.set(n,this);const i=this.values;for(let o=0,l=i.length;o!==l;o++){const e=i[o];E.VALUES_TO_ECI.set(e,this)}for(const o of a)E.NAME_TO_ECI.set(o,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new b("incorect value");const t=E.VALUES_TO_ECI.get(e);if(void 0===t)throw new b("incorect value");return t}static getCharacterSetECIByName(e){const t=E.NAME_TO_ECI.get(e);if(void 0===t)throw new b("incorect value");return t}equals(e){if(!(e instanceof E))return!1;const t=e;return this.getName()===t.getName()}}E.VALUE_IDENTIFIER_TO_ECI=new Map,E.VALUES_TO_ECI=new Map,E.NAME_TO_ECI=new Map,E.Cp437=new E(N.Cp437,Int32Array.from([0,2]),"Cp437"),E.ISO8859_1=new E(N.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),E.ISO8859_2=new E(N.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),E.ISO8859_3=new E(N.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),E.ISO8859_4=new E(N.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),E.ISO8859_5=new E(N.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),E.ISO8859_6=new E(N.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),E.ISO8859_7=new E(N.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),E.ISO8859_8=new E(N.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),E.ISO8859_9=new E(N.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),E.ISO8859_10=new E(N.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),E.ISO8859_11=new E(N.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),E.ISO8859_13=new E(N.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),E.ISO8859_14=new E(N.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),E.ISO8859_15=new E(N.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),E.ISO8859_16=new E(N.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),E.SJIS=new E(N.SJIS,20,"SJIS","Shift_JIS"),E.Cp1250=new E(N.Cp1250,21,"Cp1250","windows-1250"),E.Cp1251=new E(N.Cp1251,22,"Cp1251","windows-1251"),E.Cp1252=new E(N.Cp1252,23,"Cp1252","windows-1252"),E.Cp1256=new E(N.Cp1256,24,"Cp1256","windows-1256"),E.UnicodeBigUnmarked=new E(N.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),E.UTF8=new E(N.UTF8,26,"UTF8","UTF-8"),E.ASCII=new E(N.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),E.Big5=new E(N.Big5,28,"Big5"),E.GB18030=new E(N.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),E.EUC_KR=new E(N.EUC_KR,30,"EUC_KR","EUC-KR");class A extends c{}A.kind="UnsupportedOperationException";class x{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!x.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)}static isBrowser(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(e){return"string"===typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof E?e:E.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(x.isDecodeFallbackSupported(n)){let t="";for(let n=0,r=e.length;n<r;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+="%"+r}return decodeURIComponent(t)}if(n.equals(E.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new A("Encoding ".concat(this.encodingName(t)," not supported by fallback."))}static isDecodeFallbackSupported(e){return e.equals(E.UTF8)||e.equals(E.ISO8859_1)||e.equals(E.ASCII)}static encodeFallback(e){const t=btoa(unescape(encodeURIComponent(e))).split(""),n=[];for(let r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)}}class I{static castAsNonUtf8Char(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t?t.getName():this.ISO88591;return x.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(null!==t&&void 0!==t&&void 0!==t.get(C.CHARACTER_SET))return t.get(C.CHARACTER_SET).toString();const n=e.length;let r=!0,a=!0,s=!0,i=0,o=0,l=0,c=0,u=0,d=0,h=0,f=0,m=0,g=0,p=0;const y=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let v=0;v<n&&(r||a||s);v++){const t=255&e[v];s&&(i>0?0===(128&t)?s=!1:i--:0!==(128&t)&&(0===(64&t)?s=!1:(i++,0===(32&t)?o++:(i++,0===(16&t)?l++:(i++,0===(8&t)?c++:s=!1))))),r&&(t>127&&t<160?r=!1:t>159&&(t<192||215===t||247===t)&&p++),a&&(u>0?t<64||127===t||t>252?a=!1:u--:128===t||160===t||t>239?a=!1:t>160&&t<224?(d++,f=0,h++,h>m&&(m=h)):t>127?(u++,h=0,f++,f>g&&(g=f)):(h=0,f=0))}return s&&i>0&&(s=!1),a&&u>0&&(a=!1),s&&(y||o+l+c>0)?I.UTF8:a&&(I.ASSUME_SHIFT_JIS||m>=3||g>=3)?I.SHIFT_JIS:r&&a?2===m&&2===d||10*p>=n?I.SHIFT_JIS:I.ISO88591:r?I.ISO88591:a?I.SHIFT_JIS:s?I.UTF8:I.PLATFORM_DEFAULT_ENCODING}static format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let a=-1;function s(e,t,r,s,i,o){if("%%"===e)return"%";if(void 0===n[++a])return;e=s?parseInt(s.substr(1)):void 0;let l,c=i?parseInt(i.substr(1)):void 0;switch(o){case"s":l=n[a];break;case"c":l=n[a][0];break;case"f":l=parseFloat(n[a]).toFixed(e);break;case"p":l=parseFloat(n[a]).toPrecision(e);break;case"e":l=parseFloat(n[a]).toExponential(e);break;case"x":l=parseInt(n[a]).toString(c||16);break;case"d":l=parseFloat(parseInt(n[a],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(r),d=r&&r[0]+""==="0"?"0":" ";for(;l.length<u;)l=void 0!==t?l+d:d+l;return l}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,s)}static getBytes(e,t){return x.encode(e,t)}static getCharCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}I.SHIFT_JIS=E.SJIS.getName(),I.GB2312="GB2312",I.ISO88591=E.ISO8859_1.getName(),I.EUC_JP="EUC_JP",I.UTF8=E.UTF8.getName(),I.PLATFORM_DEFAULT_ENCODING=I.UTF8,I.ASSUME_SHIFT_JIS=!1;class T{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=I.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class _{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new d("Both dimensions must be greater than 0");void 0!==n&&null!==n||(n=Math.floor((e+31)/32)),this.rowSize=n,void 0!==r&&null!==r||(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new _(n,t);for(let a=0;a<t;a++){const t=e[a];for(let e=0;e<n;e++)t[e]&&r.set(e,a)}return r}static parseFromString(e,t,n){if(null===e)throw new d("stringRepresentation cannot be null");const r=new Array(e.length);let a=0,s=0,i=-1,o=0,l=0;for(;l<e.length;)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(a>s){if(-1===i)i=a-s;else if(a-s!==i)throw new d("row lengths do not match");s=a,o++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,r[a]=!0,a++;else{if(e.substring(l,l+n.length)!==n)throw new d("illegal character encountered: "+e.substring(l));l+=n.length,r[a]=!1,a++}if(a>s){if(-1===i)i=a-s;else if(a-s!==i)throw new d("row lengths do not match");o++}const c=new _(i,o);for(let u=0;u<a;u++)r[u]&&c.set(Math.floor(u%i),Math.floor(u/i));return c}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[n]>>>(31&e)&1)}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new d("input matrix dimensions do not match");const t=new S(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let a=0,s=this.height;a<s;a++){const s=a*n,i=e.getRow(a,t).getBitArray();for(let e=0;e<n;e++)r[s+e]^=i[e]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new d("Left and top must be nonnegative");if(r<1||n<1)throw new d("Height and width must be at least 1");const a=e+n,s=t+r;if(s>this.height||a>this.width)throw new d("The region must fit inside the matrix");const i=this.rowSize,o=this.bits;for(let l=t;l<s;l++){const t=l*i;for(let n=e;n<a;n++)o[t+Math.floor(n/32)]|=1<<(31&n)&4294967295}}getRow(e,t){null===t||void 0===t||t.getSize()<this.width?t=new S(this.width):t.clear();const n=this.rowSize,r=this.bits,a=e*n;for(let s=0;s<n;s++)t.setBulk(32*s,r[a+s]);return t}setRow(e,t){g.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new S(e),r=new S(e);for(let a=0,s=Math.floor((t+1)/2);a<s;a++)n=this.getRow(a,n),r=this.getRow(t-1-a,r),n.reverse(),r.reverse(),this.setRow(a,r),this.setRow(t-1-a,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let a=e,s=t,i=-1,o=-1;for(let l=0;l<t;l++)for(let e=0;e<n;e++){const t=r[l*n+e];if(0!==t){if(l<s&&(s=l),l>o&&(o=l),32*e<a){let n=0;for(;0===(t<<31-n&4294967295);)n++;32*e+n<a&&(a=32*e+n)}if(32*e+31>i){let n=31;for(;t>>>n===0;)n--;32*e+n>i&&(i=32*e+n)}}}return i<a||o<s?null:Int32Array.from([a,s,i-a+1,o-s+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&0===t[n];)n++;if(n===t.length)return null;const r=n/e;let a=n%e*32;const s=t[n];let i=0;for(;0===(s<<31-i&4294967295);)i++;return a+=i,Int32Array.from([a,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&0===t[n];)n--;if(n<0)return null;const r=Math.floor(n/e);let a=32*Math.floor(n%e);const s=t[n];let i=31;for(;s>>>i===0;)i--;return a+=i,Int32Array.from([a,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof _))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&v.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+v.hashCode(this.bits),e}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"X ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"  ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new T;for(let a=0,s=this.height;a<s;a++){for(let n=0,s=this.width;n<s;n++)r.append(this.get(n,a)?e:t);r.append(n)}return r.toString()}clone(){return new _(this.width,this.height,this.rowSize,this.bits.slice())}}class j extends c{static getNotFoundInstance(){return new j}}j.kind="NotFoundException";class R extends m{constructor(e){super(e),this.luminances=R.EMPTY,this.buckets=new Int32Array(R.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();void 0===t||null===t||t.getSize()<r?t=new S(r):t.clear(),this.initArrays(r);const a=n.getRow(e,this.luminances),s=this.buckets;for(let o=0;o<r;o++)s[(255&a[o])>>R.LUMINANCE_SHIFT]++;const i=R.estimateBlackPoint(s);if(r<3)for(let o=0;o<r;o++)(255&a[o])<i&&t.set(o);else{let e=255&a[0],n=255&a[1];for(let s=1;s<r-1;s++){const r=255&a[s+1];(4*n-e-r)/2<i&&t.set(s),e=n,n=r}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new _(t,n);this.initArrays(t);const a=this.buckets;for(let o=1;o<5;o++){const r=Math.floor(n*o/5),s=e.getRow(r,this.luminances),i=Math.floor(4*t/5);for(let e=Math.floor(t/5);e<i;e++)a[(255&s[e])>>R.LUMINANCE_SHIFT]++}const s=R.estimateBlackPoint(a),i=e.getMatrix();for(let o=0;o<n;o++){const e=o*t;for(let n=0;n<t;n++)(255&i[e+n])<s&&r.set(n,o)}return r}createBinarizer(e){return new R(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<R.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,a=0;for(let c=0;c<t;c++)e[c]>a&&(r=c,a=e[c]),e[c]>n&&(n=e[c]);let s=0,i=0;for(let c=0;c<t;c++){const t=c-r,n=e[c]*t*t;n>i&&(s=c,i=n)}if(r>s){const e=r;r=s,s=e}if(s-r<=t/16)throw new j;let o=s-1,l=-1;for(let c=s-1;c>r;c--){const t=c-r,a=t*t*(s-c)*(n-e[c]);a>l&&(o=c,l=a)}return o<<R.LUMINANCE_SHIFT}}R.LUMINANCE_BITS=5,R.LUMINANCE_SHIFT=8-R.LUMINANCE_BITS,R.LUMINANCE_BUCKETS=1<<R.LUMINANCE_BITS,R.EMPTY=Uint8ClampedArray.from([0]);class D extends R{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=D.MINIMUM_DIMENSION&&n>=D.MINIMUM_DIMENSION){const r=e.getMatrix();let a=t>>D.BLOCK_SIZE_POWER;0!==(t&D.BLOCK_SIZE_MASK)&&a++;let s=n>>D.BLOCK_SIZE_POWER;0!==(n&D.BLOCK_SIZE_MASK)&&s++;const i=D.calculateBlackPoints(r,a,s,t,n),o=new _(t,n);D.calculateThresholdForBlock(r,a,s,t,n,i,o),this.matrix=o}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new D(e)}static calculateThresholdForBlock(e,t,n,r,a,s,i){const o=a-D.BLOCK_SIZE,l=r-D.BLOCK_SIZE;for(let c=0;c<n;c++){let a=c<<D.BLOCK_SIZE_POWER;a>o&&(a=o);const u=D.cap(c,2,n-3);for(let n=0;n<t;n++){let o=n<<D.BLOCK_SIZE_POWER;o>l&&(o=l);const c=D.cap(n,2,t-3);let d=0;for(let e=-2;e<=2;e++){const t=s[u+e];d+=t[c-2]+t[c-1]+t[c]+t[c+1]+t[c+2]}const h=d/25;D.thresholdBlock(e,o,a,h,r,i)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,a,s){for(let i=0,o=n*a+t;i<D.BLOCK_SIZE;i++,o+=a)for(let a=0;a<D.BLOCK_SIZE;a++)(255&e[o+a])<=r&&s.set(t+a,n+i)}static calculateBlackPoints(e,t,n,r,a){const s=a-D.BLOCK_SIZE,i=r-D.BLOCK_SIZE,o=new Array(n);for(let l=0;l<n;l++){o[l]=new Int32Array(t);let n=l<<D.BLOCK_SIZE_POWER;n>s&&(n=s);for(let a=0;a<t;a++){let t=a<<D.BLOCK_SIZE_POWER;t>i&&(t=i);let s=0,c=255,u=0;for(let a=0,i=n*r+t;a<D.BLOCK_SIZE;a++,i+=r){for(let t=0;t<D.BLOCK_SIZE;t++){const n=255&e[i+t];s+=n,n<c&&(c=n),n>u&&(u=n)}if(u-c>D.MIN_DYNAMIC_RANGE)for(a++,i+=r;a<D.BLOCK_SIZE;a++,i+=r)for(let t=0;t<D.BLOCK_SIZE;t++)s+=255&e[i+t]}let d=s>>2*D.BLOCK_SIZE_POWER;if(u-c<=D.MIN_DYNAMIC_RANGE&&(d=c/2,l>0&&a>0)){const e=(o[l-1][a]+2*o[l][a-1]+o[l-1][a-1])/4;c<e&&(d=e)}o[l][a]=d}}return o}}D.BLOCK_SIZE_POWER=3,D.BLOCK_SIZE=1<<D.BLOCK_SIZE_POWER,D.BLOCK_SIZE_MASK=D.BLOCK_SIZE-1,D.MINIMUM_DIMENSION=5*D.BLOCK_SIZE,D.MIN_DYNAMIC_RANGE=24;class M{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new A("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new A("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new A("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new T;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let e=0;e<this.width;e++){const n=255&r[e];let a;a=n<64?"#":n<128?"+":n<192?".":" ",t.append(a)}t.append("\n")}return t.toString()}}class O extends M{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let a=0;a<r;a++)n[a]=255-(255&n[a]);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(255&e[r]);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new O(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new O(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new O(this.delegate.rotateCounterClockwise45())}}class k extends M{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=k.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return k.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let a=0,s=0,i=e.length;a<i;a+=4,s++){let t;t=0===e[a+3]?255:306*e[a]+601*e[a+1]+117*e[a+2]+512>>10,r[s]=t}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*k.DEGREE_TO_RADIANS,a=this.canvas.width,s=this.canvas.height,i=Math.ceil(Math.abs(Math.cos(r))*a+Math.abs(Math.sin(r))*s),o=Math.ceil(Math.abs(Math.sin(r))*a+Math.abs(Math.cos(r))*s);return t.width=i,t.height=o,n.translate(i/2,o/2),n.rotate(r),n.drawImage(this.canvas,a/-2,s/-2),this.buffer=k.makeBufferFromCanvasImageData(t),this}invert(){return new O(this)}}k.DEGREE_TO_RADIANS=Math.PI/180;class P{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var L,F=(globalThis||n.g||self||window?(globalThis||n.g||self||window||void 0).__awaiter:void 0)||function(e,t,n,r){function a(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function i(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){e.done?n(e.value):a(e.value).then(i,o)}l((r=r.apply(e,t||[])).next())})};class B{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2?arguments[2]:void 0;this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!==typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return F(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const e="video"===n.kind?"videoinput":n.kind;if("videoinput"!==e)continue;const r={deviceId:n.deviceId||n.id,label:n.label||"Video device ".concat(t.length+1),kind:e,groupId:n.groupId};t.push(r)}return t})}getVideoInputDevices(){return F(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(e=>new P(e.deviceId,e.label))})}findDeviceById(e){return F(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(t=>t.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return F(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return F(this,void 0,void 0,function*(){let n;this.reset(),n=e?{deviceId:{exact:e}}:{facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return F(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return F(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return F(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return F(this,void 0,void 0,function*(){let r;r=e?{deviceId:{exact:e}}:{facingMode:"environment"};const a={video:r};return yield this.decodeFromConstraints(a,t,n)})}decodeFromConstraints(e,t,n){return F(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return F(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return F(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return F(this,void 0,void 0,function*(){if(this.isVideoPlaying(e))console.warn("Trying to play video that is already playing.");else try{yield e.play()}catch(t){console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new u("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new u("element with id '".concat(e,"' must be an ").concat(t," element"));return n}decodeFromImage(e,t){if(!e&&!t)throw new u("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new u("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(void 0===e&&void 0===t)throw new u("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new u("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);let n;return this.imageElement=t,n=this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new u("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new u("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new u("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new u("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return F(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return F(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return"undefined"===typeof e&&(t=document.createElement("img"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"===typeof document||(t=document.createElement("video"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._stopAsyncDecode=!1;const r=(a,s)=>{if(this._stopAsyncDecode)return s(new j("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{a(this.decode(e))}catch(i){if(t&&i instanceof j||(i instanceof f||i instanceof b)&&n)return setTimeout(r,this._timeBetweenDecodingAttempts,a,s);s(i)}};return new Promise((e,t)=>r(e,t))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r),(r instanceof f||r instanceof b||r instanceof j)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return 0!==e.videoWidth}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.captureCanvasContext;t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new k(t),r=new D(n);return new h(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}class U{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?0:8*t.length,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g.currentTimeMillis();this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=t,this.numBits=void 0===n||null===n?null===t||void 0===t?0:8*t.length:n,this.resultPoints=r,this.format=a,this.resultMetadata=null,this.timestamp=void 0===s||null===s?g.currentTimeMillis():s}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){const n=new Array(t.length+e.length);g.arraycopy(t,0,n,0,t.length),g.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(L||(L={}));var z,H=L;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(z||(z={}));var V,G,W,Y,X,Q,q=z;class Z{constructor(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=void 0===e||null===e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class K{exp(e){return this.expTable[e]}log(e){if(0===e)throw new d;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class ${constructor(e,t){if(0===t.length)throw new d;this.field=e;const n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-e),g.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);const t=this.coefficients;let n;if(1===e){n=0;for(let e=0,r=t.length;e!==r;e++){const r=t[e];n=K.addOrSubtract(n,r)}return n}n=t[0];const r=t.length,a=this.field;for(let s=1;s<r;s++)n=K.addOrSubtract(a.multiply(e,n),t[s]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const e=t;t=n,n=e}let r=new Int32Array(n.length);const a=n.length-t.length;g.arraycopy(n,0,r,0,a);for(let s=a;s<n.length;s++)r[s]=K.addOrSubtract(t[s-a],n[s]);return new $(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,a=r.length,s=new Int32Array(n+a-1),i=this.field;for(let o=0;o<n;o++){const e=t[o];for(let t=0;t<a;t++)s[o+t]=K.addOrSubtract(s[o+t],i.multiply(e,r[t]))}return new $(i,s)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),a=this.coefficients;for(let s=0;s<t;s++)r[s]=n.multiply(a[s],e);return new $(n,r)}multiplyByMonomial(e,t){if(e<0)throw new d;if(0===t)return this.field.getZero();const n=this.coefficients,r=n.length,a=new Int32Array(r+e),s=this.field;for(let i=0;i<r;i++)a[i]=s.multiply(n[i],t);return new $(s,a)}divide(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new d("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const a=e.getCoefficient(e.getDegree()),s=t.inverse(a);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const a=r.getDegree()-e.getDegree(),i=t.multiply(r.getCoefficient(r.getDegree()),s),o=e.multiplyByMonomial(a,i),l=t.buildMonomial(a,i);n=n.addOrSubtract(l),r=r.addOrSubtract(o)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){const t=this.field.log(n);0===t?e+="1":1===t?e+="a":(e+="a^",e+=t)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}class J extends c{}J.kind="ArithmeticException";class ee extends K{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let a=1;for(let i=0;i<t;i++)r[i]=a,a*=2,a>=t&&(a^=e,a&=t-1);this.expTable=r;const s=new Int32Array(t);for(let i=0;i<t-1;i++)s[r[i]]=i;this.logTable=s,this.zero=new $(this,Int32Array.from([0])),this.one=new $(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new d;if(0===t)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new $(this,n)}inverse(e){if(0===e)throw new J;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+w.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ee.AZTEC_DATA_12=new ee(4201,4096,1),ee.AZTEC_DATA_10=new ee(1033,1024,1),ee.AZTEC_DATA_6=new ee(67,64,1),ee.AZTEC_PARAM=new ee(19,16,1),ee.QR_CODE_FIELD_256=new ee(285,256,0),ee.DATA_MATRIX_FIELD_256=new ee(301,256,1),ee.AZTEC_DATA_8=ee.DATA_MATRIX_FIELD_256,ee.MAXICODE_FIELD_64=ee.AZTEC_DATA_6;class te extends c{}te.kind="ReedSolomonException";class ne extends c{}ne.kind="IllegalStateException";class re{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new $(n,e),a=new Int32Array(t);let s=!0;for(let h=0;h<t;h++){const e=r.evaluateAt(n.exp(h+n.getGeneratorBase()));a[a.length-1-h]=e,0!==e&&(s=!1)}if(s)return;const i=new $(n,a),o=this.runEuclideanAlgorithm(n.buildMonomial(t,1),i,t),l=o[0],c=o[1],u=this.findErrorLocations(l),d=this.findErrorMagnitudes(c,u);for(let h=0;h<u.length;h++){const t=e.length-1-n.log(u[h]);if(t<0)throw new te("Bad error location");e[t]=ee.addOrSubtract(e[t],d[h])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const n=e;e=t,t=n}const r=this.field;let a=e,s=t,i=r.getZero(),o=r.getOne();for(;s.getDegree()>=(n/2|0);){let e=a,t=i;if(a=s,i=o,a.isZero())throw new te("r_{i-1} was zero");s=e;let n=r.getZero();const l=a.getCoefficient(a.getDegree()),c=r.inverse(l);for(;s.getDegree()>=a.getDegree()&&!s.isZero();){const e=s.getDegree()-a.getDegree(),t=r.multiply(s.getCoefficient(s.getDegree()),c);n=n.addOrSubtract(r.buildMonomial(e,t)),s=s.addOrSubtract(a.multiplyByMonomial(e,t))}if(o=n.multiply(i).addOrSubtract(t),s.getDegree()>=a.getDegree())throw new ne("Division algorithm failed to reduce polynomial?")}const l=o.getCoefficient(0);if(0===l)throw new te("sigmaTilde(0) was zero");const c=r.inverse(l);return[o.multiplyScalar(c),s.multiplyScalar(c)]}findErrorLocations(e){const t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const a=this.field;for(let s=1;s<a.getSize()&&r<t;s++)0===e.evaluateAt(s)&&(n[r]=a.inverse(s),r++);if(r!==t)throw new te("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),a=this.field;for(let s=0;s<n;s++){const i=a.inverse(t[s]);let o=1;for(let e=0;e<n;e++)if(s!==e){const n=a.multiply(t[e],i),r=0===(1&n)?1|n:-2&n;o=a.multiply(o,r)}r[s]=a.multiply(e.evaluateAt(i),a.inverse(o)),0!==a.getGeneratorBase()&&(r[s]=a.multiply(r[s],i))}return r}}!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(V||(V={}));class ae{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),a=ae.convertBoolArrayToByteArray(r),s=ae.getEncodedData(r),i=new Z(a,s,null,null);return i.setNumBits(r.length),i}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=V.UPPER,r=V.UPPER,a="",s=0;for(;s<t;)if(r===V.BINARY){if(t-s<5)break;let i=ae.readCode(e,s,5);if(s+=5,0===i){if(t-s<11)break;i=ae.readCode(e,s,11)+31,s+=11}for(let n=0;n<i;n++){if(t-s<8){s=t;break}const n=ae.readCode(e,s,8);a+=I.castAsNonUtf8Char(n),s+=8}r=n}else{let i=r===V.DIGIT?4:5;if(t-s<i)break;let o=ae.readCode(e,s,i);s+=i;let l=ae.getCharacter(r,o);l.startsWith("CTRL_")?(n=r,r=ae.getTable(l.charAt(5)),"L"===l.charAt(6)&&(n=r)):(a+=l,r=n)}return a}static getTable(e){switch(e){case"L":return V.LOWER;case"P":return V.PUNCT;case"M":return V.MIXED;case"D":return V.DIGIT;case"B":return V.BINARY;default:return V.UPPER}}static getCharacter(e,t){switch(e){case V.UPPER:return ae.UPPER_TABLE[t];case V.LOWER:return ae.LOWER_TABLE[t];case V.MIXED:return ae.MIXED_TABLE[t];case V.PUNCT:return ae.PUNCT_TABLE[t];case V.DIGIT:return ae.DIGIT_TABLE[t];default:throw new ne("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=ee.AZTEC_DATA_10):(n=12,t=ee.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),a=e.length/n;if(a<r)throw new b;let s=e.length%n,i=new Int32Array(a);for(let h=0;h<a;h++,s+=n)i[h]=ae.readCode(e,s,n);try{new re(t).decode(i,a-r)}catch(d){throw new b(d)}let o=(1<<n)-1,l=0;for(let h=0;h<r;h++){let e=i[h];if(0===e||e===o)throw new b;1!==e&&e!==o-1||l++}let c=new Array(r*n-l),u=0;for(let h=0;h<r;h++){let e=i[h];if(1===e||e===o-1)c.fill(e>1,u,u+n-1),u+=n-1;else for(let t=n-1;t>=0;--t)c[u++]=0!==(e&1<<t)}return c}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,a=new Int32Array(r),s=new Array(this.totalBitsInLayer(n,t));if(t)for(let i=0;i<a.length;i++)a[i]=i;else{let e=r+1+2*w.truncDivision(w.truncDivision(r,2)-1,15),t=r/2,n=w.truncDivision(e,2);for(let r=0;r<t;r++){let e=r+w.truncDivision(r,15);a[t-r-1]=n-e-1,a[t+r]=n+e+1}}for(let i=0,o=0;i<n;i++){let l=4*(n-i)+(t?9:12),c=2*i,u=r-1-c;for(let t=0;t<l;t++){let n=2*t;for(let r=0;r<2;r++)s[o+n+r]=e.get(a[c+r],a[c+t]),s[o+2*l+n+r]=e.get(a[c+t],a[u-r]),s[o+4*l+n+r]=e.get(a[u-r],a[u-t]),s[o+6*l+n+r]=e.get(a[u-t],a[c+r])}o+=8*l}return s}static readCode(e,t,n){let r=0;for(let a=t;a<t+n;a++)r<<=1,e[a]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?ae.readCode(e,t,8):ae.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=ae.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ae.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ae.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ae.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ae.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ae.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class se{constructor(){}static round(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const a=e-n,s=t-r;return Math.sqrt(a*a+s*s)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++)t+=e[n];return t}}class ie{static floatToIntBits(e){return e}}ie.MAX_VALUE=Number.MAX_SAFE_INTEGER;class oe{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof oe){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*ie.floatToIntBits(this.x)+ie.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let a,s,i;if(n>=t&&n>=r?(s=e[0],a=e[1],i=e[2]):r>=n&&r>=t?(s=e[1],a=e[0],i=e[2]):(s=e[2],a=e[0],i=e[1]),this.crossProductZ(a,s,i)<0){const e=a;a=i,i=e}e[0]=a,e[1]=s,e[2]=i}static distance(e,t){return se.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,a=t.y;return(n.x-r)*(e.y-a)-(n.y-a)*(e.x-r)}}class le{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ce extends le{constructor(e,t,n,r,a){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=a}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ue{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),void 0!==t&&null!==t||(t=ue.INIT_SIZE),void 0!==n&&null!==n||(n=e.getWidth()/2|0),void 0!==r&&null!==r||(r=e.getHeight()/2|0);const a=t/2|0;if(this.leftInit=n-a,this.rightInit=n+a,this.upInit=r-a,this.downInit=r+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new j}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,a=!1,s=!0,i=!1,o=!1,l=!1,c=!1,u=!1;const d=this.width,h=this.height;for(;s;){s=!1;let f=!0;for(;(f||!o)&&t<d;)f=this.containsBlackPoint(n,r,t,!1),f?(t++,s=!0,o=!0):o||t++;if(t>=d){a=!0;break}let m=!0;for(;(m||!l)&&r<h;)m=this.containsBlackPoint(e,t,r,!0),m?(r++,s=!0,l=!0):l||r++;if(r>=h){a=!0;break}let g=!0;for(;(g||!c)&&e>=0;)g=this.containsBlackPoint(n,r,e,!1),g?(e--,s=!0,c=!0):c||e--;if(e<0){a=!0;break}let p=!0;for(;(p||!u)&&n>=0;)p=this.containsBlackPoint(e,t,n,!0),p?(n--,s=!0,u=!0):u||n--;if(n<0){a=!0;break}s&&(i=!0)}if(!a&&i){const a=t-e;let s=null;for(let t=1;null===s&&t<a;t++)s=this.getBlackPointOnSegment(e,r-t,e+t,r);if(null==s)throw new j;let i=null;for(let t=1;null===i&&t<a;t++)i=this.getBlackPointOnSegment(e,n+t,e+t,n);if(null==i)throw new j;let o=null;for(let e=1;null===o&&e<a;e++)o=this.getBlackPointOnSegment(t,n+e,t-e,n);if(null==o)throw new j;let l=null;for(let e=1;null===l&&e<a;e++)l=this.getBlackPointOnSegment(t,r-e,t-e,r);if(null==l)throw new j;return this.centerEdges(l,s,o,i)}throw new j}getBlackPointOnSegment(e,t,n,r){const a=se.round(se.distance(e,t,n,r)),s=(n-e)/a,i=(r-t)/a,o=this.image;for(let l=0;l<a;l++){const n=se.round(e+l*s),r=se.round(t+l*i);if(o.get(n,r))return new oe(n,r)}return null}centerEdges(e,t,n,r){const a=e.getX(),s=e.getY(),i=t.getX(),o=t.getY(),l=n.getX(),c=n.getY(),u=r.getX(),d=r.getY(),h=ue.CORR;return a<this.width/2?[new oe(u-h,d+h),new oe(i+h,o+h),new oe(l-h,c-h),new oe(a+h,s-h)]:[new oe(u+h,d+h),new oe(i+h,o-h),new oe(l-h,c+h),new oe(a-h,s-h)]}containsBlackPoint(e,t,n,r){const a=this.image;if(r){for(let s=e;s<=t;s++)if(a.get(s,n))return!0}else for(let s=e;s<=t;s++)if(a.get(n,s))return!0;return!1}}ue.INIT_SIZE=10,ue.CORR=1;class de{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let a=!0;for(let s=0;s<t.length&&a;s+=2){const e=Math.floor(t[s]),i=Math.floor(t[s+1]);if(e<-1||e>n||i<-1||i>r)throw new j;a=!1,-1===e?(t[s]=0,a=!0):e===n&&(t[s]=n-1,a=!0),-1===i?(t[s+1]=0,a=!0):i===r&&(t[s+1]=r-1,a=!0)}a=!0;for(let s=t.length-2;s>=0&&a;s-=2){const e=Math.floor(t[s]),i=Math.floor(t[s+1]);if(e<-1||e>n||i<-1||i>r)throw new j;a=!1,-1===e?(t[s]=0,a=!0):e===n&&(t[s]=n-1,a=!0),-1===i?(t[s+1]=0,a=!0):i===r&&(t[s+1]=r-1,a=!0)}}}class he{constructor(e,t,n,r,a,s,i,o,l){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=a,this.a32=s,this.a13=i,this.a23=o,this.a33=l}static quadrilateralToQuadrilateral(e,t,n,r,a,s,i,o,l,c,u,d,h,f,m,g){const p=he.quadrilateralToSquare(e,t,n,r,a,s,i,o);return he.squareToQuadrilateral(l,c,u,d,h,f,m,g).times(p)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,a=this.a13,s=this.a21,i=this.a22,o=this.a23,l=this.a31,c=this.a32,u=this.a33;for(let d=0;d<t;d+=2){const t=e[d],h=e[d+1],f=a*t+o*h+u;e[d]=(n*t+s*h+l)/f,e[d+1]=(r*t+i*h+c)/f}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,a=this.a13,s=this.a21,i=this.a22,o=this.a23,l=this.a31,c=this.a32,u=this.a33,d=e.length;for(let h=0;h<d;h++){const d=e[h],f=t[h],m=a*d+o*f+u;e[h]=(n*d+s*f+l)/m,t[h]=(r*d+i*f+c)/m}}static squareToQuadrilateral(e,t,n,r,a,s,i,o){const l=e-n+a-i,c=t-r+s-o;if(0===l&&0===c)return new he(n-e,a-n,e,r-t,s-r,t,0,0,1);{const u=n-a,d=i-a,h=r-s,f=o-s,m=u*f-d*h,g=(l*f-d*c)/m,p=(u*c-l*h)/m;return new he(n-e+g*n,i-e+p*i,e,r-t+g*r,o-t+p*o,t,g,p,1)}}static quadrilateralToSquare(e,t,n,r,a,s,i,o){return he.squareToQuadrilateral(e,t,n,r,a,s,i,o).buildAdjoint()}buildAdjoint(){return new he(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new he(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class fe extends de{sampleGrid(e,t,n,r,a,s,i,o,l,c,u,d,h,f,m,g,p,y,v){const w=he.quadrilateralToQuadrilateral(r,a,s,i,o,l,c,u,d,h,f,m,g,p,y,v);return this.sampleGridWithTransform(e,t,n,w)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new j;const a=new _(t,n),s=new Float32Array(2*t);for(let o=0;o<n;o++){const t=s.length,n=o+.5;for(let e=0;e<t;e+=2)s[e]=e/2+.5,s[e+1]=n;r.transformPoints(s),de.checkAndNudgePoints(e,s);try{for(let n=0;n<t;n+=2)e.get(Math.floor(s[n]),Math.floor(s[n+1]))&&a.set(n/2,o)}catch(i){throw new j}}return a}}class me{static setGridSampler(e){me.gridSampler=e}static getInstance(){return me.gridSampler}}me.gridSampler=new fe;class ge{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new oe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class pe{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let e=n[0];n[0]=n[2],n[2]=e}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),a=this.getMatrixCornerPoints(n);return new ce(r,a,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new j;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let s=0;s<4;s++){let e=n[(this.shift+s)%4];this.compact?(r<<=7,r+=e>>1&127):(r<<=10,r+=(e>>2&992)+(e>>1&31))}let a=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(a>>6),this.nbDataBlocks=1+(63&a)):(this.nbLayers=1+(a>>11),this.nbDataBlocks=1+(2047&a))}getRotation(e,t){let n=0;e.forEach((e,r,a)=>{n=(e>>t-2<<1)+(1&e)+(n<<3)}),n=((1&n)<<11)+(n>>1);for(let r=0;r<4;r++)if(w.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new j}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let a=n-r,s=new Int32Array(n);for(let l=n-1;l>=0;--l)s[l]=15&e,e>>=4;try{new re(ee.AZTEC_PARAM).decode(s,a)}catch(o){throw new j}let i=0;for(let l=0;l<r;l++)i=(i<<4)+s[l];return i}getBullsEyeCorners(e){let t=e,n=e,r=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let e=this.getFirstDifferent(t,s,1,-1),i=this.getFirstDifferent(n,s,1,1),o=this.getFirstDifferent(r,s,-1,1),l=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){let n=this.distancePoint(l,e)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(n<.75||n>1.25||!this.isWhiteOrBlackRectangle(e,i,o,l))break}t=e,n=i,r=o,a=l,s=!s}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new j;this.compact=5===this.nbCenterLayers;let i=new oe(t.getX()+.5,t.getY()-.5),o=new oe(n.getX()+.5,n.getY()+.5),l=new oe(r.getX()-.5,r.getY()+.5),c=new oe(a.getX()-.5,a.getY()-.5);return this.expandSquare([i,o,l,c],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let a=new ue(this.image).detect();e=a[0],t=a[1],n=a[2],r=a[3]}catch(i){let a=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new ge(a+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ge(a+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ge(a-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ge(a-7,s-7),!1,-1,-1).toResultPoint()}let a=se.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=se.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let i=new ue(this.image,15,a,s).detect();e=i[0],t=i[1],n=i[2],r=i[3]}catch(i){e=this.getFirstDifferent(new ge(a+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ge(a+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ge(a-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ge(a-7,s-7),!1,-1,-1).toResultPoint()}return a=se.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=se.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new ge(a,s)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,a){let s=me.getInstance(),i=this.getDimension(),o=i/2-this.nbCenterLayers,l=i/2+this.nbCenterLayers;return s.sampleGrid(e,i,i,o,o,l,o,l,l,o,l,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),a.getX(),a.getY())}sampleLine(e,t,n){let r=0,a=this.distanceResultPoint(e,t),s=a/n,i=e.getX(),o=e.getY(),l=s*(t.getX()-e.getX())/a,c=s*(t.getY()-e.getY())/a;for(let u=0;u<n;u++)this.image.get(se.round(i+u*l),se.round(o+u*c))&&(r|=1<<n-u-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let a=3;e=new ge(e.getX()-a,e.getY()+a),t=new ge(t.getX()-a,t.getY()-a),n=new ge(n.getX()+a,n.getY()-a),r=new ge(r.getX()+a,r.getY()+a);let s=this.getColor(r,e);if(0===s)return!1;let i=this.getColor(e,t);return i===s&&(i=this.getColor(t,n),i===s&&(i=this.getColor(n,r),i===s))}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,a=(t.getY()-e.getY())/n,s=0,i=e.getX(),o=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(n);for(let d=0;d<c;d++)i+=r,o+=a,this.image.get(se.round(i),se.round(o))!==l&&s++;let u=s/n;return u>.1&&u<.9?0:u<=.1===l?1:-1}getFirstDifferent(e,t,n,r){let a=e.getX()+n,s=e.getY()+r;for(;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=n,s+=r;for(a-=n,s-=r;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=n;for(a-=n;this.isValid(a,s)&&this.image.get(a,s)===t;)s+=r;return s-=r,new ge(a,s)}expandSquare(e,t,n){let r=n/(2*t),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),i=(e[0].getX()+e[2].getX())/2,o=(e[0].getY()+e[2].getY())/2,l=new oe(i+r*a,o+r*s),c=new oe(i-r*a,o-r*s);return a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),i=(e[1].getX()+e[3].getX())/2,o=(e[1].getY()+e[3].getY())/2,[l,new oe(i+r*a,o+r*s),c,new oe(i-r*a,o-r*s)]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=se.round(e.getX()),n=se.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return se.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return se.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(w.truncDivision(this.nbLayers-4,8)+1)+15}}class ye{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null,r=new pe(e.getBlackMatrix()),a=null,s=null;try{let e=r.detectMirror(!1);a=e.getPoints(),this.reportFoundResultPoints(t,a),s=(new ae).decode(e)}catch(c){n=c}if(null==s)try{let e=r.detectMirror(!0);a=e.getPoints(),this.reportFoundResultPoints(t,a),s=(new ae).decode(e)}catch(c){if(null!=n)throw n;throw c}let i=new U(s.getText(),s.getRawBytes(),s.getNumBits(),a,H.AZTEC,g.currentTimeMillis()),o=s.getByteSegments();null!=o&&i.putMetadata(q.BYTE_SEGMENTS,o);let l=s.getECLevel();return null!=l&&i.putMetadata(q.ERROR_CORRECTION_LEVEL,l),i}reportFoundResultPoints(e,t){if(null!=e){let n=e.get(C.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach((e,t,r)=>{n.foundPossibleResultPoint(e)})}}reset(){}}class ve extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new ye,e)}}class we{decode(e,t){try{return this.doDecode(e,t)}catch(n){if(t&&!0===t.get(C.TRY_HARDER)&&e.isRotateSupported()){const n=e.rotateCounterClockwise(),r=this.doDecode(n,t),a=r.getResultMetadata();let s=270;null!==a&&!0===a.get(q.ORIENTATION)&&(s+=a.get(q.ORIENTATION)%360),r.putMetadata(q.ORIENTATION,s);const i=r.getResultPoints();if(null!==i){const e=n.getHeight();for(let t=0;t<i.length;t++)i[t]=new oe(e-i[t].getY()-1,i[t].getX())}return r}throw new j}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let a=new S(n);const s=t&&!0===t.get(C.TRY_HARDER),i=Math.max(1,r>>(s?8:5));let o;o=s?r:15;const l=Math.trunc(r/2);for(let d=0;d<o;d++){const s=Math.trunc((d+1)/2),o=l+i*(0===(1&d)?s:-s);if(o<0||o>=r)break;try{a=e.getBlackRow(o,a)}catch(c){continue}for(let e=0;e<2;e++){if(1===e&&(a.reverse(),t&&!0===t.get(C.NEED_RESULT_POINT_CALLBACK))){const e=new Map;t.forEach((t,n)=>e.set(n,t)),e.delete(C.NEED_RESULT_POINT_CALLBACK),t=e}try{const r=this.decodeRow(o,a,t);if(1===e){r.putMetadata(q.ORIENTATION,180);const e=r.getResultPoints();null!==e&&(e[0]=new oe(n-e[0].getX()-1,e[0].getY()),e[1]=new oe(n-e[1].getX()-1,e[1].getY()))}return r}catch(u){}}}throw new j}static recordPattern(e,t,n){const r=n.length;for(let l=0;l<r;l++)n[l]=0;const a=e.getSize();if(t>=a)throw new j;let s=!e.get(t),i=0,o=t;for(;o<a;){if(e.get(o)!==s)n[i]++;else{if(++i===r)break;n[i]=1,s=!s}o++}if(i!==r&&(i!==r-1||o!==a))throw new j}static recordPatternInReverse(e,t,n){let r=n.length,a=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==a&&(r--,a=!a);if(r>=0)throw new j;we.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let a=0,s=0;for(let l=0;l<r;l++)a+=e[l],s+=t[l];if(a<s)return Number.POSITIVE_INFINITY;const i=a/s;n*=i;let o=0;for(let l=0;l<r;l++){const r=e[l],a=t[l]*i,s=r>a?r-a:a-r;if(s>n)return Number.POSITIVE_INFINITY;o+=s}return o/a}}class Se extends we{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,a=Int32Array.from([0,0,0,0,0,0]),s=n,i=!1;const o=6;for(let l=n;l<t;l++)if(e.get(l)!==i)a[r]++;else{if(r===o-1){let t=Se.MAX_AVG_VARIANCE,n=-1;for(let e=Se.CODE_START_A;e<=Se.CODE_START_C;e++){const r=we.patternMatchVariance(a,Se.CODE_PATTERNS[e],Se.MAX_INDIVIDUAL_VARIANCE);r<t&&(t=r,n=e)}if(n>=0&&e.isRange(Math.max(0,s-(l-s)/2),s,!1))return Int32Array.from([s,l,n]);s+=a[0]+a[1],a=a.slice(2,a.length-1),a[r-1]=0,a[r]=0,r--}else r++;a[r]=1,i=!i}throw new j}static decodeCode(e,t,n){we.recordPattern(e,n,t);let r=Se.MAX_AVG_VARIANCE,a=-1;for(let s=0;s<Se.CODE_PATTERNS.length;s++){const e=Se.CODE_PATTERNS[s],n=this.patternMatchVariance(t,e,Se.MAX_INDIVIDUAL_VARIANCE);n<r&&(r=n,a=s)}if(a>=0)return a;throw new j}decodeRow(e,t,n){const r=n&&!0===n.get(C.ASSUME_GS1),a=Se.findStartPattern(t),s=a[2];let i=0;const o=new Uint8Array(20);let l;switch(o[i++]=s,s){case Se.CODE_START_A:l=Se.CODE_CODE_A;break;case Se.CODE_START_B:l=Se.CODE_CODE_B;break;case Se.CODE_START_C:l=Se.CODE_CODE_C;break;default:throw new b}let c=!1,u=!1,d="",h=a[0],m=a[1];const g=Int32Array.from([0,0,0,0,0,0]);let p=0,y=0,v=s,w=0,S=!0,N=!1,E=!1;for(;!c;){const e=u;switch(u=!1,p=y,y=Se.decodeCode(t,g,m),o[i++]=y,y!==Se.CODE_STOP&&(S=!0),y!==Se.CODE_STOP&&(w++,v+=w*y),h=m,m+=g.reduce((e,t)=>e+t,0),y){case Se.CODE_START_A:case Se.CODE_START_B:case Se.CODE_START_C:throw new b}switch(l){case Se.CODE_CODE_A:if(y<64)d+=E===N?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),E=!1;else if(y<96)d+=E===N?String.fromCharCode(y-64):String.fromCharCode(y+64),E=!1;else switch(y!==Se.CODE_STOP&&(S=!1),y){case Se.CODE_FNC_1:r&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case Se.CODE_FNC_2:case Se.CODE_FNC_3:break;case Se.CODE_FNC_4_A:!N&&E?(N=!0,E=!1):N&&E?(N=!1,E=!1):E=!0;break;case Se.CODE_SHIFT:u=!0,l=Se.CODE_CODE_B;break;case Se.CODE_CODE_B:l=Se.CODE_CODE_B;break;case Se.CODE_CODE_C:l=Se.CODE_CODE_C;break;case Se.CODE_STOP:c=!0}break;case Se.CODE_CODE_B:if(y<96)d+=E===N?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),E=!1;else switch(y!==Se.CODE_STOP&&(S=!1),y){case Se.CODE_FNC_1:r&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case Se.CODE_FNC_2:case Se.CODE_FNC_3:break;case Se.CODE_FNC_4_B:!N&&E?(N=!0,E=!1):N&&E?(N=!1,E=!1):E=!0;break;case Se.CODE_SHIFT:u=!0,l=Se.CODE_CODE_A;break;case Se.CODE_CODE_A:l=Se.CODE_CODE_A;break;case Se.CODE_CODE_C:l=Se.CODE_CODE_C;break;case Se.CODE_STOP:c=!0}break;case Se.CODE_CODE_C:if(y<100)y<10&&(d+="0"),d+=y;else switch(y!==Se.CODE_STOP&&(S=!1),y){case Se.CODE_FNC_1:r&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case Se.CODE_CODE_A:l=Se.CODE_CODE_A;break;case Se.CODE_CODE_B:l=Se.CODE_CODE_B;break;case Se.CODE_STOP:c=!0}}e&&(l=l===Se.CODE_CODE_A?Se.CODE_CODE_B:Se.CODE_CODE_A)}const A=m-h;if(m=t.getNextUnset(m),!t.isRange(m,Math.min(t.getSize(),m+(m-h)/2),!1))throw new j;if(v-=w*p,v%103!==p)throw new f;const x=d.length;if(0===x)throw new j;x>0&&S&&(d=l===Se.CODE_CODE_C?d.substring(0,x-2):d.substring(0,x-1));const I=(a[1]+a[0])/2,T=h+A/2,_=o.length,R=new Uint8Array(_);for(let f=0;f<_;f++)R[f]=o[f];const D=[new oe(I,e),new oe(T,e)];return new U(d,R,0,D,H.CODE_128,(new Date).getTime())}}Se.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Se.MAX_AVG_VARIANCE=.25,Se.MAX_INDIVIDUAL_VARIANCE=.7,Se.CODE_SHIFT=98,Se.CODE_CODE_C=99,Se.CODE_CODE_B=100,Se.CODE_CODE_A=101,Se.CODE_FNC_1=102,Se.CODE_FNC_2=97,Se.CODE_FNC_3=96,Se.CODE_FNC_4_A=101,Se.CODE_FNC_4_B=100,Se.CODE_START_A=103,Se.CODE_START_B=104,Se.CODE_START_C=105,Se.CODE_STOP=106;class Ne extends we{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let a,s,i=Ne.findAsteriskPattern(t,r),o=t.getNextSet(i[1]),l=t.getSize();do{Ne.recordPattern(t,o,r);let e=Ne.toNarrowWidePattern(r);if(e<0)throw new j;a=Ne.patternToChar(e),this.decodeRowResult+=a,s=o;for(let t of r)o+=t;o=t.getNextSet(o)}while("*"!==a);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let c,u=0;for(let f of r)u+=f;if(o!==l&&2*(o-s-u)<u)throw new j;if(this.usingCheckDigit){let e=this.decodeRowResult.length-1,t=0;for(let n=0;n<e;n++)t+=Ne.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(n));if(this.decodeRowResult.charAt(e)!==Ne.ALPHABET_STRING.charAt(t%43))throw new f;this.decodeRowResult=this.decodeRowResult.substring(0,e)}if(0===this.decodeRowResult.length)throw new j;c=this.extendedMode?Ne.decodeExtended(this.decodeRowResult):this.decodeRowResult;let d=(i[1]+i[0])/2,h=s+u/2;return new U(c,null,0,[new oe(d,e),new oe(h,e)],H.CODE_39,(new Date).getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),a=0,s=r,i=!1,o=t.length;for(let l=r;l<n;l++)if(e.get(l)!==i)t[a]++;else{if(a===o-1){if(this.toNarrowWidePattern(t)===Ne.ASTERISK_ENCODING&&e.isRange(Math.max(0,s-Math.floor((l-s)/2)),s,!1))return[s,l];s+=t[0]+t[1],t.copyWithin(0,2,2+a-1),t[a-1]=0,t[a]=0,a--}else a++;t[a]=1,i=!i}throw new j}static toNarrowWidePattern(e){let t,n=e.length,r=0;do{let a=2147483647;for(let t of e)t<a&&t>r&&(a=t);r=a,t=0;let s=0,i=0;for(let o=0;o<n;o++){let a=e[o];a>r&&(i|=1<<n-1-o,t++,s+=a)}if(3===t){for(let a=0;a<n&&t>0;a++){let n=e[a];if(n>r&&(t--,2*n>=s))return-1}return i}}while(t>3);return-1}static patternToChar(e){for(let t=0;t<Ne.CHARACTER_ENCODINGS.length;t++)if(Ne.CHARACTER_ENCODINGS[t]===e)return Ne.ALPHABET_STRING.charAt(t);if(e===Ne.ASTERISK_ENCODING)return"*";throw new j}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let t=e.charAt(r);if("+"===t||"$"===t||"%"===t||"/"===t){let a=e.charAt(r+1),s="\0";switch(t){case"+":if(!(a>="A"&&a<="Z"))throw new b;s=String.fromCharCode(a.charCodeAt(0)+32);break;case"$":if(!(a>="A"&&a<="Z"))throw new b;s=String.fromCharCode(a.charCodeAt(0)-64);break;case"%":if(a>="A"&&a<="E")s=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")s=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")s=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")s=String.fromCharCode(a.charCodeAt(0)+43);else if("U"===a)s="\0";else if("V"===a)s="@";else if("W"===a)s="`";else{if("X"!==a&&"Y"!==a&&"Z"!==a)throw new b;s="\x7f"}break;case"/":if(a>="A"&&a<="O")s=String.fromCharCode(a.charCodeAt(0)-32);else{if("Z"!==a)throw new b;s=":"}}n+=s,r++}else n+=t}return n}}Ne.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Ne.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Ne.ASTERISK_ENCODING=148;class Ce extends we{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),a=this.decodeEnd(t),s=new T;Ce.decodeMiddle(t,r[1],a[0],s);let i=s.toString(),o=null;null!=n&&(o=n.get(C.ALLOWED_LENGTHS)),null==o&&(o=Ce.DEFAULT_ALLOWED_LENGTHS);let l=i.length,c=!1,u=0;for(let h of o){if(l===h){c=!0;break}h>u&&(u=h)}if(!c&&l>u&&(c=!0),!c)throw new b;const d=[new oe(r[1],e),new oe(a[0],e)];return new U(i,null,0,d,H.ITF,(new Date).getTime())}static decodeMiddle(e,t,n,r){let a=new Int32Array(10),s=new Int32Array(5),i=new Int32Array(5);for(a.fill(0),s.fill(0),i.fill(0);t<n;){we.recordPattern(e,t,a);for(let e=0;e<5;e++){let t=2*e;s[e]=a[t],i[e]=a[t+1]}let n=Ce.decodeDigit(s);r.append(n.toString()),n=this.decodeDigit(i),r.append(n.toString()),a.forEach(function(e){t+=e})}}decodeStart(e){let t=Ce.skipWhiteSpace(e),n=Ce.findGuardPattern(e,t,Ce.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=10*this.narrowLineWidth;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new j}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new j;return n}decodeEnd(e){e.reverse();try{let n,r=Ce.skipWhiteSpace(e);try{n=Ce.findGuardPattern(e,r,Ce.END_PATTERN_REVERSED[0])}catch(t){t instanceof j&&(n=Ce.findGuardPattern(e,r,Ce.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let a=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-a,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,a=new Int32Array(r),s=e.getSize(),i=!1,o=0,l=t;a.fill(0);for(let c=t;c<s;c++)if(e.get(c)!==i)a[o]++;else{if(o===r-1){if(we.patternMatchVariance(a,n,Ce.MAX_INDIVIDUAL_VARIANCE)<Ce.MAX_AVG_VARIANCE)return[l,c];l+=a[0]+a[1],g.arraycopy(a,2,a,0,o-1),a[o-1]=0,a[o]=0,o--}else o++;a[o]=1,i=!i}throw new j}static decodeDigit(e){let t=Ce.MAX_AVG_VARIANCE,n=-1,r=Ce.PATTERNS.length;for(let a=0;a<r;a++){let r=Ce.PATTERNS[a],s=we.patternMatchVariance(e,r,Ce.MAX_INDIVIDUAL_VARIANCE);s<t?(t=s,n=a):s===t&&(n=-1)}if(n>=0)return n%10;throw new j}}Ce.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ce.MAX_AVG_VARIANCE=.38,Ce.MAX_INDIVIDUAL_VARIANCE=.5,Ce.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ce.START_PATTERN=Int32Array.from([1,1,1,1]),Ce.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class be extends we{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t,n=!1,r=0,a=Int32Array.from([0,0,0]);for(;!n;){a=Int32Array.from([0,0,0]),t=be.findGuardPattern(e,r,!1,this.START_END_PATTERN,a);let s=t[0];r=t[1];let i=s-(r-s);i>=0&&(n=e.isRange(i,s,!1))}return t}static checkChecksum(e){return be.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return be.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new b;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new b;n+=t}return(1e3-n)%10}static decodeEnd(e,t){return be.findGuardPattern(e,t,!1,be.START_END_PATTERN,new Int32Array(be.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,a){let s=e.getSize(),i=0,o=t=n?e.getNextUnset(t):e.getNextSet(t),l=r.length,c=n;for(let u=t;u<s;u++)if(e.get(u)!==c)a[i]++;else{if(i===l-1){if(we.patternMatchVariance(a,r,be.MAX_INDIVIDUAL_VARIANCE)<be.MAX_AVG_VARIANCE)return Int32Array.from([o,u]);o+=a[0]+a[1];let e=a.slice(2,a.length-1);for(let t=0;t<i-1;t++)a[t]=e[t];a[i-1]=0,a[i]=0,i--}else i++;a[i]=1,c=!c}throw new j}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let a=this.MAX_AVG_VARIANCE,s=-1,i=r.length;for(let o=0;o<i;o++){let e=r[o],n=we.patternMatchVariance(t,e,be.MAX_INDIVIDUAL_VARIANCE);n<a&&(a=n,s=o)}if(s>=0)return s;throw new j}}be.MAX_AVG_VARIANCE=.48,be.MAX_INDIVIDUAL_VARIANCE=.7,be.START_END_PATTERN=Int32Array.from([1,1,1]),be.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),be.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),be.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ee{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,a=this.decodeMiddle(t,n,r),s=r.toString(),i=Ee.parseExtensionString(s),o=[new oe((n[0]+n[1])/2,e),new oe(a,e)],l=new U(s,null,0,o,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=i&&l.putAllMetadata(i),l}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let a=e.getSize(),s=t[1],i=0;for(let l=0;l<5&&s<a;l++){let t=be.decodeDigit(e,r,s,be.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)s+=e;t>=10&&(i|=1<<4-l),4!==l&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(5!==n.length)throw new j;let o=this.determineCheckDigit(i);if(Ee.extensionChecksum(n.toString())!==o)throw new j;return s}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new j}static parseExtensionString(e){if(5!==e.length)return null;let t=Ee.parseExtension5String(e);return null==t?null:new Map([[q.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let n=parseInt(e.substring(1)),r=n%100;return t+(n/100).toString()+"."+(r<10?"0"+r:r.toString())}}class Ae{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,a=this.decodeMiddle(t,n,r),s=r.toString(),i=Ae.parseExtensionString(s),o=[new oe((n[0]+n[1])/2,e),new oe(a,e)],l=new U(s,null,0,o,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=i&&l.putAllMetadata(i),l}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let a=e.getSize(),s=t[1],i=0;for(let o=0;o<2&&s<a;o++){let t=be.decodeDigit(e,r,s,be.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)s+=e;t>=10&&(i|=1<<1-o),1!==o&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(2!==n.length)throw new j;if(parseInt(n.toString())%4!==i)throw new j;return s}static parseExtensionString(e){return 2!==e.length?null:new Map([[q.ISSUE_NUMBER,parseInt(e)]])}}class xe{static decodeRow(e,t,n){let r=be.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Ee).decodeRow(e,t,r)}catch(a){return(new Ae).decodeRow(e,t,r)}}}xe.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ie extends be{constructor(){super(),this.decodeRowStringBuffer="",Ie.L_AND_G_PATTERNS=Ie.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Ie.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[t.length-e-1];Ie.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=Ie.findStartGuardPattern(t),a=null==n?null:n.get(C.NEED_RESULT_POINT_CALLBACK);if(null!=a){const t=new oe((r[0]+r[1])/2,e);a.foundPossibleResultPoint(t)}let s=this.decodeMiddle(t,r,this.decodeRowStringBuffer),i=s.rowOffset,o=s.resultString;if(null!=a){const t=new oe(i,e);a.foundPossibleResultPoint(t)}let l=this.decodeEnd(t,i);if(null!=a){const t=new oe((l[0]+l[1])/2,e);a.foundPossibleResultPoint(t)}let c=l[1],u=c+(c-l[0]);if(u>=t.getSize()||!t.isRange(c,u,!1))throw new j;let d=o.toString();if(d.length<8)throw new b;if(!Ie.checkChecksum(d))throw new f;let h=(r[1]+r[0])/2,m=(l[1]+l[0])/2,g=this.getBarcodeFormat(),p=[new oe(h,e),new oe(m,e)],y=new U(d,null,0,p,g,(new Date).getTime()),v=0;try{let n=xe.decodeRow(e,t,l[1]);y.putMetadata(q.UPC_EAN_EXTENSION,n.getText()),y.putAllMetadata(n.getResultMetadata()),y.addResultPoints(n.getResultPoints()),v=n.getText().length}catch(S){}let w=null==n?null:n.get(C.ALLOWED_EAN_EXTENSIONS);if(null!=w){let e=!1;for(let t in w)if(v.toString()===t){e=!0;break}if(!e)throw new j}return y}decodeEnd(e,t){return Ie.findGuardPattern(e,t,!1,Ie.START_END_PATTERN,new Int32Array(Ie.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Ie.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Ie.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new b;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new b;n+=t}return(1e3-n)%10}}class Te extends Ie{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let a=e.getSize(),s=t[1],i=0;for(let o=0;o<6&&s<a;o++){let t=Ie.decodeDigit(e,r,s,Ie.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)s+=e;t>=10&&(i|=1<<5-o)}n=Te.determineFirstDigit(n,i),s=Ie.findGuardPattern(e,s,!0,Ie.MIDDLE_PATTERN,new Int32Array(Ie.MIDDLE_PATTERN.length).fill(0))[1];for(let o=0;o<6&&s<a;o++){let t=Ie.decodeDigit(e,r,s,Ie.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)s+=e}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return H.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode("0".charCodeAt(0)+n)+e;throw new j}}Te.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class _e extends Ie{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let a=e.getSize(),s=t[1];for(let i=0;i<4&&s<a;i++){let t=Ie.decodeDigit(e,r,s,Ie.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)s+=e}s=Ie.findGuardPattern(e,s,!0,Ie.MIDDLE_PATTERN,new Int32Array(Ie.MIDDLE_PATTERN.length).fill(0))[1];for(let i=0;i<4&&s<a;i++){let t=Ie.decodeDigit(e,r,s,Ie.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)s+=e}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return H.EAN_8}}class je extends Ie{constructor(){super(...arguments),this.ean13Reader=new Te}getBarcodeFormat(){return H.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let n=new U(t.substring(1),null,null,e.getResultPoints(),H.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new j}reset(){this.ean13Reader.reset()}}class Re extends Ie{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(e=>e);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const a=e.getSize();let s=t[1],i=0;for(let o=0;o<6&&s<a;o++){const t=Re.decodeDigit(e,r,s,Re.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)s+=e;t>=10&&(i|=1<<5-o)}return{rowOffset:s,resultString:Re.determineNumSysAndCheckDigit(n,i)}}decodeEnd(e,t){return Re.findGuardPatternWithoutCounters(e,t,!0,Re.MIDDLE_END_PATTERN)}checkChecksum(e){return Ie.checkChecksum(Re.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return String.fromCharCode("0".charCodeAt(0)+n)+e+String.fromCharCode("0".charCodeAt(0)+r);throw j.getNotFoundInstance()}getBarcodeFormat(){return H.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(e=>e.charCodeAt(0)),n=new T;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}Re.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Re.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class De extends we{constructor(e){super();let n=null==e?null:e.get(C.POSSIBLE_FORMATS),r=[];t(n)?(r.push(new Te),r.push(new je),r.push(new _e),r.push(new Re)):(n.indexOf(H.EAN_13)>-1&&r.push(new Te),n.indexOf(H.UPC_A)>-1&&r.push(new je),n.indexOf(H.EAN_8)>-1&&r.push(new _e),n.indexOf(H.UPC_E)>-1&&r.push(new Re)),this.readers=r}decodeRow(e,t,n){for(let a of this.readers)try{const r=a.decodeRow(e,t,n),s=r.getBarcodeFormat()===H.EAN_13&&"0"===r.getText().charAt(0),i=null==n?null:n.get(C.POSSIBLE_FORMATS),o=null==i||i.includes(H.UPC_A);if(s&&o){const e=r.getRawBytes(),t=new U(r.getText().substring(1),e,e?e.length:null,r.getResultPoints(),H.UPC_A);return t.putAllMetadata(r.getResultMetadata()),t}return r}catch(r){}throw new j}reset(){for(let e of this.readers)e.reset()}}class Me extends we{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(we.patternMatchVariance(e,t[n],Me.MAX_INDIVIDUAL_VARIANCE)<Me.MAX_AVG_VARIANCE)return n;throw new j}static count(e){return se.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let a=1;a<e.length;a++)t[a]>r&&(r=t[a],n=a);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let a=1;a<e.length;a++)t[a]<r&&(r=t[a],n=a);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t/(t+e[2]+e[3]);if(n>=Me.MIN_FINDER_PATTERN_RATIO&&n<=Me.MAX_FINDER_PATTERN_RATIO){let t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let r of e)r>n&&(n=r),r<t&&(t=r);return n<10*t}return!1}}Me.MAX_AVG_VARIANCE=.2,Me.MAX_INDIVIDUAL_VARIANCE=.45,Me.MIN_FINDER_PATTERN_RATIO=9.5/12,Me.MAX_FINDER_PATTERN_RATIO=12.5/14;class Oe{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Oe))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ke{constructor(e,t,n,r,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new oe(n,a)),this.resultPoints.push(new oe(r,a))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof ke))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Pe{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let o of e)r+=o;let a=0,s=0,i=e.length;for(let o=0;o<i-1;o++){let l;for(l=1,s|=1<<o;l<e[o];l++,s&=~(1<<o)){let e=Pe.combins(r-l-1,i-o-2);if(n&&0===s&&r-l-(i-o-1)>=i-o-1&&(e-=Pe.combins(r-l-(i-o),i-o-2)),i-o-1>1){let n=0;for(let e=r-l-(i-o-2);e>t;e--)n+=Pe.combins(r-l-e-1,i-o-3);e-=n*(i-1-o)}else r-l>t&&e--;a+=e}r-=l}return a}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let a=1,s=1;for(let i=e;i>n;i--)a*=i,s<=r&&(a/=s,s++);for(;s<=r;)a/=s,s++;return a}}class Le{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let n=new S(12*t),r=0,a=e[0].getRightChar().getValue();for(let s=11;s>=0;--s)0!=(a&1<<s)&&n.set(r),r++;for(let s=1;s<e.length;++s){let t=e[s],a=t.getLeftChar().getValue();for(let e=11;e>=0;--e)0!=(a&1<<e)&&n.set(r),r++;if(null!=t.getRightChar()){let e=t.getRightChar().getValue();for(let t=11;t>=0;--t)0!=(e&1<<t)&&n.set(r),r++}}return n}}class Fe{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Be{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Ue extends Be{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===Ue.FNC1}}Ue.FNC1="$";class ze extends Be{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class He extends Be{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new b;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===He.FNC1}isSecondDigitFNC1(){return this.secondDigit===He.FNC1}isAnyFNC1(){return this.firstDigit===He.FNC1||this.secondDigit===He.FNC1}}He.FNC1=10;class Ve{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new j;let t=e.substring(0,2);for(let a of Ve.TWO_DIGIT_DATA_LENGTH)if(a[0]===t)return a[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(2,a[2],e):Ve.processFixedAI(2,a[1],e);if(e.length<3)throw new j;let n=e.substring(0,3);for(let a of Ve.THREE_DIGIT_DATA_LENGTH)if(a[0]===n)return a[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(3,a[2],e):Ve.processFixedAI(3,a[1],e);for(let a of Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(a[0]===n)return a[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,a[2],e):Ve.processFixedAI(4,a[1],e);if(e.length<4)throw new j;let r=e.substring(0,4);for(let a of Ve.FOUR_DIGIT_DATA_LENGTH)if(a[0]===r)return a[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,a[2],e):Ve.processFixedAI(4,a[1],e);throw new j}static processFixedAI(e,t,n){if(n.length<e)throw new j;let r=n.substring(0,e);if(n.length<e+t)throw new j;let a=n.substring(e,e+t),s=n.substring(e+t),i="("+r+")"+a,o=Ve.parseFieldsInGeneralPurpose(s);return null==o?i:i+o}static processVariableAI(e,t,n){let r,a=n.substring(0,e);r=n.length<e+t?n.length:e+t;let s=n.substring(e,r),i=n.substring(r),o="("+a+")"+s,l=Ve.parseFieldsInGeneralPurpose(i);return null==l?o:o+l}}Ve.VARIABLE_LENGTH=[],Ve.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ve.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ve.VARIABLE_LENGTH,20],["22",Ve.VARIABLE_LENGTH,29],["30",Ve.VARIABLE_LENGTH,8],["37",Ve.VARIABLE_LENGTH,8],["90",Ve.VARIABLE_LENGTH,30],["91",Ve.VARIABLE_LENGTH,30],["92",Ve.VARIABLE_LENGTH,30],["93",Ve.VARIABLE_LENGTH,30],["94",Ve.VARIABLE_LENGTH,30],["95",Ve.VARIABLE_LENGTH,30],["96",Ve.VARIABLE_LENGTH,30],["97",Ve.VARIABLE_LENGTH,3],["98",Ve.VARIABLE_LENGTH,30],["99",Ve.VARIABLE_LENGTH,30]],Ve.THREE_DIGIT_DATA_LENGTH=[["240",Ve.VARIABLE_LENGTH,30],["241",Ve.VARIABLE_LENGTH,30],["242",Ve.VARIABLE_LENGTH,6],["250",Ve.VARIABLE_LENGTH,30],["251",Ve.VARIABLE_LENGTH,30],["253",Ve.VARIABLE_LENGTH,17],["254",Ve.VARIABLE_LENGTH,20],["400",Ve.VARIABLE_LENGTH,30],["401",Ve.VARIABLE_LENGTH,30],["402",17],["403",Ve.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ve.VARIABLE_LENGTH,20],["421",Ve.VARIABLE_LENGTH,15],["422",3],["423",Ve.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ve.VARIABLE_LENGTH,15],["391",Ve.VARIABLE_LENGTH,18],["392",Ve.VARIABLE_LENGTH,15],["393",Ve.VARIABLE_LENGTH,18],["703",Ve.VARIABLE_LENGTH,30]],Ve.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ve.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ve.VARIABLE_LENGTH,20],["8003",Ve.VARIABLE_LENGTH,30],["8004",Ve.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ve.VARIABLE_LENGTH,30],["8008",Ve.VARIABLE_LENGTH,12],["8018",18],["8020",Ve.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ve.VARIABLE_LENGTH,70],["8200",Ve.VARIABLE_LENGTH,70]];class Ge{constructor(e){this.buffer=new T,this.information=e}decodeAllCodes(e,t){let n=t,r=null;for(;;){let t=this.decodeGeneralPurposeField(n,r),a=Ve.parseFieldsInGeneralPurpose(t.getNewString());if(null!=a&&e.append(a),r=t.isRemaining()?""+t.getRemainingValue():null,n===t.getNewPosition())break;n=t.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return new He(this.information.getSize(),0===t?He.FNC1:t-1,He.FNC1)}let t=this.extractNumericValueFromBitArray(e,7);return new He(e+7,(t-8)/11,(t-8)%11)}extractNumericValueFromBitArray(e,t){return Ge.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let a=0;a<n;++a)e.get(t+a)&&(r|=1<<n-a-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return null!=n&&n.isRemaining()?new ze(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new ze(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),n===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return t=e.isSecondDigitFNC1()?new ze(this.current.getPosition(),this.buffer.toString()):new ze(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Fe(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new Fe(!0,e)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Fe(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new Fe(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Fe(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new Fe(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Fe(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Ue(e+5,Ue.FNC1);if(t>=5&&t<15)return new Ue(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Ue(e+7,""+(r+1));if(r>=90&&r<116)return new Ue(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new b}return new Ue(e+8,n)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Ue(e+5,Ue.FNC1);if(t>=5&&t<15)return new Ue(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Ue(e+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new ne("Decoding invalid alphanumeric value: "+r)}return new Ue(e+6,n)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class We{constructor(e){this.information=e,this.generalDecoder=new Ge(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ye extends We{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);n/100===0&&e.append("0"),n/10===0&&e.append("0"),e.append(n)}Ye.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let a=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&r)?3*a:a}n=10-n%10,10===n&&(n=0),e.append(n)}}Ye.GTIN_SIZE=40;class Xe extends Ye{constructor(e){super(e)}parseInformation(){let e=new T;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(Xe.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,Xe.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Xe.HEADER_SIZE+44)}}Xe.HEADER_SIZE=4;class Qe extends We{constructor(e){super(e)}parseInformation(){let e=new T;return this.getGeneralDecoder().decodeAllCodes(e,Qe.HEADER_SIZE)}}Qe.HEADER_SIZE=5;class qe extends Ye{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let a=this.checkWeight(r),s=1e5;for(let i=0;i<5;++i)a/s===0&&e.append("0"),s/=10;e.append(a)}}class Ze extends qe{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Ze.HEADER_SIZE+qe.GTIN_SIZE+Ze.WEIGHT_SIZE)throw new j;let e=new T;return this.encodeCompressedGtin(e,Ze.HEADER_SIZE),this.encodeCompressedWeight(e,Ze.HEADER_SIZE+qe.GTIN_SIZE,Ze.WEIGHT_SIZE),e.toString()}}Ze.HEADER_SIZE=5,Ze.WEIGHT_SIZE=15;class Ke extends Ze{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class $e extends Ze{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Je extends Ye{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Je.HEADER_SIZE+Ye.GTIN_SIZE)throw new j;let e=new T;this.encodeCompressedGtin(e,Je.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Je.HEADER_SIZE+Ye.GTIN_SIZE,Je.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(Je.HEADER_SIZE+Ye.GTIN_SIZE+Je.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}Je.HEADER_SIZE=8,Je.LAST_DIGIT_SIZE=2;class et extends Ye{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<et.HEADER_SIZE+Ye.GTIN_SIZE)throw new j;let e=new T;this.encodeCompressedGtin(e,et.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ye.GTIN_SIZE,et.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ye.GTIN_SIZE+et.LAST_DIGIT_SIZE,et.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(et.HEADER_SIZE+Ye.GTIN_SIZE+et.LAST_DIGIT_SIZE+et.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}et.HEADER_SIZE=8,et.LAST_DIGIT_SIZE=2,et.FIRST_THREE_DIGITS_SIZE=10;class tt extends qe{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new j;let e=new T;return this.encodeCompressedGtin(e,tt.HEADER_SIZE),this.encodeCompressedWeight(e,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(e,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,tt.DATE_SIZE);if(38400==n)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let a=n%12+1;n/=12;let s=n;s/10==0&&e.append("0"),e.append(s),a/10==0&&e.append("0"),e.append(a),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}function nt(e){try{if(e.get(1))return new Xe(e);if(!e.get(2))return new Qe(e);switch(Ge.extractNumericValueFromBitArray(e,1,4)){case 4:return new Ke(e);case 5:return new $e(e)}switch(Ge.extractNumericValueFromBitArray(e,1,5)){case 12:return new Je(e);case 13:return new et(e)}switch(Ge.extractNumericValueFromBitArray(e,1,7)){case 56:return new tt(e,"310","11");case 57:return new tt(e,"320","11");case 58:return new tt(e,"310","13");case 59:return new tt(e,"320","13");case 60:return new tt(e,"310","15");case 61:return new tt(e,"320","15");case 62:return new tt(e,"310","17");case 63:return new tt(e,"320","17")}}catch(t){throw console.log(t),new ne("unknown decoder: "+e)}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;class rt{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof rt&&rt.equalsOrNull(e.leftchar,t.leftchar)&&rt.equalsOrNull(e.rightchar,t.rightchar)&&rt.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:rt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class at{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof at&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((e,r)=>{t.forEach(t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)})}),n}}class st extends Me{constructor(e){super(...arguments),this.pairs=new Array(st.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return st.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,st.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n,r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(a){if(a instanceof j){if(!this.pairs.length)throw new j;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){let e=this.checkRowsBoolean(!1);if(null!=e)return e;if(e=this.checkRowsBoolean(!0),null!=e)return e}throw new j}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let r=t;r<this.rows.length;r++){let t=this.rows[r];this.pairs.length=0;for(let n of e)this.pairs.push(n.getPairs());if(this.pairs.push(t.getPairs()),!st.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let a=new Array(e);a.push(t);try{return this.checkRows(a,r+1)}catch(n){this.verbose&&console.log(n)}}throw new j}static isValidSequence(e){for(let t of st.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,a=!1;for(;n<this.rows.length;){let t=this.rows[n];if(t.getRowNumber()>e){a=t.isEquivalent(this.pairs);break}r=t.isEquivalent(this.pairs),n++}a||r||st.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new at(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length)for(let t of n.getPairs())for(let n of e)if(rt.equals(t,n))break}static isPartialRow(e,t){for(let n of t){let t=!0;for(let r of e){let e=!1;for(let t of n.getPairs())if(r.equals(t)){e=!0;break}if(!e){t=!1;break}}if(t)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=nt(Le.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),r=e[e.length-1].getFinderPattern().getResultPoints(),a=[n[0],n[1],r[0],r[1]];return new U(t,null,null,a,H.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;let r=n.getChecksumPortion(),a=2;for(let s=1;s<this.pairs.size();++s){let e=this.pairs.get(s);r+=e.getLeftChar().getChecksumPortion(),a++;let t=e.getRightChar();null!=t&&(r+=t.getChecksumPortion(),a++)}return r%=211,211*(a-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r,a=t.length%2==0;this.startFromEven&&(a=!a);let s=!0,i=-1;do{this.findNextPair(e,t,i),r=this.parseFoundFinderPattern(e,n,a),null==r?i=st.getNextSecondBar(e,this.startEnd[0]):s=!1}while(s);let o,l=this.decodeDataCharacter(e,r,a,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new j;try{o=this.decodeDataCharacter(e,r,a,!1)}catch(c){o=null,this.verbose&&console.log(c)}return new rt(l,o,r,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let a,s=e.getSize();a=n>=0?n:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let i=t.length%2!=0;this.startFromEven&&(i=!i);let o=!1;for(;a<s&&(o=!e.get(a),o);)a++;let l=0,c=a;for(let u=a;u<s;u++)if(e.get(u)!=o)r[l]++;else{if(3==l){if(i&&st.reverseCounters(r),st.isFinderPattern(r))return this.startEnd[0]=c,void(this.startEnd[1]=u);i&&st.reverseCounters(r),c+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,l--}else l++;r[l]=1,o=!o}throw new j}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,a,s;if(n){let t=this.startEnd[0]-1;for(;t>=0&&!e.get(t);)t--;t++,r=this.startEnd[0]-t,a=t,s=this.startEnd[1]}else a=this.startEnd[0],s=e.getNextUnset(this.startEnd[1]+1),r=s-this.startEnd[1];let i,o=this.getDecodeFinderCounters();g.arraycopy(o,0,o,1,o.length-1),o[0]=r;try{i=this.parseFinderValue(o,st.FINDER_PATTERNS)}catch(l){return null}return new ke(i,[a,s],a,s,t)}decodeDataCharacter(e,t,n,r){let a=this.getDataCharacterCounters();for(let E=0;E<a.length;E++)a[E]=0;if(r)st.recordPatternInReverse(e,t.getStartEnd()[0],a);else{st.recordPattern(e,t.getStartEnd()[1],a);for(let e=0,t=a.length-1;e<t;e++,t--){let n=a[e];a[e]=a[t],a[t]=n}}let s=17,i=se.sum(new Int32Array(a))/s,o=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(i-o)/o>.3)throw new j;let l=this.getOddCounts(),c=this.getEvenCounts(),u=this.getOddRoundingErrors(),d=this.getEvenRoundingErrors();for(let E=0;E<a.length;E++){let e=1*a[E]/i,t=e+.5;if(t<1){if(e<.3)throw new j;t=1}else if(t>8){if(e>8.7)throw new j;t=8}let n=E/2;0==(1&E)?(l[n]=t,u[n]=e-t):(c[n]=t,d[n]=e-t)}this.adjustOddEvenCounts(s);let h=4*t.getValue()+(n?0:2)+(r?0:1)-1,f=0,m=0;for(let E=l.length-1;E>=0;E--){if(st.isNotA1left(t,n,r)){let e=st.WEIGHTS[h][2*E];m+=l[E]*e}f+=l[E]}let g=0;for(let E=c.length-1;E>=0;E--)if(st.isNotA1left(t,n,r)){let e=st.WEIGHTS[h][2*E+1];g+=c[E]*e}let p=m+g;if(0!=(1&f)||f>13||f<4)throw new j;let y=(13-f)/2,v=st.SYMBOL_WIDEST[y],w=9-v,S=Pe.getRSSvalue(l,v,!0),N=Pe.getRSSvalue(c,w,!1),C=st.EVEN_TOTAL_SUBSET[y],b=st.GSUM[y];return new Oe(S*C+N+b,p)}static isNotA1left(e,t,n){return!(0==e.getValue()&&t&&n)}adjustOddEvenCounts(e){let t=se.sum(new Int32Array(this.getOddCounts())),n=se.sum(new Int32Array(this.getEvenCounts())),r=!1,a=!1;t>13?a=!0:t<4&&(r=!0);let s=!1,i=!1;n>13?i=!0:n<4&&(s=!0);let o=t+n-e,l=1==(1&t),c=0==(1&n);if(1==o)if(l){if(c)throw new j;a=!0}else{if(!c)throw new j;i=!0}else if(-1==o)if(l){if(c)throw new j;r=!0}else{if(!c)throw new j;s=!0}else{if(0!=o)throw new j;if(l){if(!c)throw new j;t<n?(r=!0,i=!0):(a=!0,s=!0)}else if(c)throw new j}if(r){if(a)throw new j;st.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&st.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(i)throw new j;st.increment(this.getEvenCounts(),this.getOddRoundingErrors())}i&&st.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}st.SYMBOL_WIDEST=[7,5,4,3,1],st.EVEN_TOTAL_SUBSET=[4,20,52,104,204],st.GSUM=[0,348,1388,2948,3988],st.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],st.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],st.FINDER_PAT_A=0,st.FINDER_PAT_B=1,st.FINDER_PAT_C=2,st.FINDER_PAT_D=3,st.FINDER_PAT_E=4,st.FINDER_PAT_F=5,st.FINDER_PATTERN_SEQUENCES=[[st.FINDER_PAT_A,st.FINDER_PAT_A],[st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B],[st.FINDER_PAT_A,st.FINDER_PAT_C,st.FINDER_PAT_B,st.FINDER_PAT_D],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_C],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_D,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_D],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_E],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F]],st.MAX_PAIRS=11;class it extends Oe{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ot extends Me{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);ot.addOrTally(this.possibleLeftPairs,r),t.reverse();let a=this.decodePair(t,!0,e,n);ot.addOrTally(this.possibleRightPairs,a),t.reverse();for(let s of this.possibleLeftPairs)if(s.getCount()>1)for(let e of this.possibleRightPairs)if(e.getCount()>1&&ot.checkChecksum(s,e))return ot.constructResult(s,e);throw new j}static addOrTally(e,t){if(null==t)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),a=new T;for(let l=13-r.length;l>0;l--)a.append("0");a.append(r);let s=0;for(let l=0;l<13;l++){let e=a.charAt(l).charCodeAt(0)-"0".charCodeAt(0);s+=0===(1&l)?3*e:e}s=10-s%10,10===s&&(s=0),a.append(s.toString());let i=e.getFinderPattern().getResultPoints(),o=t.getFinderPattern().getResultPoints();return new U(a.toString(),null,0,[i[0],i[1],o[0],o[1]],H.RSS_14,(new Date).getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let a=this.findFinderPattern(e,t),s=this.parseFoundFinderPattern(e,n,t,a),i=null==r?null:r.get(C.NEED_RESULT_POINT_CALLBACK);if(null!=i){let r=(a[0]+a[1])/2;t&&(r=e.getSize()-1-r),i.foundPossibleResultPoint(new oe(r,n))}let o=this.decodeDataCharacter(e,s,!0),l=this.decodeDataCharacter(e,s,!1);return new it(1597*o.getValue()+l.getValue(),o.getChecksumPortion()+4*l.getChecksumPortion(),s)}catch(a){return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let g=0;g<r.length;g++)r[g]=0;if(n)we.recordPatternInReverse(e,t.getStartEnd()[0],r);else{we.recordPattern(e,t.getStartEnd()[1]+1,r);for(let e=0,t=r.length-1;e<t;e++,t--){let n=r[e];r[e]=r[t],r[t]=n}}let a=n?16:15,s=se.sum(new Int32Array(r))/a,i=this.getOddCounts(),o=this.getEvenCounts(),l=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let g=0;g<r.length;g++){let e=r[g]/s,t=Math.floor(e+.5);t<1?t=1:t>8&&(t=8);let n=Math.floor(g/2);0===(1&g)?(i[n]=t,l[n]=e-t):(o[n]=t,c[n]=e-t)}this.adjustOddEvenCounts(n,a);let u=0,d=0;for(let g=i.length-1;g>=0;g--)d*=9,d+=i[g],u+=i[g];let h=0,f=0;for(let g=o.length-1;g>=0;g--)h*=9,h+=o[g],f+=o[g];let m=d+3*h;if(n){if(0!==(1&u)||u>12||u<4)throw new j;let e=(12-u)/2,t=ot.OUTSIDE_ODD_WIDEST[e],n=9-t,r=Pe.getRSSvalue(i,t,!1),a=Pe.getRSSvalue(o,n,!0),s=ot.OUTSIDE_EVEN_TOTAL_SUBSET[e],l=ot.OUTSIDE_GSUM[e];return new Oe(r*s+a+l,m)}{if(0!==(1&f)||f>10||f<4)throw new j;let e=(10-f)/2,t=ot.INSIDE_ODD_WIDEST[e],n=9-t,r=Pe.getRSSvalue(i,t,!0),a=Pe.getRSSvalue(o,n,!1),s=ot.INSIDE_ODD_TOTAL_SUBSET[e],l=ot.INSIDE_GSUM[e];return new Oe(a*s+r+l,m)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),a=!1,s=0;for(;s<r&&(a=!e.get(s),t!==a);)s++;let i=0,o=s;for(let l=s;l<r;l++)if(e.get(l)!==a)n[i]++;else{if(3===i){if(Me.isFinderPattern(n))return[o,l];o+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,i--}else i++;n[i]=1,a=!a}throw new j}parseFoundFinderPattern(e,t,n,r){let a=e.get(r[0]),s=r[0]-1;for(;s>=0&&a!==e.get(s);)s--;s++;const i=r[0]-s,o=this.getDecodeFinderCounters(),l=new Int32Array(o.length);g.arraycopy(o,0,l,1,o.length-1),l[0]=i;const c=this.parseFinderValue(l,ot.FINDER_PATTERNS);let u=s,d=r[1];return n&&(u=e.getSize()-1-u,d=e.getSize()-1-d),new ke(c,[s,r[1]],u,d,t)}adjustOddEvenCounts(e,t){let n=se.sum(new Int32Array(this.getOddCounts())),r=se.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1,i=!1,o=!1;e?(n>12?s=!0:n<4&&(a=!0),r>12?o=!0:r<4&&(i=!0)):(n>11?s=!0:n<5&&(a=!0),r>10?o=!0:r<4&&(i=!0));let l=n+r-t,c=(1&n)===(e?1:0),u=1===(1&r);if(1===l)if(c){if(u)throw new j;s=!0}else{if(!u)throw new j;o=!0}else if(-1===l)if(c){if(u)throw new j;a=!0}else{if(!u)throw new j;i=!0}else{if(0!==l)throw new j;if(c){if(!u)throw new j;n<r?(a=!0,o=!0):(s=!0,i=!0)}else if(u)throw new j}if(a){if(s)throw new j;Me.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Me.decrement(this.getOddCounts(),this.getOddRoundingErrors()),i){if(o)throw new j;Me.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&Me.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ot.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ot.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ot.OUTSIDE_GSUM=[0,161,961,2015,2715],ot.INSIDE_GSUM=[0,336,1036,1516],ot.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ot.INSIDE_ODD_WIDEST=[2,4,6,8],ot.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class lt extends we{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;const n=e?e.get(C.POSSIBLE_FORMATS):null,r=e&&void 0!==e.get(C.ASSUME_CODE_39_CHECK_DIGIT);n?((n.includes(H.EAN_13)||n.includes(H.UPC_A)||n.includes(H.EAN_8)||n.includes(H.UPC_E))&&this.readers.push(new De(e)),n.includes(H.CODE_39)&&this.readers.push(new Ne(r)),n.includes(H.CODE_128)&&this.readers.push(new Se),n.includes(H.ITF)&&this.readers.push(new Ce),n.includes(H.RSS_14)&&this.readers.push(new ot),n.includes(H.RSS_EXPANDED)&&this.readers.push(new st(this.verbose))):(this.readers.push(new De(e)),this.readers.push(new Ne),this.readers.push(new De(e)),this.readers.push(new Se),this.readers.push(new Ce),this.readers.push(new ot),this.readers.push(new st(this.verbose)))}decodeRow(e,t,n){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(e,t,n)}catch(r){}throw new j}reset(){this.readers.forEach(e=>e.reset())}}class ct extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1?arguments[1]:void 0;super(new lt(t),e,t)}}class ut{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class dt{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ht{constructor(e,t,n,r,a,s){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=a,this.ecBlocks=s;let i=0;const o=s.getECCodewords(),l=s.getECBlocks();for(let c of l)i+=c.getCount()*(c.getDataCodewords()+o);this.totalCodewords=i}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(0!==(1&e)||0!==(1&t))throw new b;for(let n of ht.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new b}toString(){return""+this.versionNumber}static buildVersions(){return[new ht(1,10,10,8,8,new ut(5,new dt(1,3))),new ht(2,12,12,10,10,new ut(7,new dt(1,5))),new ht(3,14,14,12,12,new ut(10,new dt(1,8))),new ht(4,16,16,14,14,new ut(12,new dt(1,12))),new ht(5,18,18,16,16,new ut(14,new dt(1,18))),new ht(6,20,20,18,18,new ut(18,new dt(1,22))),new ht(7,22,22,20,20,new ut(20,new dt(1,30))),new ht(8,24,24,22,22,new ut(24,new dt(1,36))),new ht(9,26,26,24,24,new ut(28,new dt(1,44))),new ht(10,32,32,14,14,new ut(36,new dt(1,62))),new ht(11,36,36,16,16,new ut(42,new dt(1,86))),new ht(12,40,40,18,18,new ut(48,new dt(1,114))),new ht(13,44,44,20,20,new ut(56,new dt(1,144))),new ht(14,48,48,22,22,new ut(68,new dt(1,174))),new ht(15,52,52,24,24,new ut(42,new dt(2,102))),new ht(16,64,64,14,14,new ut(56,new dt(2,140))),new ht(17,72,72,16,16,new ut(36,new dt(4,92))),new ht(18,80,80,18,18,new ut(48,new dt(4,114))),new ht(19,88,88,20,20,new ut(56,new dt(4,144))),new ht(20,96,96,22,22,new ut(68,new dt(4,174))),new ht(21,104,104,24,24,new ut(56,new dt(6,136))),new ht(22,120,120,18,18,new ut(68,new dt(6,175))),new ht(23,132,132,20,20,new ut(62,new dt(8,163))),new ht(24,144,144,22,22,new ut(62,new dt(8,156),new dt(2,155))),new ht(25,8,18,6,16,new ut(7,new dt(1,5))),new ht(26,8,32,6,14,new ut(11,new dt(1,10))),new ht(27,12,26,10,24,new ut(14,new dt(1,16))),new ht(28,12,36,10,16,new ut(18,new dt(1,22))),new ht(29,16,36,14,16,new ut(24,new dt(1,32))),new ht(30,16,48,14,22,new ut(28,new dt(1,49)))]}}ht.VERSIONS=ht.buildVersions();class ft{constructor(e){const t=e.getHeight();if(t<8||t>144||0!==(1&t))throw new b;this.version=ft.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new _(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return ht.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth();let i=!1,o=!1,l=!1,c=!1;do{if(n!==a||0!==r||i)if(n!==a-2||0!==r||0===(3&s)||o)if(n!==a+4||2!==r||0!==(7&s)||l)if(n!==a-2||0!==r||4!==(7&s)||c){do{n<a&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,a,s)),n-=2,r+=2}while(n>=0&&r<s);n+=1,r+=3;do{n>=0&&r<s&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,a,s)),n+=2,r-=2}while(n<a&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(a,s),n-=2,r+=2,c=!0;else e[t++]=255&this.readCorner3(a,s),n-=2,r+=2,l=!0;else e[t++]=255&this.readCorner2(a,s),n-=2,r+=2,o=!0;else e[t++]=255&this.readCorner1(a,s),n-=2,r+=2,i=!0}while(n<a||r<s);if(t!==this.version.getTotalCodewords())throw new b;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let a=0;return this.readModule(e-2,t-2,n,r)&&(a|=1),a<<=1,this.readModule(e-2,t-1,n,r)&&(a|=1),a<<=1,this.readModule(e-1,t-2,n,r)&&(a|=1),a<<=1,this.readModule(e-1,t-1,n,r)&&(a|=1),a<<=1,this.readModule(e-1,t,n,r)&&(a|=1),a<<=1,this.readModule(e,t-2,n,r)&&(a|=1),a<<=1,this.readModule(e,t-1,n,r)&&(a|=1),a<<=1,this.readModule(e,t,n,r)&&(a|=1),a}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new d("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=t/r|0,i=n/a|0,o=new _(i*a,s*r);for(let l=0;l<s;++l){const t=l*r;for(let n=0;n<i;++n){const s=n*a;for(let i=0;i<r;++i){const c=l*(r+2)+1+i,u=t+i;for(let t=0;t<a;++t){const r=n*(a+2)+1+t;if(e.get(r,c)){const e=s+t;o.set(e,u)}}}}}return o}}class mt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const a=n.getECBlocks();for(let d of a)r+=d.getCount();const s=new Array(r);let i=0;for(let d of a)for(let e=0;e<d.getCount();e++){const e=d.getDataCodewords(),t=n.getECCodewords()+e;s[i++]=new mt(e,new Uint8Array(t))}const o=s[0].codewords.length-n.getECCodewords(),l=o-1;let c=0;for(let d=0;d<l;d++)for(let t=0;t<i;t++)s[t].codewords[d]=e[c++];const u=24===t.getVersionNumber(),h=u?8:i;for(let d=0;d<h;d++)s[d].codewords[o-1]=e[c++];const f=s[0].codewords.length;for(let d=o;d<f;d++)for(let t=0;t<i;t++){const n=u?(t+8)%i:t,r=u&&n>7?d-1:d;s[n].codewords[r]=e[c++]}if(c!==e.length)throw new d;return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class gt{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new d(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const a=this.bytes;if(n>0){const s=8-n,i=e<s?e:s,o=s-i,l=255>>8-i<<o;t=(a[r]&l)>>o,e-=i,n+=i,8===n&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&a[r],r++,e-=8;if(e>0){const s=8-e,i=255>>s<<s;t=t<<e|(a[r]&i)>>s,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(G||(G={}));class pt{static decode(e){const t=new gt(e),n=new T,r=new T,a=new Array;let s=G.ASCII_ENCODE;do{if(s===G.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,r);else{switch(s){case G.C40_ENCODE:this.decodeC40Segment(t,n);break;case G.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case G.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case G.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case G.BASE256_ENCODE:this.decodeBase256Segment(t,n,a);break;default:throw new b}s=G.ASCII_ENCODE}}while(s!==G.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new Z(e,n.toString(),0===a.length?null:a,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let a=e.readBits(8);if(0===a)throw new b;if(a<=128)return r&&(a+=128),t.append(String.fromCharCode(a-1)),G.ASCII_ENCODE;if(129===a)return G.PAD_ENCODE;if(a<=229){const e=a-130;e<10&&t.append("0"),t.append(""+e)}else switch(a){case 230:return G.C40_ENCODE;case 231:return G.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return G.ANSIX12_ENCODE;case 239:return G.TEXT_ENCODE;case 240:return G.EDIFACT_ENCODE;default:if(254!==a||0!==e.available())throw new b}}while(e.available()>0);return G.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let a=0;do{if(8===e.available())return;const s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),r);for(let e=0;e<3;e++){const s=r[e];switch(a){case 0:if(s<3)a=s+1;else{if(!(s<this.C40_BASIC_SET_CHARS.length))throw new b;{const e=this.C40_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),a=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length){const e=this.C40_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new b}a=0;break;case 3:n?(t.append(String.fromCharCode(s+224)),n=!1):t.append(String.fromCharCode(s+96)),a=0;break;default:throw new b}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],a=0;do{if(8===e.available())return;const s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),r);for(let e=0;e<3;e++){const s=r[e];switch(a){case 0:if(s<3)a=s+1;else{if(!(s<this.TEXT_BASIC_SET_CHARS.length))throw new b;{const e=this.TEXT_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),a=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length){const e=this.TEXT_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new b}a=0;break;case 3:if(!(s<this.TEXT_SHIFT3_SET_CHARS.length))throw new b;{const e=this.TEXT_SHIFT3_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e),a=0}break;default:throw new b}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(8===e.available())return;const r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(let e=0;e<3;e++){const r=n[e];switch(r){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(r<14)t.append(String.fromCharCode(r+44));else{if(!(r<40))throw new b;t.append(String.fromCharCode(r+51))}}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,a=Math.floor(r/1600);n[0]=a,r-=1600*a,a=Math.floor(r/40),n[1]=a,n[2]=r-40*a}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let n=e.readBits(6);if(31===n){const t=8-e.getBitOffset();return void(8!==t&&e.readBits(t))}0===(32&n)&&(n|=64),t.append(String.fromCharCode(n))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const a=this.unrandomize255State(e.readBits(8),r++);let s;if(s=0===a?e.available()/8|0:a<250?a:250*(a-249)+this.unrandomize255State(e.readBits(8),r++),s<0)throw new b;const i=new Uint8Array(s);for(let l=0;l<s;l++){if(e.available()<8)throw new b;i[l]=this.unrandomize255State(e.readBits(8),r++)}n.push(i);try{t.append(x.decode(i,I.ISO88591))}catch(o){throw new ne("Platform does not support required encoding: "+o.message)}}static unrandomize255State(e,t){const n=e-(149*t%255+1);return n>=0?n:n+256}}pt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],pt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],pt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],pt.TEXT_SHIFT2_SET_CHARS=pt.C40_SHIFT2_SET_CHARS,pt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class yt{constructor(){this.rsDecoder=new re(ee.DATA_MATRIX_FIELD_256)}decode(e){const t=new ft(e),n=t.getVersion(),r=t.readCodewords(),a=mt.getDataBlocks(r,n);let s=0;for(let l of a)s+=l.getNumDataCodewords();const i=new Uint8Array(s),o=a.length;for(let l=0;l<o;l++){const e=a[l],t=e.getCodewords(),n=e.getNumDataCodewords();this.correctErrors(t,n);for(let r=0;r<n;r++)i[r*o+l]=t[r]}return pt.decode(i)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new f}for(let a=0;a<t;a++)e[a]=n[a]}}class vt{constructor(e){this.image=e,this.rectangleDetector=new ue(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new j;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],a=t[2],s=t[3];let i=this.transitionsBetween(n,s)+1,o=this.transitionsBetween(a,s)+1;1===(1&i)&&(i+=1),1===(1&o)&&(o+=1),4*i<7*o&&4*o<7*i&&(i=o=Math.max(i,o));let l=vt.sampleGrid(this.image,n,r,a,s,i,o);return new le(l,[n,r,a,s])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),a=(t.getY()-e.getY())/(n+1);return new oe(e.getX()+r,e.getY()+a)}static moveAway(e,t,n){let r=e.getX(),a=e.getY();return r<t?r-=1:r+=1,a<n?a-=1:a+=1,new oe(r,a)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],a=e[2],s=this.transitionsBetween(t,n),i=this.transitionsBetween(n,r),o=this.transitionsBetween(r,a),l=this.transitionsBetween(a,t),c=s,u=[a,t,n,r];return c>i&&(c=i,u[0]=t,u[1]=n,u[2]=r,u[3]=a),c>o&&(c=o,u[0]=n,u[1]=r,u[2]=a,u[3]=t),c>l&&(u[0]=r,u[1]=a,u[2]=t,u[3]=n),u}detectSolid2(e){let t=e[0],n=e[1],r=e[2],a=e[3],s=this.transitionsBetween(t,a),i=vt.shiftPoint(n,r,4*(s+1)),o=vt.shiftPoint(r,n,4*(s+1));return this.transitionsBetween(i,t)<this.transitionsBetween(o,a)?(e[0]=t,e[1]=n,e[2]=r,e[3]=a):(e[0]=n,e[1]=r,e[2]=a,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],a=e[3],s=this.transitionsBetween(t,a),i=this.transitionsBetween(n,a),o=vt.shiftPoint(t,n,4*(i+1)),l=vt.shiftPoint(r,n,4*(s+1));s=this.transitionsBetween(o,a),i=this.transitionsBetween(l,a);let c=new oe(a.getX()+(r.getX()-n.getX())/(s+1),a.getY()+(r.getY()-n.getY())/(s+1)),u=new oe(a.getX()+(t.getX()-n.getX())/(i+1),a.getY()+(t.getY()-n.getY())/(i+1));return this.isValid(c)?this.isValid(u)?this.transitionsBetween(o,c)+this.transitionsBetween(l,c)>this.transitionsBetween(o,u)+this.transitionsBetween(l,u)?c:u:c:this.isValid(u)?u:null}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],a=e[3],s=this.transitionsBetween(t,a)+1,i=this.transitionsBetween(r,a)+1,o=vt.shiftPoint(t,n,4*i),l=vt.shiftPoint(r,n,4*s);s=this.transitionsBetween(o,a)+1,i=this.transitionsBetween(l,a)+1,1===(1&s)&&(s+=1),1===(1&i)&&(i+=1);let c,u,d=(t.getX()+n.getX()+r.getX()+a.getX())/4,h=(t.getY()+n.getY()+r.getY()+a.getY())/4;return t=vt.moveAway(t,d,h),n=vt.moveAway(n,d,h),r=vt.moveAway(r,d,h),a=vt.moveAway(a,d,h),o=vt.shiftPoint(t,n,4*i),o=vt.shiftPoint(o,a,4*s),c=vt.shiftPoint(n,t,4*i),c=vt.shiftPoint(c,r,4*s),l=vt.shiftPoint(r,a,4*i),l=vt.shiftPoint(l,n,4*s),u=vt.shiftPoint(a,r,4*i),u=vt.shiftPoint(u,t,4*s),[o,c,l,u]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,a,s,i){return me.getInstance().sampleGrid(e,s,i,.5,.5,s-.5,.5,s-.5,i-.5,.5,i-.5,t.getX(),t.getY(),a.getX(),a.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),a=Math.trunc(t.getX()),s=Math.trunc(t.getY()),i=Math.abs(s-r)>Math.abs(a-n);if(i){let e=n;n=r,r=e,e=a,a=s,s=e}let o=Math.abs(a-n),l=Math.abs(s-r),c=-o/2,u=r<s?1:-1,d=n<a?1:-1,h=0,f=this.image.get(i?r:n,i?n:r);for(let m=n,g=r;m!==a;m+=d){let e=this.image.get(i?g:m,i?m:g);if(e!==f&&(h++,f=e),c+=l,c>0){if(g===s)break;g+=u,c-=o}}return h}}class wt{constructor(){this.decoder=new yt}decode(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=r&&r.has(C.PURE_BARCODE)){const r=wt.extractPureBits(e.getBlackMatrix());t=this.decoder.decode(r),n=wt.NO_POINTS}else{const r=new vt(e.getBlackMatrix()).detect();t=this.decoder.decode(r.getBits()),n=r.getPoints()}const a=t.getRawBytes(),s=new U(t.getText(),a,8*a.length,n,H.DATA_MATRIX,g.currentTimeMillis()),i=t.getByteSegments();null!=i&&s.putMetadata(q.BYTE_SEGMENTS,i);const o=t.getECLevel();return null!=o&&s.putMetadata(q.ERROR_CORRECTION_LEVEL,o),s}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new j;const r=this.moduleSize(t,e);let a=t[1];const s=n[1];let i=t[0];const o=(n[0]-i+1)/r,l=(s-a+1)/r;if(o<=0||l<=0)throw new j;const c=r/2;a+=c,i+=c;const u=new _(o,l);for(let d=0;d<l;d++){const t=a+d*r;for(let n=0;n<o;n++)e.get(i+n*r,t)&&u.set(n,d)}return u}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const a=e[1];for(;r<n&&t.get(r,a);)r++;if(r===n)throw new j;const s=r-e[0];if(0===s)throw new j;return s}}wt.NO_POINTS=[];class St extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new wt,e)}}!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(W||(W={}));class Nt{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,Nt.FOR_BITS.set(n,this),Nt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Nt.L;case"M":return Nt.M;case"Q":return Nt.Q;case"H":return Nt.H;default:throw new u(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Nt))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=Nt.FOR_BITS.size)throw new d;return Nt.FOR_BITS.get(e)}}Nt.FOR_BITS=new Map,Nt.FOR_VALUE=new Map,Nt.L=new Nt(W.L,"L",1),Nt.M=new Nt(W.M,"M",0),Nt.Q=new Nt(W.Q,"Q",3),Nt.H=new Nt(W.H,"H",2);class Ct{constructor(e){this.errorCorrectionLevel=Nt.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return w.bitCount(e^t)}static decodeFormatInformation(e,t){const n=Ct.doDecodeFormatInformation(e,t);return null!==n?n:Ct.doDecodeFormatInformation(e^Ct.FORMAT_INFO_MASK_QR,t^Ct.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const a of Ct.FORMAT_INFO_DECODE_LOOKUP){const s=a[0];if(s===e||s===t)return new Ct(a[1]);let i=Ct.numBitsDiffering(e,s);i<n&&(r=a[1],n=i),e!==t&&(i=Ct.numBitsDiffering(t,s),i<n&&(r=a[1],n=i))}return n<=3?new Ct(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Ct))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}Ct.FORMAT_INFO_MASK_QR=21522,Ct.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class bt{constructor(e){this.ecCodewordsPerBlock=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Et{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class At{constructor(e,t){this.versionNumber=e,this.alignmentPatternCenters=t;for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];this.ecBlocks=r;let s=0;const i=r[0].getECCodewordsPerBlock(),o=r[0].getECBlocks();for(const l of o)s+=l.getCount()*(l.getDataCodewords()+i);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new b;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new b}}static getVersionForNumber(e){if(e<1||e>40)throw new d;return At.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<At.VERSION_DECODE_INFO.length;r++){const a=At.VERSION_DECODE_INFO[r];if(a===e)return At.getVersionForNumber(r+7);const s=Ct.numBitsDiffering(e,a);s<t&&(n=r+7,t=s)}return t<=3?At.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new _(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const e=this.alignmentPatternCenters[r]-2;for(let a=0;a<n;a++)0===r&&(0===a||a===n-1)||r===n-1&&0===a||t.setRegion(this.alignmentPatternCenters[a]-2,e,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}At.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),At.VERSIONS=[new At(1,new Int32Array(0),new bt(7,new Et(1,19)),new bt(10,new Et(1,16)),new bt(13,new Et(1,13)),new bt(17,new Et(1,9))),new At(2,Int32Array.from([6,18]),new bt(10,new Et(1,34)),new bt(16,new Et(1,28)),new bt(22,new Et(1,22)),new bt(28,new Et(1,16))),new At(3,Int32Array.from([6,22]),new bt(15,new Et(1,55)),new bt(26,new Et(1,44)),new bt(18,new Et(2,17)),new bt(22,new Et(2,13))),new At(4,Int32Array.from([6,26]),new bt(20,new Et(1,80)),new bt(18,new Et(2,32)),new bt(26,new Et(2,24)),new bt(16,new Et(4,9))),new At(5,Int32Array.from([6,30]),new bt(26,new Et(1,108)),new bt(24,new Et(2,43)),new bt(18,new Et(2,15),new Et(2,16)),new bt(22,new Et(2,11),new Et(2,12))),new At(6,Int32Array.from([6,34]),new bt(18,new Et(2,68)),new bt(16,new Et(4,27)),new bt(24,new Et(4,19)),new bt(28,new Et(4,15))),new At(7,Int32Array.from([6,22,38]),new bt(20,new Et(2,78)),new bt(18,new Et(4,31)),new bt(18,new Et(2,14),new Et(4,15)),new bt(26,new Et(4,13),new Et(1,14))),new At(8,Int32Array.from([6,24,42]),new bt(24,new Et(2,97)),new bt(22,new Et(2,38),new Et(2,39)),new bt(22,new Et(4,18),new Et(2,19)),new bt(26,new Et(4,14),new Et(2,15))),new At(9,Int32Array.from([6,26,46]),new bt(30,new Et(2,116)),new bt(22,new Et(3,36),new Et(2,37)),new bt(20,new Et(4,16),new Et(4,17)),new bt(24,new Et(4,12),new Et(4,13))),new At(10,Int32Array.from([6,28,50]),new bt(18,new Et(2,68),new Et(2,69)),new bt(26,new Et(4,43),new Et(1,44)),new bt(24,new Et(6,19),new Et(2,20)),new bt(28,new Et(6,15),new Et(2,16))),new At(11,Int32Array.from([6,30,54]),new bt(20,new Et(4,81)),new bt(30,new Et(1,50),new Et(4,51)),new bt(28,new Et(4,22),new Et(4,23)),new bt(24,new Et(3,12),new Et(8,13))),new At(12,Int32Array.from([6,32,58]),new bt(24,new Et(2,92),new Et(2,93)),new bt(22,new Et(6,36),new Et(2,37)),new bt(26,new Et(4,20),new Et(6,21)),new bt(28,new Et(7,14),new Et(4,15))),new At(13,Int32Array.from([6,34,62]),new bt(26,new Et(4,107)),new bt(22,new Et(8,37),new Et(1,38)),new bt(24,new Et(8,20),new Et(4,21)),new bt(22,new Et(12,11),new Et(4,12))),new At(14,Int32Array.from([6,26,46,66]),new bt(30,new Et(3,115),new Et(1,116)),new bt(24,new Et(4,40),new Et(5,41)),new bt(20,new Et(11,16),new Et(5,17)),new bt(24,new Et(11,12),new Et(5,13))),new At(15,Int32Array.from([6,26,48,70]),new bt(22,new Et(5,87),new Et(1,88)),new bt(24,new Et(5,41),new Et(5,42)),new bt(30,new Et(5,24),new Et(7,25)),new bt(24,new Et(11,12),new Et(7,13))),new At(16,Int32Array.from([6,26,50,74]),new bt(24,new Et(5,98),new Et(1,99)),new bt(28,new Et(7,45),new Et(3,46)),new bt(24,new Et(15,19),new Et(2,20)),new bt(30,new Et(3,15),new Et(13,16))),new At(17,Int32Array.from([6,30,54,78]),new bt(28,new Et(1,107),new Et(5,108)),new bt(28,new Et(10,46),new Et(1,47)),new bt(28,new Et(1,22),new Et(15,23)),new bt(28,new Et(2,14),new Et(17,15))),new At(18,Int32Array.from([6,30,56,82]),new bt(30,new Et(5,120),new Et(1,121)),new bt(26,new Et(9,43),new Et(4,44)),new bt(28,new Et(17,22),new Et(1,23)),new bt(28,new Et(2,14),new Et(19,15))),new At(19,Int32Array.from([6,30,58,86]),new bt(28,new Et(3,113),new Et(4,114)),new bt(26,new Et(3,44),new Et(11,45)),new bt(26,new Et(17,21),new Et(4,22)),new bt(26,new Et(9,13),new Et(16,14))),new At(20,Int32Array.from([6,34,62,90]),new bt(28,new Et(3,107),new Et(5,108)),new bt(26,new Et(3,41),new Et(13,42)),new bt(30,new Et(15,24),new Et(5,25)),new bt(28,new Et(15,15),new Et(10,16))),new At(21,Int32Array.from([6,28,50,72,94]),new bt(28,new Et(4,116),new Et(4,117)),new bt(26,new Et(17,42)),new bt(28,new Et(17,22),new Et(6,23)),new bt(30,new Et(19,16),new Et(6,17))),new At(22,Int32Array.from([6,26,50,74,98]),new bt(28,new Et(2,111),new Et(7,112)),new bt(28,new Et(17,46)),new bt(30,new Et(7,24),new Et(16,25)),new bt(24,new Et(34,13))),new At(23,Int32Array.from([6,30,54,78,102]),new bt(30,new Et(4,121),new Et(5,122)),new bt(28,new Et(4,47),new Et(14,48)),new bt(30,new Et(11,24),new Et(14,25)),new bt(30,new Et(16,15),new Et(14,16))),new At(24,Int32Array.from([6,28,54,80,106]),new bt(30,new Et(6,117),new Et(4,118)),new bt(28,new Et(6,45),new Et(14,46)),new bt(30,new Et(11,24),new Et(16,25)),new bt(30,new Et(30,16),new Et(2,17))),new At(25,Int32Array.from([6,32,58,84,110]),new bt(26,new Et(8,106),new Et(4,107)),new bt(28,new Et(8,47),new Et(13,48)),new bt(30,new Et(7,24),new Et(22,25)),new bt(30,new Et(22,15),new Et(13,16))),new At(26,Int32Array.from([6,30,58,86,114]),new bt(28,new Et(10,114),new Et(2,115)),new bt(28,new Et(19,46),new Et(4,47)),new bt(28,new Et(28,22),new Et(6,23)),new bt(30,new Et(33,16),new Et(4,17))),new At(27,Int32Array.from([6,34,62,90,118]),new bt(30,new Et(8,122),new Et(4,123)),new bt(28,new Et(22,45),new Et(3,46)),new bt(30,new Et(8,23),new Et(26,24)),new bt(30,new Et(12,15),new Et(28,16))),new At(28,Int32Array.from([6,26,50,74,98,122]),new bt(30,new Et(3,117),new Et(10,118)),new bt(28,new Et(3,45),new Et(23,46)),new bt(30,new Et(4,24),new Et(31,25)),new bt(30,new Et(11,15),new Et(31,16))),new At(29,Int32Array.from([6,30,54,78,102,126]),new bt(30,new Et(7,116),new Et(7,117)),new bt(28,new Et(21,45),new Et(7,46)),new bt(30,new Et(1,23),new Et(37,24)),new bt(30,new Et(19,15),new Et(26,16))),new At(30,Int32Array.from([6,26,52,78,104,130]),new bt(30,new Et(5,115),new Et(10,116)),new bt(28,new Et(19,47),new Et(10,48)),new bt(30,new Et(15,24),new Et(25,25)),new bt(30,new Et(23,15),new Et(25,16))),new At(31,Int32Array.from([6,30,56,82,108,134]),new bt(30,new Et(13,115),new Et(3,116)),new bt(28,new Et(2,46),new Et(29,47)),new bt(30,new Et(42,24),new Et(1,25)),new bt(30,new Et(23,15),new Et(28,16))),new At(32,Int32Array.from([6,34,60,86,112,138]),new bt(30,new Et(17,115)),new bt(28,new Et(10,46),new Et(23,47)),new bt(30,new Et(10,24),new Et(35,25)),new bt(30,new Et(19,15),new Et(35,16))),new At(33,Int32Array.from([6,30,58,86,114,142]),new bt(30,new Et(17,115),new Et(1,116)),new bt(28,new Et(14,46),new Et(21,47)),new bt(30,new Et(29,24),new Et(19,25)),new bt(30,new Et(11,15),new Et(46,16))),new At(34,Int32Array.from([6,34,62,90,118,146]),new bt(30,new Et(13,115),new Et(6,116)),new bt(28,new Et(14,46),new Et(23,47)),new bt(30,new Et(44,24),new Et(7,25)),new bt(30,new Et(59,16),new Et(1,17))),new At(35,Int32Array.from([6,30,54,78,102,126,150]),new bt(30,new Et(12,121),new Et(7,122)),new bt(28,new Et(12,47),new Et(26,48)),new bt(30,new Et(39,24),new Et(14,25)),new bt(30,new Et(22,15),new Et(41,16))),new At(36,Int32Array.from([6,24,50,76,102,128,154]),new bt(30,new Et(6,121),new Et(14,122)),new bt(28,new Et(6,47),new Et(34,48)),new bt(30,new Et(46,24),new Et(10,25)),new bt(30,new Et(2,15),new Et(64,16))),new At(37,Int32Array.from([6,28,54,80,106,132,158]),new bt(30,new Et(17,122),new Et(4,123)),new bt(28,new Et(29,46),new Et(14,47)),new bt(30,new Et(49,24),new Et(10,25)),new bt(30,new Et(24,15),new Et(46,16))),new At(38,Int32Array.from([6,32,58,84,110,136,162]),new bt(30,new Et(4,122),new Et(18,123)),new bt(28,new Et(13,46),new Et(32,47)),new bt(30,new Et(48,24),new Et(14,25)),new bt(30,new Et(42,15),new Et(32,16))),new At(39,Int32Array.from([6,26,54,82,110,138,166]),new bt(30,new Et(20,117),new Et(4,118)),new bt(28,new Et(40,47),new Et(7,48)),new bt(30,new Et(43,24),new Et(22,25)),new bt(30,new Et(10,15),new Et(67,16))),new At(40,Int32Array.from([6,30,58,86,114,142,170]),new bt(30,new Et(19,118),new Et(6,119)),new bt(28,new Et(18,47),new Et(31,48)),new bt(30,new Et(34,24),new Et(34,25)),new bt(30,new Et(20,15),new Et(61,16)))],function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(Y||(Y={}));class xt{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}xt.values=new Map([[Y.DATA_MASK_000,new xt(Y.DATA_MASK_000,(e,t)=>0===(e+t&1))],[Y.DATA_MASK_001,new xt(Y.DATA_MASK_001,(e,t)=>0===(1&e))],[Y.DATA_MASK_010,new xt(Y.DATA_MASK_010,(e,t)=>t%3===0)],[Y.DATA_MASK_011,new xt(Y.DATA_MASK_011,(e,t)=>(e+t)%3===0)],[Y.DATA_MASK_100,new xt(Y.DATA_MASK_100,(e,t)=>0===(Math.floor(e/2)+Math.floor(t/3)&1))],[Y.DATA_MASK_101,new xt(Y.DATA_MASK_101,(e,t)=>e*t%6===0)],[Y.DATA_MASK_110,new xt(Y.DATA_MASK_110,(e,t)=>e*t%6<3)],[Y.DATA_MASK_111,new xt(Y.DATA_MASK_111,(e,t)=>0===(e+t+e*t%3&1))]]);class It{constructor(e){const t=e.getHeight();if(t<21||1!==(3&t))throw new b;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let a=0;a<6;a++)e=this.copyBit(a,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let a=5;a>=0;a--)e=this.copyBit(8,a,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let a=t-1;a>=r;a--)n=this.copyBit(8,a,n);for(let a=t-8;a<t;a++)n=this.copyBit(a,8,n);if(this.parsedFormatInfo=Ct.decodeFormatInformation(e,n),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new b}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return At.getVersionForNumber(t);let n=0;const r=e-11;for(let s=5;s>=0;s--)for(let t=e-9;t>=r;t--)n=this.copyBit(t,s,n);let a=At.decodeVersionInformation(n);if(null!==a&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;n=0;for(let s=5;s>=0;s--)for(let t=e-9;t>=r;t--)n=this.copyBit(s,t,n);if(a=At.decodeVersionInformation(n),null!==a&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new b}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=xt.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const a=t.buildFunctionPattern();let s=!0;const i=new Uint8Array(t.getTotalCodewords());let o=0,l=0,c=0;for(let u=r-1;u>0;u-=2){6===u&&u--;for(let e=0;e<r;e++){const t=s?r-1-e:e;for(let e=0;e<2;e++)a.get(u-e,t)||(c++,l<<=1,this.bitMatrix.get(u-e,t)&&(l|=1),8===c&&(i[o++]=l,c=0,l=0))}s=!s}if(o!==t.getTotalCodewords())throw new b;return i}remask(){if(null===this.parsedFormatInfo)return;const e=xt.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,a=e.getHeight();r<a;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class Tt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new d;const r=t.getECBlocksForLevel(n);let a=0;const s=r.getECBlocks();for(const d of s)a+=d.getCount();const i=new Array(a);let o=0;for(const d of s)for(let e=0;e<d.getCount();e++){const e=d.getDataCodewords(),t=r.getECCodewordsPerBlock()+e;i[o++]=new Tt(e,new Uint8Array(t))}const l=i[0].codewords.length;let c=i.length-1;for(;c>=0&&i[c].codewords.length!==l;)c--;c++;const u=l-r.getECCodewordsPerBlock();let h=0;for(let d=0;d<u;d++)for(let t=0;t<o;t++)i[t].codewords[d]=e[h++];for(let d=c;d<o;d++)i[d].codewords[u]=e[h++];const f=i[0].codewords.length;for(let d=u;d<f;d++)for(let t=0;t<o;t++){const n=t<c?d:d+1;i[t].codewords[n]=e[h++]}return i}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(X||(X={}));class _t{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,_t.FOR_BITS.set(r,this),_t.FOR_VALUE.set(e,this)}static forBits(e){const t=_t.FOR_BITS.get(e);if(void 0===t)throw new d;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return n=t<=9?0:t<=26?1:2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof _t))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}_t.FOR_BITS=new Map,_t.FOR_VALUE=new Map,_t.TERMINATOR=new _t(X.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),_t.NUMERIC=new _t(X.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),_t.ALPHANUMERIC=new _t(X.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),_t.STRUCTURED_APPEND=new _t(X.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),_t.BYTE=new _t(X.BYTE,"BYTE",Int32Array.from([8,16,16]),4),_t.ECI=new _t(X.ECI,"ECI",Int32Array.from([0,0,0]),7),_t.KANJI=new _t(X.KANJI,"KANJI",Int32Array.from([8,10,12]),8),_t.FNC1_FIRST_POSITION=new _t(X.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),_t.FNC1_SECOND_POSITION=new _t(X.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),_t.HANZI=new _t(X.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class jt{static decode(e,t,n,r){const a=new gt(e);let s=new T;const i=new Array;let o=-1,l=-1;try{let e,n=null,c=!1;do{if(a.available()<4)e=_t.TERMINATOR;else{const t=a.readBits(4);e=_t.forBits(t)}switch(e){case _t.TERMINATOR:break;case _t.FNC1_FIRST_POSITION:case _t.FNC1_SECOND_POSITION:c=!0;break;case _t.STRUCTURED_APPEND:if(a.available()<16)throw new b;o=a.readBits(8),l=a.readBits(8);break;case _t.ECI:const u=jt.parseECIValue(a);if(n=E.getCharacterSetECIByValue(u),null===n)throw new b;break;case _t.HANZI:const d=a.readBits(4),h=a.readBits(e.getCharacterCountBits(t));d===jt.GB2312_SUBSET&&jt.decodeHanziSegment(a,s,h);break;default:const f=a.readBits(e.getCharacterCountBits(t));switch(e){case _t.NUMERIC:jt.decodeNumericSegment(a,s,f);break;case _t.ALPHANUMERIC:jt.decodeAlphanumericSegment(a,s,f,c);break;case _t.BYTE:jt.decodeByteSegment(a,s,f,n,i,r);break;case _t.KANJI:jt.decodeKanjiSegment(a,s,f);break;default:throw new b}}}while(e!==_t.TERMINATOR)}catch(c){throw new b}return new Z(e,s.toString(),0===i.length?null:i,null===n?null:n.toString(),o,l)}static decodeHanziSegment(e,t,n){if(13*n>e.available())throw new b;const r=new Uint8Array(2*n);let a=0;for(;n>0;){const t=e.readBits(13);let s=t/96<<8&4294967295|t%96;s+=s<959?41377:42657,r[a]=s>>8&255,r[a+1]=255&s,a+=2,n--}try{t.append(x.decode(r,I.GB2312))}catch(s){throw new b(s)}}static decodeKanjiSegment(e,t,n){if(13*n>e.available())throw new b;const r=new Uint8Array(2*n);let a=0;for(;n>0;){const t=e.readBits(13);let s=t/192<<8&4294967295|t%192;s+=s<7936?33088:49472,r[a]=s>>8,r[a+1]=s,a+=2,n--}try{t.append(x.decode(r,I.SHIFT_JIS))}catch(s){throw new b(s)}}static decodeByteSegment(e,t,n,r,a,s){if(8*n>e.available())throw new b;const i=new Uint8Array(n);for(let c=0;c<n;c++)i[c]=e.readBits(8);let o;o=null===r?I.guessEncoding(i,s):r.getName();try{t.append(x.decode(i,o))}catch(l){throw new b(l)}a.push(i)}static toAlphaNumericChar(e){if(e>=jt.ALPHANUMERIC_CHARS.length)throw new b;return jt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const a=t.length();for(;n>1;){if(e.available()<11)throw new b;const r=e.readBits(11);t.append(jt.toAlphaNumericChar(Math.floor(r/45))),t.append(jt.toAlphaNumericChar(r%45)),n-=2}if(1===n){if(e.available()<6)throw new b;t.append(jt.toAlphaNumericChar(e.readBits(6)))}if(r)for(let s=a;s<t.length();s++)"%"===t.charAt(s)&&(s<t.length()-1&&"%"===t.charAt(s+1)?t.deleteCharAt(s+1):t.setCharAt(s,String.fromCharCode(29)))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new b;const r=e.readBits(10);if(r>=1e3)throw new b;t.append(jt.toAlphaNumericChar(Math.floor(r/100))),t.append(jt.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(jt.toAlphaNumericChar(r%10)),n-=3}if(2===n){if(e.available()<7)throw new b;const n=e.readBits(7);if(n>=100)throw new b;t.append(jt.toAlphaNumericChar(Math.floor(n/10))),t.append(jt.toAlphaNumericChar(n%10))}else if(1===n){if(e.available()<4)throw new b;const n=e.readBits(4);if(n>=10)throw new b;t.append(jt.toAlphaNumericChar(n))}}static parseECIValue(e){const t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new b}}jt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",jt.GB2312_SUBSET=1;class Rt{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Dt{constructor(){this.rsDecoder=new re(ee.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(_.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new It(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(a){r=a}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const e=this.decodeBitMatrixParser(n,t);return e.setOther(new Rt(!0)),e}catch(a){if(null!==r)throw r;throw a}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),a=e.readCodewords(),s=Tt.getDataBlocks(a,n,r);let i=0;for(const c of s)i+=c.getNumDataCodewords();const o=new Uint8Array(i);let l=0;for(const c of s){const e=c.getCodewords(),t=c.getNumDataCodewords();this.correctErrors(e,t);for(let n=0;n<t;n++)o[l++]=e[n]}return jt.decode(o,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new f}for(let a=0;a<t;a++)e[a]=n[a]}}class Mt extends oe{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,a=(this.getY()+e)/2,s=(this.estimatedModuleSize+n)/2;return new Mt(r,a,s)}}class Ot{constructor(e,t,n,r,a,s,i){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=a,this.moduleSize=s,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,a=new Int32Array(3),s=this.image;for(let i=0;i<t;i++){const t=r+(0===(1&i)?Math.floor((i+1)/2):-Math.floor((i+1)/2));a[0]=0,a[1]=0,a[2]=0;let o=e;for(;o<n&&!s.get(o,t);)o++;let l=0;for(;o<n;){if(s.get(o,t))if(1===l)a[1]++;else if(2===l){if(this.foundPatternCross(a)){const e=this.handlePossibleCenter(a,t,o);if(null!==e)return e}a[0]=a[2],a[1]=1,a[2]=0,l=1}else a[++l]++;else 1===l&&l++,a[l]++;o++}if(this.foundPatternCross(a)){const e=this.handlePossibleCenter(a,t,n);if(null!==e)return e}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new j}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const a=this.image,s=a.getHeight(),i=this.crossCheckStateCount;i[0]=0,i[1]=0,i[2]=0;let o=e;for(;o>=0&&a.get(t,o)&&i[1]<=n;)i[1]++,o--;if(o<0||i[1]>n)return NaN;for(;o>=0&&!a.get(t,o)&&i[0]<=n;)i[0]++,o--;if(i[0]>n)return NaN;for(o=e+1;o<s&&a.get(t,o)&&i[1]<=n;)i[1]++,o++;if(o===s||i[1]>n)return NaN;for(;o<s&&!a.get(t,o)&&i[2]<=n;)i[2]++,o++;if(i[2]>n)return NaN;const l=i[0]+i[1]+i[2];return 5*Math.abs(l-r)>=2*r?NaN:this.foundPatternCross(i)?Ot.centerFromEnd(i,o):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],a=Ot.centerFromEnd(e,n),s=this.crossCheckVertical(t,a,2*e[1],r);if(!isNaN(s)){const t=(e[0]+e[1]+e[2])/3;for(const e of this.possibleCenters)if(e.aboutEquals(t,s,a))return e.combineEstimate(s,a,t);const n=new Mt(a,s,t);this.possibleCenters.push(n),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(n)}return null}}class kt extends oe{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,void 0===r&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,a=(this.count*this.getX()+t)/r,s=(this.count*this.getY()+e)/r,i=(this.count*this.estimatedModuleSize+n)/r;return new kt(a,s,i,r)}}class Pt{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Lt{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=null!==e&&void 0!==e&&void 0!==e.get(C.TRY_HARDER),n=null!==e&&void 0!==e&&void 0!==e.get(C.PURE_BARCODE),r=this.image,a=r.getHeight(),s=r.getWidth();let i=Math.floor(3*a/(4*Lt.MAX_MODULES));(i<Lt.MIN_SKIP||t)&&(i=Lt.MIN_SKIP);let o=!1;const l=new Int32Array(5);for(let u=i-1;u<a&&!o;u+=i){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let e=0;for(let t=0;t<s;t++)if(r.get(t,u))1===(1&e)&&e++,l[e]++;else if(0===(1&e))if(4===e)if(Lt.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,u,t,n)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;continue}if(i=2,!0===this.hasSkipped)o=this.haveMultiplyConfirmedCenters();else{const e=this.findRowSkip();e>l[2]&&(u+=e-l[2]-i,t=s-1)}e=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;else l[++e]++;else l[e]++;Lt.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,u,s,n)&&(i=l[0],this.hasSkipped&&(o=this.haveMultiplyConfirmedCenters()))}const c=this.selectBestPatterns();return oe.orderBestPatterns(c),new Pt(c)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let a=0;a<5;a++){const n=e[a];if(0===n)return!1;t+=n}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const a=this.getCrossCheckStateCount();let s=0;const i=this.image;for(;e>=s&&t>=s&&i.get(t-s,e-s);)a[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!i.get(t-s,e-s)&&a[1]<=n;)a[1]++,s++;if(e<s||t<s||a[1]>n)return!1;for(;e>=s&&t>=s&&i.get(t-s,e-s)&&a[0]<=n;)a[0]++,s++;if(a[0]>n)return!1;const o=i.getHeight(),l=i.getWidth();for(s=1;e+s<o&&t+s<l&&i.get(t+s,e+s);)a[2]++,s++;if(e+s>=o||t+s>=l)return!1;for(;e+s<o&&t+s<l&&!i.get(t+s,e+s)&&a[3]<n;)a[3]++,s++;if(e+s>=o||t+s>=l||a[3]>=n)return!1;for(;e+s<o&&t+s<l&&i.get(t+s,e+s)&&a[4]<n;)a[4]++,s++;if(a[4]>=n)return!1;const c=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(c-r)<2*r&&Lt.foundPatternCross(a)}crossCheckVertical(e,t,n,r){const a=this.image,s=a.getHeight(),i=this.getCrossCheckStateCount();let o=e;for(;o>=0&&a.get(t,o);)i[2]++,o--;if(o<0)return NaN;for(;o>=0&&!a.get(t,o)&&i[1]<=n;)i[1]++,o--;if(o<0||i[1]>n)return NaN;for(;o>=0&&a.get(t,o)&&i[0]<=n;)i[0]++,o--;if(i[0]>n)return NaN;for(o=e+1;o<s&&a.get(t,o);)i[2]++,o++;if(o===s)return NaN;for(;o<s&&!a.get(t,o)&&i[3]<n;)i[3]++,o++;if(o===s||i[3]>=n)return NaN;for(;o<s&&a.get(t,o)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return NaN;const l=i[0]+i[1]+i[2]+i[3]+i[4];return 5*Math.abs(l-r)>=2*r?NaN:Lt.foundPatternCross(i)?Lt.centerFromEnd(i,o):NaN}crossCheckHorizontal(e,t,n,r){const a=this.image,s=a.getWidth(),i=this.getCrossCheckStateCount();let o=e;for(;o>=0&&a.get(o,t);)i[2]++,o--;if(o<0)return NaN;for(;o>=0&&!a.get(o,t)&&i[1]<=n;)i[1]++,o--;if(o<0||i[1]>n)return NaN;for(;o>=0&&a.get(o,t)&&i[0]<=n;)i[0]++,o--;if(i[0]>n)return NaN;for(o=e+1;o<s&&a.get(o,t);)i[2]++,o++;if(o===s)return NaN;for(;o<s&&!a.get(o,t)&&i[3]<n;)i[3]++,o++;if(o===s||i[3]>=n)return NaN;for(;o<s&&a.get(o,t)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return NaN;const l=i[0]+i[1]+i[2]+i[3]+i[4];return 5*Math.abs(l-r)>=r?NaN:Lt.foundPatternCross(i)?Lt.centerFromEnd(i,o):NaN}handlePossibleCenter(e,t,n,r){const a=e[0]+e[1]+e[2]+e[3]+e[4];let s=Lt.centerFromEnd(e,n),i=this.crossCheckVertical(t,Math.floor(s),e[2],a);if(!isNaN(i)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(i),e[2],a),!isNaN(s)&&(!r||this.crossCheckDiagonal(Math.floor(i),Math.floor(s),e[2],a)))){const e=a/7;let t=!1;const n=this.possibleCenters;for(let r=0,a=n.length;r<a;r++){const a=n[r];if(a.aboutEquals(e,i,s)){n[r]=a.combineEstimate(i,s,e),t=!0;break}}if(!t){const t=new kt(s,i,e);n.push(t),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(t)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let e=null;for(const t of this.possibleCenters)if(t.getCount()>=Lt.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-t.getX())-Math.abs(e.getY()-t.getY()))/2);e=t}return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const s of this.possibleCenters)s.getCount()>=Lt.CENTER_QUORUM&&(e++,t+=s.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let a=0;for(const s of this.possibleCenters)a+=Math.abs(s.getEstimatedModuleSize()-r);return a<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new j;const t=this.possibleCenters;let n;if(e>3){let r=0,a=0;for(const e of this.possibleCenters){const t=e.getEstimatedModuleSize();r+=t,a+=t*t}n=r/e;let s=Math.sqrt(a/e-n*n);t.sort((e,t)=>{const r=Math.abs(t.getEstimatedModuleSize()-n),a=Math.abs(e.getEstimatedModuleSize()-n);return r<a?-1:r>a?1:0});const i=Math.max(.2*n,s);for(let e=0;e<t.length&&t.length>3;e++){const r=t[e];Math.abs(r.getEstimatedModuleSize()-n)>i&&(t.splice(e,1),e--)}}if(t.length>3){let e=0;for(const n of t)e+=n.getEstimatedModuleSize();n=e/t.length,t.sort((e,t)=>{if(t.getCount()===e.getCount()){const r=Math.abs(t.getEstimatedModuleSize()-n),a=Math.abs(e.getEstimatedModuleSize()-n);return r<a?1:r>a?-1:0}return t.getCount()-e.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}Lt.CENTER_QUORUM=2,Lt.MIN_SKIP=3,Lt.MAX_MODULES=57;class Ft{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null===e||void 0===e?null:e.get(C.NEED_RESULT_POINT_CALLBACK);const t=new Lt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),a=this.calculateModuleSize(t,n,r);if(a<1)throw new j("No pattern found in proccess finder.");const s=Ft.computeDimension(t,n,r,a),i=At.getProvisionalVersionForDimension(s),o=i.getDimensionForVersion()-7;let l=null;if(i.getAlignmentPatternCenters().length>0){const e=n.getX()-t.getX()+r.getX(),s=n.getY()-t.getY()+r.getY(),i=1-3/o,c=Math.floor(t.getX()+i*(e-t.getX())),u=Math.floor(t.getY()+i*(s-t.getY()));for(let t=4;t<=16;t<<=1)try{l=this.findAlignmentInRegion(a,c,u,t);break}catch(h){if(!(h instanceof j))throw h}}const c=Ft.createTransform(t,n,r,l,s),u=Ft.sampleGrid(this.image,c,s);let d;return d=null===l?[r,t,n]:[r,t,n,l],new le(u,d)}static createTransform(e,t,n,r,a){const s=a-3.5;let i,o,l,c;return null!==r?(i=r.getX(),o=r.getY(),l=s-3,c=l):(i=t.getX()-e.getX()+n.getX(),o=t.getY()-e.getY()+n.getY(),l=s,c=s),he.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,l,c,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),i,o,n.getX(),n.getY())}static sampleGrid(e,t,n){return me.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const a=se.round(oe.distance(e,t)/r),s=se.round(oe.distance(e,n)/r);let i=Math.floor((a+s)/2)+7;switch(3&i){case 0:i++;break;case 2:i--;break;case 3:throw new j("Dimensions could be not found.")}return i}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let a=this.sizeOfBlackWhiteBlackRun(e,t,n,r),s=1,i=e-(n-e);i<0?(s=e/(e-i),i=0):i>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(i-e),i=this.image.getWidth()-1);let o=Math.floor(t-(r-t)*s);return s=1,o<0?(s=t/(t-o),o=0):o>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(o-t),o=this.image.getHeight()-1),i=Math.floor(e+(i-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,t,i,o),a-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const a=Math.abs(r-t)>Math.abs(n-e);if(a){let a=e;e=t,t=a,a=n,n=r,r=a}const s=Math.abs(n-e),i=Math.abs(r-t);let o=-s/2;const l=e<n?1:-1,c=t<r?1:-1;let u=0;const d=n+l;for(let h=e,f=t;h!==d;h+=l){const n=a?f:h,l=a?h:f;if(1===u===this.image.get(n,l)){if(2===u)return se.distance(h,f,e,t);u++}if(o+=i,o>0){if(f===r)break;f+=c,o-=s}}return 2===u?se.distance(n+l,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const a=Math.floor(r*e),s=Math.max(0,t-a),i=Math.min(this.image.getWidth()-1,t+a);if(i-s<3*e)throw new j("Alignment top exceeds estimated module size.");const o=Math.max(0,n-a),l=Math.min(this.image.getHeight()-1,n+a);if(l-o<3*e)throw new j("Alignment bottom exceeds estimated module size.");return new Ot(this.image,s,o,i-s,l-o,e,this.resultPointCallback).find()}}class Bt{constructor(){this.decoder=new Dt}getDecoder(){return this.decoder}decode(e,t){let n,r;if(void 0!==t&&null!==t&&void 0!==t.get(C.PURE_BARCODE)){const a=Bt.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,t),r=Bt.NO_POINTS}else{const a=new Ft(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(a.getBits(),t),r=a.getPoints()}n.getOther()instanceof Rt&&n.getOther().applyMirroredCorrection(r);const a=new U(n.getText(),n.getRawBytes(),void 0,r,H.QR_CODE,void 0),s=n.getByteSegments();null!==s&&a.putMetadata(q.BYTE_SEGMENTS,s);const i=n.getECLevel();return null!==i&&a.putMetadata(q.ERROR_CORRECTION_LEVEL,i),n.hasStructuredAppend()&&(a.putMetadata(q.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),a.putMetadata(q.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),a}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new j;const r=this.moduleSize(t,e);let a=t[1],s=n[1],i=t[0],o=n[0];if(i>=o||a>=s)throw new j;if(s-a!==o-i&&(o=i+(s-a),o>=e.getWidth()))throw new j;const l=Math.round((o-i+1)/r),c=Math.round((s-a+1)/r);if(l<=0||c<=0)throw new j;if(c!==l)throw new j;const u=Math.floor(r/2);a+=u,i+=u;const d=i+Math.floor((l-1)*r)-o;if(d>0){if(d>u)throw new j;i-=d}const h=a+Math.floor((c-1)*r)-s;if(h>0){if(h>u)throw new j;a-=h}const f=new _(l,c);for(let m=0;m<c;m++){const t=a+Math.floor(m*r);for(let n=0;n<l;n++)e.get(i+Math.floor(n*r),t)&&f.set(n,m)}return f}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let a=e[0],s=e[1],i=!0,o=0;for(;a<r&&s<n;){if(i!==t.get(a,s)){if(5===++o)break;i=!i}a++,s++}if(a===r||s===n)throw new j;return(a-e[0])/7}}Bt.NO_POINTS=new Array;class Ut{PDF417Common(){}static getBitCountSum(e){return se.sum(e)}static toIntArray(e){if(null==e||!e.length)return Ut.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=v.binarySearch(Ut.SYMBOL_TABLE,262143&e);return t<0?-1:(Ut.CODEWORD_TABLE[t]-1)%Ut.NUMBER_OF_CODEWORDS}}Ut.NUMBER_OF_CODEWORDS=929,Ut.MAX_CODEWORDS_IN_BARCODE=Ut.NUMBER_OF_CODEWORDS-1,Ut.MIN_ROWS_IN_BARCODE=3,Ut.MAX_ROWS_IN_BARCODE=90,Ut.MODULES_IN_CODEWORD=17,Ut.MODULES_IN_STOP_PATTERN=18,Ut.BARS_IN_MODULE=8,Ut.EMPTY_INT_ARRAY=new Int32Array([]),Ut.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ut.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class zt{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Ht{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),a=Ht.detect(n,r);return a.length||(r=r.clone(),r.rotate180(),a=Ht.detect(n,r)),new zt(r,a)}static detect(e,t){const n=new Array;let r=0,a=0,s=!1;for(;r<t.getHeight();){const i=Ht.findVertices(t,r,a);if(null!=i[0]||null!=i[3]){if(s=!0,n.push(i),!e)break;null!=i[2]?(a=Math.trunc(i[2].getX()),r=Math.trunc(i[2].getY())):(a=Math.trunc(i[4].getX()),r=Math.trunc(i[4].getY()))}else{if(!s)break;s=!1,a=0;for(const e of n)null!=e[1]&&(r=Math.trunc(Math.max(r,e[1].getY()))),null!=e[3]&&(r=Math.max(r,Math.trunc(e[3].getY())));r+=Ht.ROW_STEP}}return n}static findVertices(e,t,n){const r=e.getHeight(),a=e.getWidth(),s=new Array(8);return Ht.copyToResult(s,Ht.findRowsWithPattern(e,r,a,t,n,Ht.START_PATTERN),Ht.INDEXES_START_PATTERN),null!=s[4]&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),Ht.copyToResult(s,Ht.findRowsWithPattern(e,r,a,t,n,Ht.STOP_PATTERN),Ht.INDEXES_STOP_PATTERN),s}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,a,s){const i=new Array(4);let o=!1;const l=new Int32Array(s.length);for(;r<t;r+=Ht.ROW_STEP){let t=Ht.findGuardPattern(e,a,r,n,!1,s,l);if(null!=t){for(;r>0;){const i=Ht.findGuardPattern(e,a,--r,n,!1,s,l);if(null==i){r++;break}t=i}i[0]=new oe(t[0],r),i[1]=new oe(t[1],r),o=!0;break}}let c=r+1;if(o){let r=0,a=Int32Array.from([Math.trunc(i[0].getX()),Math.trunc(i[1].getX())]);for(;c<t;c++){const t=Ht.findGuardPattern(e,a[0],c,n,!1,s,l);if(null!=t&&Math.abs(a[0]-t[0])<Ht.MAX_PATTERN_DRIFT&&Math.abs(a[1]-t[1])<Ht.MAX_PATTERN_DRIFT)a=t,r=0;else{if(r>Ht.SKIPPED_ROW_COUNT_MAX)break;r++}}c-=r+1,i[2]=new oe(a[0],c),i[3]=new oe(a[1],c)}return c-r<Ht.BARCODE_MIN_HEIGHT&&v.fill(i,null),i}static findGuardPattern(e,t,n,r,a,s,i){v.fillWithin(i,0,i.length,0);let o=t,l=0;for(;e.get(o,n)&&o>0&&l++<Ht.MAX_PIXEL_DRIFT;)o--;let c=o,u=0,d=s.length;for(let h=a;c<r;c++)if(e.get(c,n)!==h)i[u]++;else{if(u===d-1){if(Ht.patternMatchVariance(i,s,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return new Int32Array([o,c]);o+=i[0]+i[1],g.arraycopy(i,2,i,0,u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,h=!h}return u===d-1&&Ht.patternMatchVariance(i,s,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE?new Int32Array([o,c-1]):null}static patternMatchVariance(e,t,n){let r=e.length,a=0,s=0;for(let l=0;l<r;l++)a+=e[l],s+=t[l];if(a<s)return 1/0;let i=a/s;n*=i;let o=0;for(let l=0;l<r;l++){let r=e[l],a=t[l]*i,s=r>a?r-a:a-r;if(s>n)return 1/0;o+=s}return o/a}}Ht.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ht.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ht.MAX_AVG_VARIANCE=.42,Ht.MAX_INDIVIDUAL_VARIANCE=.8,Ht.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ht.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ht.MAX_PIXEL_DRIFT=3,Ht.MAX_PATTERN_DRIFT=5,Ht.SKIPPED_ROW_COUNT_MAX=25,Ht.ROW_STEP=5,Ht.BARCODE_MIN_HEIGHT=10;class Vt{constructor(e,t){if(0===t.length)throw new d;this.field=e;let n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-e),g.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let e=0;for(let t of this.coefficients)e=this.field.add(e,t);return e}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let e=t;t=n,n=e}let r=new Int32Array(n.length),a=n.length-t.length;g.arraycopy(n,0,r,0,a);for(let s=a;s<n.length;s++)r[s]=this.field.add(t[s-a],n[s]);return new Vt(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Vt?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Vt(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,a=r.length,s=new Int32Array(n+a-1);for(let i=0;i<n;i++){let e=t[i];for(let t=0;t<a;t++)s[i+t]=this.field.add(s[i+t],this.field.multiply(e,r[t]))}return new Vt(this.field,s)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new Vt(this.field,t)}multiplyScalar(e){if(0===e)return new Vt(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new Vt(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new d;if(0===t)return new Vt(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let a=0;a<n;a++)r[a]=this.field.multiply(this.coefficients[a],t);return new Vt(this.field,r)}toString(){let e=new T;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Gt{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new d;return this.logTable[e]}inverse(e){if(0===e)throw new J;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Wt extends Gt{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new Vt(this,new Int32Array([0])),this.one=new Vt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new d;if(0===t)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new Vt(this,n)}}Wt.PDF417_GF=new Wt(Ut.NUMBER_OF_CODEWORDS,3);class Yt{constructor(){this.field=Wt.PDF417_GF}decode(e,t,n){let r=new Vt(this.field,e),a=new Int32Array(t),s=!1;for(let f=t;f>0;f--){let e=r.evaluateAt(this.field.exp(f));a[t-f]=e,0!==e&&(s=!0)}if(!s)return 0;let i=this.field.getOne();if(null!=n)for(const f of n){let t=this.field.exp(e.length-1-f),n=new Vt(this.field,new Int32Array([this.field.subtract(0,t),1]));i=i.multiply(n)}let o=new Vt(this.field,a),l=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),o,t),c=l[0],u=l[1],d=this.findErrorLocations(c),h=this.findErrorMagnitudes(u,c,d);for(let m=0;m<d.length;m++){let t=e.length-1-this.field.log(d[m]);if(t<0)throw f.getChecksumInstance();e[t]=this.field.subtract(e[t],h[m])}return d.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let n=e;e=t,t=n}let r=e,a=t,s=this.field.getZero(),i=this.field.getOne();for(;a.getDegree()>=Math.round(n/2);){let e=r,t=s;if(r=a,s=i,r.isZero())throw f.getChecksumInstance();a=e;let n=this.field.getZero(),o=r.getCoefficient(r.getDegree()),l=this.field.inverse(o);for(;a.getDegree()>=r.getDegree()&&!a.isZero();){let e=a.getDegree()-r.getDegree(),t=this.field.multiply(a.getCoefficient(a.getDegree()),l);n=n.add(this.field.buildMonomial(e,t)),a=a.subtract(r.multiplyByMonomial(e,t))}i=n.multiply(s).subtract(t).negative()}let o=i.getCoefficient(0);if(0===o)throw f.getChecksumInstance();let l=this.field.inverse(o);return[i.multiply(l),a.multiply(l)]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let a=1;a<this.field.getSize()&&r<t;a++)0===e.evaluateAt(a)&&(n[r]=this.field.inverse(a),r++);if(r!==t)throw f.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),a=new Int32Array(r);for(let l=1;l<=r;l++)a[r-l]=this.field.multiply(l,t.getCoefficient(l));let s=new Vt(this.field,a),i=n.length,o=new Int32Array(i);for(let l=0;l<i;l++){let t=this.field.inverse(n[l]),r=this.field.subtract(0,e.evaluateAt(t)),a=this.field.inverse(s.evaluateAt(t));o[l]=this.field.multiply(r,a)}return o}}class Xt{constructor(e,t,n,r,a){e instanceof Xt?this.constructor_2(e):this.constructor_1(e,t,n,r,a)}constructor_1(e,t,n,r,a){const s=null==t||null==n,i=null==r||null==a;if(s&&i)throw new j;s?(t=new oe(0,r.getY()),n=new oe(0,a.getY())):i&&(r=new oe(e.getWidth()-1,t.getY()),a=new oe(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),a.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new Xt(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,a=this.bottomLeft,s=this.topRight,i=this.bottomRight;if(e>0){let t=n?this.topLeft:this.topRight,a=Math.trunc(t.getY()-e);a<0&&(a=0);let i=new oe(t.getX(),a);n?r=i:s=i}if(t>0){let e=n?this.bottomLeft:this.bottomRight,r=Math.trunc(e.getY()+t);r>=this.image.getHeight()&&(r=this.image.getHeight()-1);let s=new oe(e.getX(),r);n?a=s:i=s}return new Xt(this.image,r,a,s,i)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Qt{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class qt{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(e,r,a,s,i,o){if("%%"===e)return"%";if(void 0===t[++n])return;e=s?parseInt(s.substr(1)):void 0;let l,c=i?parseInt(i.substr(1)):void 0;switch(o){case"s":l=t[n];break;case"c":l=t[n][0];break;case"f":l=parseFloat(t[n]).toFixed(e);break;case"p":l=parseFloat(t[n]).toPrecision(e);break;case"e":l=parseFloat(t[n]).toExponential(e);break;case"x":l=parseInt(t[n]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[n],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(a),d=a&&a[0]+""==="0"?"0":" ";for(;l.length<u;)l=void 0!==r?l+d:d+l;return l}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,r)}format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.buffer+=qt.form(e,n)}toString(){return this.buffer}}class Zt{constructor(e){this.boundingBox=new Xt(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let n=1;n<Zt.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],null!=t))return t;if(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],null!=t))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new qt;let t=0;for(const n of this.codewords)null!=n?e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue()):e.format("%3d:    |   %n",t++);return e.toString()}}Zt.MAX_NEARBY_DISTANCE=5;class Kt{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const a={getKey:()=>n,getValue:()=>r};a.getValue()>e?(e=a.getValue(),t=[],t.push(a.getKey())):a.getValue()===e&&t.push(a.getKey())}return Ut.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class $t extends Zt{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),i=this.imageRowToCodewordIndex(Math.trunc(a.getY())),o=-1,l=1,c=0;for(let u=s;u<i;u++){if(null==t[u])continue;let n=t[u],r=n.getRowNumber()-o;if(0===r)c++;else if(1===r)l=Math.max(l,c),c=1,o=n.getRowNumber();else if(r<0||n.getRowNumber()>=e.getRowCount()||r>u)t[u]=null;else{let e;e=l>2?(l-2)*r:r;let a=e>=u;for(let n=1;n<=e&&!a;n++)a=null!=t[u-n];a?t[u]=null:(o=n.getRowNumber(),c=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(null!=n){let e=n.getRowNumber();if(e>=t.length)continue;t[e]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),i=this.getCodewords(),o=-1;for(let l=a;l<s;l++){if(null==i[l])continue;let t=i[l];t.setRowNumberAsRowIndicatorColumn();let n=t.getRowNumber()-o;0===n||(1===n?o=t.getRowNumber():t.getRowNumber()>=e.getRowCount()?i[l]=null:o=t.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Kt,n=new Kt,r=new Kt,a=new Kt;for(let i of e){if(null==i)continue;i.setRowNumberAsRowIndicatorColumn();let e=i.getValue()%30,s=i.getRowNumber();switch(this._isLeft||(s+=2),s%3){case 0:n.setValue(3*e+1);break;case 1:a.setValue(e/3),r.setValue(e%3);break;case 2:t.setValue(e+1)}}if(0===t.getValue().length||0===n.getValue().length||0===r.getValue().length||0===a.getValue().length||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<Ut.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>Ut.MAX_ROWS_IN_BARCODE)return null;let s=new Qt(t.getValue()[0],n.getValue()[0],r.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(e,s),s}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(null==e[n])continue;let a=r.getValue()%30,s=r.getRowNumber();if(s>t.getRowCount())e[n]=null;else switch(this._isLeft||(s+=2),s%3){case 0:3*a+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(a/3)===t.getErrorCorrectionLevel()&&a%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:a+1!==t.getColumnCount()&&(e[n]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class Jt{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e,t=Ut.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let e=this.detectionResultColumns[t].getCodewords();for(let n=0;n<e.length;n++)null!=e[n]&&(e[n].hasValidRowNumber()||this.adjustRowNumbers(t,n,e))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(let t=1;t<=this.barcodeColumnCount;t++){let r=this.detectionResultColumns[t].getCodewords()[n];null!=r&&(r.setRowNumber(e[n].getRowNumber()),r.hasValidRowNumber()||(this.detectionResultColumns[t].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),a=0;for(let t=this.barcodeColumnCount+1;t>0&&a<this.ADJUST_ROW_NUMBER_SKIP;t--){let s=this.detectionResultColumns[t].getCodewords()[n];null!=s&&(a=Jt.adjustRowNumberIfValid(r,a,s),s.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),a=0;for(let t=1;t<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;t++){let s=this.detectionResultColumns[t].getCodewords()[n];null!=s&&(a=Jt.adjustRowNumberIfValid(r,a,s),s.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],a=this.detectionResultColumns[e-1].getCodewords(),s=a;null!=this.detectionResultColumns[e+1]&&(s=this.detectionResultColumns[e+1].getCodewords());let i=new Array(14);i[2]=a[t],i[3]=s[t],t>0&&(i[0]=n[t-1],i[4]=a[t-1],i[5]=s[t-1]),t>1&&(i[8]=n[t-2],i[10]=a[t-2],i[11]=s[t-2]),t<n.length-1&&(i[1]=n[t+1],i[6]=a[t+1],i[7]=s[t+1]),t<n.length-2&&(i[9]=n[t+2],i[12]=a[t+2],i[13]=s[t+2]);for(let o of i)if(Jt.adjustRowNumber(r,o))return}static adjustRowNumber(e,t){return null!=t&&!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new qt;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let e=0;e<this.barcodeColumnCount+2;e++){if(null==this.detectionResultColumns[e]){t.format("    |   ");continue}let r=this.detectionResultColumns[e].getCodewords()[n];null!=r?t.format(" %3d|%3d",r.getRowNumber(),r.getValue()):t.format("    |   ")}t.format("%n")}return t.toString()}}class en{constructor(e,t,n,r){this.rowNumber=en.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==en.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}en.BARCODE_ROW_UNKNOWN=-1;class tn{static initialize(){for(let e=0;e<Ut.SYMBOL_TABLE.length;e++){let t=Ut.SYMBOL_TABLE[e],n=1&t;for(let r=0;r<Ut.BARS_IN_MODULE;r++){let a=0;for(;(1&t)===n;)a+=1,t>>=1;n=1&t,tn.RATIOS_TABLE[e]||(tn.RATIOS_TABLE[e]=new Array(Ut.BARS_IN_MODULE)),tn.RATIOS_TABLE[e][Ut.BARS_IN_MODULE-r-1]=Math.fround(a/Ut.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tn.getDecodedCodewordValue(tn.sampleBitCounts(e));return-1!==t?t:tn.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=se.sum(e),n=new Int32Array(Ut.BARS_IN_MODULE),r=0,a=0;for(let s=0;s<Ut.MODULES_IN_CODEWORD;s++){let i=t/(2*Ut.MODULES_IN_CODEWORD)+s*t/Ut.MODULES_IN_CODEWORD;a+e[r]<=i&&(a+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=tn.getBitValue(e);return-1===Ut.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=se.sum(e),n=new Array(Ut.BARS_IN_MODULE);if(t>1)for(let s=0;s<n.length;s++)n[s]=Math.fround(e[s]/t);let r=ie.MAX_VALUE,a=-1;this.bSymbolTableReady||tn.initialize();for(let s=0;s<tn.RATIOS_TABLE.length;s++){let e=0,t=tn.RATIOS_TABLE[s];for(let a=0;a<Ut.BARS_IN_MODULE;a++){let s=Math.fround(t[a]-n[a]);if(e+=Math.fround(s*s),e>=r)break}e<r&&(r=e,a=Ut.SYMBOL_TABLE[s])}return a}}tn.bSymbolTableReady=!1,tn.RATIOS_TABLE=new Array(Ut.SYMBOL_TABLE.length).map(e=>new Array(Ut.BARS_IN_MODULE));class nn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class rn{static parseLong(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}class an extends c{}an.kind="NullPointerException";class sn{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(null==e)throw new an;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new p;if(0!==n)for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class on extends c{}class ln extends sn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(super(),this.count=0,e<0)throw new d("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new on;t=w.MAX_VALUE}this.buf=v.copyOfUint8Array(this.buf,t)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new p;this.ensureCapacity(this.count+n),g.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return v.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function cn(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof n.g)return n.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let un;function dn(e){if("undefined"===typeof un&&(un=cn()),null===un)throw new Error("BigInt is not supported!");return un(e)}function hn(){let e=[];e[0]=dn(1);let t=dn(900);e[1]=t;for(let n=2;n<16;n++)e[n]=e[n-1]*t;return e}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(Q||(Q={}));class fn{static decode(e,t){let n=new T(""),r=E.ISO8859_1;n.enableDecoding(r);let a=1,s=e[a++],i=new nn;for(;a<e[0];){switch(s){case fn.TEXT_COMPACTION_MODE_LATCH:a=fn.textCompaction(e,a,n);break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:a=fn.byteCompaction(s,e,r,a,n);break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a++]);break;case fn.NUMERIC_COMPACTION_MODE_LATCH:a=fn.numericCompaction(e,a,n);break;case fn.ECI_CHARSET:E.getCharacterSetECIByValue(e[a++]);break;case fn.ECI_GENERAL_PURPOSE:a+=2;break;case fn.ECI_USER_DEFINED:a++;break;case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=fn.decodeMacroBlock(e,a,i);break;case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:throw new b;default:a--,a=fn.textCompaction(e,a,n)}if(!(a<e.length))throw b.getFormatInstance();s=e[a++]}if(0===n.length())throw b.getFormatInstance();let o=new Z(null,n.toString(),null,t);return o.setOther(i),o}static decodeMacroBlock(e,t,n){if(t+fn.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw b.getFormatInstance();let r=new Int32Array(fn.NUMBER_OF_SEQUENCE_CODEWORDS);for(let i=0;i<fn.NUMBER_OF_SEQUENCE_CODEWORDS;i++,t++)r[i]=e[t];n.setSegmentIndex(w.parseInt(fn.decodeBase900toBase10(r,fn.NUMBER_OF_SEQUENCE_CODEWORDS)));let a=new T;t=fn.textCompaction(e,t,a),n.setFileId(a.toString());let s=-1;for(e[t]===fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let r=new T;t=fn.textCompaction(e,t+1,r),n.setFileName(r.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let a=new T;t=fn.textCompaction(e,t+1,a),n.setSender(a.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let s=new T;t=fn.textCompaction(e,t+1,s),n.setAddressee(s.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let i=new T;t=fn.numericCompaction(e,t+1,i),n.setSegmentCount(w.parseInt(i.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let o=new T;t=fn.numericCompaction(e,t+1,o),n.setTimestamp(rn.parseLong(o.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new T;t=fn.numericCompaction(e,t+1,l),n.setChecksum(w.parseInt(l.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let c=new T;t=fn.numericCompaction(e,t+1,c),n.setFileSize(rn.parseLong(c.toString()));break;default:throw b.getFormatInstance()}break;case fn.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw b.getFormatInstance()}if(-1!==s){let r=t-s;n.isLastSegment()&&r--,n.setOptionalData(v.copyOfRange(e,s,s+r))}return t}static textCompaction(e,t,n){let r=new Int32Array(2*(e[0]-t)),a=new Int32Array(2*(e[0]-t)),s=0,i=!1;for(;t<e[0]&&!i;){let n=e[t++];if(n<fn.TEXT_COMPACTION_MODE_LATCH)r[s]=n/30,r[s+1]=n%30,s+=2;else switch(n){case fn.TEXT_COMPACTION_MODE_LATCH:r[s++]=fn.TEXT_COMPACTION_MODE_LATCH;break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:t--,i=!0;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[s]=fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,n=e[t++],a[s]=n,s++}}return fn.decodeTextCompaction(r,a,s,n),t}static decodeTextCompaction(e,t,n,r){let a=Q.ALPHA,s=Q.ALPHA,i=0;for(;i<n;){let n=e[i],o="";switch(a){case Q.ALPHA:if(n<26)o=String.fromCharCode(65+n);else switch(n){case 26:o=" ";break;case fn.LL:a=Q.LOWER;break;case fn.ML:a=Q.MIXED;break;case fn.PS:s=a,a=Q.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[i]);break;case fn.TEXT_COMPACTION_MODE_LATCH:a=Q.ALPHA}break;case Q.LOWER:if(n<26)o=String.fromCharCode(97+n);else switch(n){case 26:o=" ";break;case fn.AS:s=a,a=Q.ALPHA_SHIFT;break;case fn.ML:a=Q.MIXED;break;case fn.PS:s=a,a=Q.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[i]);break;case fn.TEXT_COMPACTION_MODE_LATCH:a=Q.ALPHA}break;case Q.MIXED:if(n<fn.PL)o=fn.MIXED_CHARS[n];else switch(n){case fn.PL:a=Q.PUNCT;break;case 26:o=" ";break;case fn.LL:a=Q.LOWER;break;case fn.AL:a=Q.ALPHA;break;case fn.PS:s=a,a=Q.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[i]);break;case fn.TEXT_COMPACTION_MODE_LATCH:a=Q.ALPHA}break;case Q.PUNCT:if(n<fn.PAL)o=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:a=Q.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[i]);break;case fn.TEXT_COMPACTION_MODE_LATCH:a=Q.ALPHA}break;case Q.ALPHA_SHIFT:if(a=s,n<26)o=String.fromCharCode(65+n);else switch(n){case 26:o=" ";break;case fn.TEXT_COMPACTION_MODE_LATCH:a=Q.ALPHA}break;case Q.PUNCT_SHIFT:if(a=s,n<fn.PAL)o=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:a=Q.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[i]);break;case fn.TEXT_COMPACTION_MODE_LATCH:a=Q.ALPHA}}""!==o&&r.append(o),i++}}static byteCompaction(e,t,n,r,a){let s=new ln,i=0,o=0,l=!1;switch(e){case fn.BYTE_COMPACTION_MODE_LATCH:let e=new Int32Array(6),n=t[r++];for(;r<t[0]&&!l;)switch(e[i++]=n,o=900*o+n,n=t[r++],n){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,l=!0;break;default:if(i%5===0&&i>0){for(let e=0;e<6;++e)s.write(Number(dn(o)>>dn(8*(5-e))));o=0,i=0}}r===t[0]&&n<fn.TEXT_COMPACTION_MODE_LATCH&&(e[i++]=n);for(let t=0;t<i;t++)s.write(e[t]);break;case fn.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!l;){let e=t[r++];if(e<fn.TEXT_COMPACTION_MODE_LATCH)i++,o=900*o+e;else switch(e){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,l=!0}if(i%5===0&&i>0){for(let e=0;e<6;++e)s.write(Number(dn(o)>>dn(8*(5-e))));o=0,i=0}}}return a.append(x.decode(s.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,a=!1,s=new Int32Array(fn.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!a;){let i=e[t++];if(t===e[0]&&(a=!0),i<fn.TEXT_COMPACTION_MODE_LATCH)s[r]=i,r++;else switch(i){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:t--,a=!0}(r%fn.MAX_NUMERIC_CODEWORDS===0||i===fn.NUMERIC_COMPACTION_MODE_LATCH||a)&&r>0&&(n.append(fn.decodeBase900toBase10(s,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=dn(0);for(let a=0;a<t;a++)n+=fn.EXP900[t-a-1]*dn(e[a]);let r=n.toString();if("1"!==r.charAt(0))throw new b;return r.substring(1)}}fn.TEXT_COMPACTION_MODE_LATCH=900,fn.BYTE_COMPACTION_MODE_LATCH=901,fn.NUMERIC_COMPACTION_MODE_LATCH=902,fn.BYTE_COMPACTION_MODE_LATCH_6=924,fn.ECI_USER_DEFINED=925,fn.ECI_GENERAL_PURPOSE=926,fn.ECI_CHARSET=927,fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,fn.MACRO_PDF417_TERMINATOR=922,fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,fn.MAX_NUMERIC_CODEWORDS=15,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,fn.PL=25,fn.LL=27,fn.AS=27,fn.ML=28,fn.AL=28,fn.PS=29,fn.PAL=29,fn.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",fn.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",fn.EXP900=cn()?hn():[],fn.NUMBER_OF_SEQUENCE_CODEWORDS=2;class mn{constructor(){}static decode(e,t,n,r,a,s,i){let o,l=new Xt(e,t,n,r,a),c=null,u=null;for(let f=!0;;f=!1){if(null!=t&&(c=mn.getRowIndicatorColumn(e,l,t,!0,s,i)),null!=r&&(u=mn.getRowIndicatorColumn(e,l,r,!1,s,i)),o=mn.merge(c,u),null==o)throw j.getNotFoundInstance();let n=o.getBoundingBox();if(!f||null==n||!(n.getMinY()<l.getMinY()||n.getMaxY()>l.getMaxY()))break;l=n}o.setBoundingBox(l);let d=o.getBarcodeColumnCount()+1;o.setDetectionResultColumn(0,c),o.setDetectionResultColumn(d,u);let h=null!=c;for(let f=1;f<=d;f++){let t,n=h?f:d-f;if(void 0!==o.getDetectionResultColumn(n))continue;t=0===n||n===d?new $t(l,0===n):new Zt(l),o.setDetectionResultColumn(n,t);let r=-1,a=r;for(let c=l.getMinY();c<=l.getMaxY();c++){if(r=mn.getStartColumn(o,n,c,h),r<0||r>l.getMaxX()){if(-1===a)continue;r=a}let u=mn.detectCodeword(e,l.getMinX(),l.getMaxX(),h,r,c,s,i);null!=u&&(t.setCodeword(c,u),a=r,s=Math.min(s,u.getWidth()),i=Math.max(i,u.getWidth()))}}return mn.createDecoderResult(o)}static merge(e,t){if(null==e&&null==t)return null;let n=mn.getBarcodeMetadata(e,t);if(null==n)return null;let r=Xt.merge(mn.adjustBoundingBox(e),mn.adjustBoundingBox(t));return new Jt(n,r)}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let n=mn.getMax(t),r=0;for(let i of t)if(r+=n-i,i>0)break;let a=e.getCodewords();for(let i=0;r>0&&null==a[i];i++)r--;let s=0;for(let i=t.length-1;i>=0&&(s+=n-t[i],!(t[i]>0));i--);for(let i=a.length-1;s>0&&null==a[i];i--)s--;return e.getBoundingBox().addMissingRows(r,s,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,a,s){let i=new $t(t,r);for(let o=0;o<2;o++){let l=0===o?1:-1,c=Math.trunc(Math.trunc(n.getX()));for(let o=Math.trunc(Math.trunc(n.getY()));o<=t.getMaxY()&&o>=t.getMinY();o+=l){let t=mn.detectCodeword(e,0,e.getWidth(),r,c,o,a,s);null!=t&&(i.setCodeword(o,t),c=r?t.getStartX():t.getEndX())}}return i}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-mn.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===r.length){if(a<1||a>Ut.MAX_CODEWORDS_IN_BARCODE)throw j.getNotFoundInstance();n.setValue(a)}else r[0]!==a&&n.setValue(a)}static createDecoderResult(e){let t=mn.createBarcodeMatrix(e);mn.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array;for(let o=0;o<e.getBarcodeRowCount();o++)for(let i=0;i<e.getBarcodeColumnCount();i++){let l=t[o][i+1].getValue(),c=o*e.getBarcodeColumnCount()+i;0===l.length?n.push(c):1===l.length?r[c]=l[0]:(s.push(c),a.push(l))}let i=new Array(a.length);for(let o=0;o<i.length;o++)i[o]=a[o];return mn.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,Ut.toIntArray(n),Ut.toIntArray(s),i)}static createDecoderResultFromAmbiguousValues(e,t,n,r,a){let s=new Int32Array(r.length),i=100;for(;i-- >0;){for(let e=0;e<s.length;e++)t[r[e]]=a[e][s[e]];try{return mn.decodeCodewords(t,e,n)}catch(o){if(!(o instanceof f))throw o}if(0===s.length)throw f.getChecksumInstance();for(let e=0;e<s.length;e++){if(s[e]<a[e].length-1){s[e]++;break}if(s[e]=0,e===s.length-1)throw f.getChecksumInstance()}}throw f.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let e=0;e<t[r].length;e++)t[r][e]=new Kt;let n=0;for(let r of e.getDetectionResultColumns()){if(null!=r)for(let e of r.getCodewords())if(null!=e){let r=e.getRowNumber();if(r>=0){if(r>=t.length)continue;t[r][n].setValue(e.getValue())}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let a=r?1:-1,s=null;if(mn.isValidBarcodeColumn(e,t-a)&&(s=e.getDetectionResultColumn(t-a).getCodeword(n)),null!=s)return r?s.getEndX():s.getStartX();if(s=e.getDetectionResultColumn(t).getCodewordNearby(n),null!=s)return r?s.getStartX():s.getEndX();if(mn.isValidBarcodeColumn(e,t-a)&&(s=e.getDetectionResultColumn(t-a).getCodewordNearby(n)),null!=s)return r?s.getEndX():s.getStartX();let i=0;for(;mn.isValidBarcodeColumn(e,t-a);){t-=a;for(let n of e.getDetectionResultColumn(t).getCodewords())if(null!=n)return(r?n.getEndX():n.getStartX())+a*i*(n.getEndX()-n.getStartX());i++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,a,s,i,o){a=mn.adjustCodewordStartColumn(e,t,n,r,a,s);let l,c=mn.getModuleBitCount(e,t,n,r,a,s);if(null==c)return null;let u=se.sum(c);if(r)l=a+u;else{for(let e=0;e<c.length/2;e++){let t=c[e];c[e]=c[c.length-1-e],c[c.length-1-e]=t}l=a,a=l-u}if(!mn.checkCodewordSkew(u,i,o))return null;let d=tn.getDecodedValue(c),h=Ut.getCodeword(d);return-1===h?null:new en(a,l,mn.getCodewordBucketNumber(d),h)}static getModuleBitCount(e,t,n,r,a,s){let i=a,o=new Int32Array(8),l=0,c=r?1:-1,u=r;for(;(r?i<n:i>=t)&&l<o.length;)e.get(i,s)===u?(o[l]++,i+=c):(l++,u=!u);return l===o.length||i===(r?n:t)&&l===o.length-1?o:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,a,s){let i=a,o=r?-1:1;for(let l=0;l<2;l++){for(;(r?i>=t:i<n)&&r===e.get(i,s);){if(Math.abs(a-i)>mn.CODEWORD_SKEW_SIZE)return a;i+=o}o=-o,r=!r}return i}static checkCodewordSkew(e,t,n){return t-mn.CODEWORD_SKEW_SIZE<=e&&e<=n+mn.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(0===e.length)throw b.getFormatInstance();let r=1<<t+1,a=mn.correctErrors(e,n,r);mn.verifyCodewordCount(e,r);let s=fn.decode(e,""+t);return s.setErrorsCorrected(a),s.setErasures(n.length),s}static correctErrors(e,t,n){if(null!=t&&t.length>n/2+mn.MAX_ERRORS||n<0||n>mn.MAX_EC_CODEWORDS)throw f.getChecksumInstance();return mn.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw b.getFormatInstance();let n=e[0];if(n>e.length)throw b.getFormatInstance();if(0===n){if(!(t<e.length))throw b.getFormatInstance();e[0]=e.length-t}}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((1&e)!==n&&(n=1&e,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return mn.getCodewordBucketNumber(mn.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new qt;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let a=e[n][r];0===a.getValue().length?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()}}mn.CODEWORD_SKEW_SIZE=2,mn.MAX_ERRORS=3,mn.MAX_EC_CODEWORDS=512,mn.errorCorrection=new Yt;class gn{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=gn.decode(e,t,!1);if(null==n||0===n.length||null==n[0])throw j.getNotFoundInstance();return n[0]}decodeMultiple(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return gn.decode(e,t,!0)}catch(n){if(n instanceof b||n instanceof f)throw j.getNotFoundInstance();throw n}}static decode(e,t,n){const r=new Array,a=Ht.detectMultiple(e,t,n);for(const s of a.getPoints()){const e=mn.decode(a.getBits(),s[4],s[5],s[6],s[7],gn.getMinCodewordWidth(s),gn.getMaxCodewordWidth(s)),t=new U(e.getText(),e.getRawBytes(),void 0,s,H.PDF_417);t.putMetadata(q.ERROR_CORRECTION_LEVEL,e.getECLevel());const n=e.getOther();null!=n&&t.putMetadata(q.PDF417_EXTRA_METADATA,n),r.push(t)}return r.map(e=>e)}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?w.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(gn.getMaxWidth(e[0],e[4]),gn.getMaxWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.max(gn.getMaxWidth(e[1],e[5]),gn.getMaxWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(gn.getMinWidth(e[0],e[4]),gn.getMinWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.min(gn.getMinWidth(e[1],e[5]),gn.getMinWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))}reset(){}}class pn extends c{}pn.kind="ReaderException";class yn{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!t(e)&&!0===e.get(C.TRY_HARDER),r=t(e)?null:e.get(C.POSSIBLE_FORMATS),a=new Array;if(!t(r)){const t=r.some(e=>e===H.UPC_A||e===H.UPC_E||e===H.EAN_13||e===H.EAN_8||e===H.CODABAR||e===H.CODE_39||e===H.CODE_93||e===H.CODE_128||e===H.ITF||e===H.RSS_14||e===H.RSS_EXPANDED);t&&!n&&a.push(new lt(e,this.verbose)),r.includes(H.QR_CODE)&&a.push(new Bt),r.includes(H.DATA_MATRIX)&&a.push(new wt),r.includes(H.AZTEC)&&a.push(new ye),r.includes(H.PDF_417)&&a.push(new gn),t&&n&&a.push(new lt(e,this.verbose))}0===a.length&&(n||a.push(new lt(e,this.verbose)),a.push(new Bt),a.push(new wt),a.push(new ye),a.push(new gn),n&&a.push(new lt(e,this.verbose))),this.readers=a}reset(){if(null!==this.readers)for(const e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new pn("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(t){if(t instanceof pn)continue}throw new j("No MultiFormat Readers were able to detect the code.")}}class vn extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const n=new yn;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class wn extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new gn,e)}}class Sn extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new Bt,e)}}var Nn;!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(Nn||(Nn={}));var Cn=Nn;class bn{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new $(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let a=t.length;a<=e;a++){const e=n.multiply(new $(r,Int32Array.from([1,r.exp(a-1+r.getGeneratorBase())])));t.push(e),n=e}}return t[e]}encode(e,t){if(0===t)throw new d("No error correction bytes");const n=e.length-t;if(n<=0)throw new d("No data bytes provided");const r=this.buildGenerator(t),a=new Int32Array(n);g.arraycopy(e,0,a,0,n);let s=new $(this.field,a);s=s.multiplyByMonomial(t,1);const i=s.divide(r)[1].getCoefficients(),o=t-i.length;for(let l=0;l<o;l++)e[n+l]=0;g.arraycopy(i,0,e,n+o,i.length)}}class En{constructor(){}static applyMaskPenaltyRule1(e){return En.applyMaskPenaltyRule1Internal(e,!0)+En.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),a=e.getHeight();for(let s=0;s<a-1;s++){const e=n[s];for(let a=0;a<r-1;a++){const r=e[a];r===e[a+1]&&r===n[s+1][a]&&r===n[s+1][a+1]&&t++}}return En.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),a=e.getHeight();for(let s=0;s<a;s++)for(let e=0;e<r;e++){const i=n[s];e+6<r&&1===i[e]&&0===i[e+1]&&1===i[e+2]&&1===i[e+3]&&1===i[e+4]&&0===i[e+5]&&1===i[e+6]&&(En.isWhiteHorizontal(i,e-4,e)||En.isWhiteHorizontal(i,e+7,e+11))&&t++,s+6<a&&1===n[s][e]&&0===n[s+1][e]&&1===n[s+2][e]&&1===n[s+3][e]&&1===n[s+4][e]&&0===n[s+5][e]&&1===n[s+6][e]&&(En.isWhiteVertical(n,e,s-4,s)||En.isWhiteVertical(n,e,s+7,s+11))&&t++}return t*En.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(1===e[r])return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let a=n;a<r;a++)if(1===e[a][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),a=e.getHeight();for(let i=0;i<a;i++){const e=n[i];for(let n=0;n<r;n++)1===e[n]&&t++}const s=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-s)/s)*En.N4}static getDataMaskBit(e,t,n){let r,a;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:a=n*t,r=(1&a)+a%3;break;case 6:a=n*t,r=(1&a)+a%3&1;break;case 7:a=n*t,r=a%3+(n+t&1)&1;break;default:throw new d("Invalid mask pattern: "+e)}return 0===r}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),s=e.getArray();for(let i=0;i<r;i++){let e=0,r=-1;for(let o=0;o<a;o++){const a=t?s[i][o]:s[o][i];a===r?e++:(e>=5&&(n+=En.N1+(e-5)),e=1,r=a)}e>=5&&(n+=En.N1+(e-5))}return n}}En.N1=3,En.N2=3,En.N3=40,En.N4=10;class An{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)v.fill(t,e)}equals(e){if(!(e instanceof An))return!1;const t=e;if(this.width!==t.width)return!1;if(this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const e=this.bytes[n],r=t.bytes[n];for(let t=0,n=this.width;t<n;++t)if(e[t]!==r[t])return!1}return!0}toString(){const e=new T;for(let t=0,n=this.height;t<n;++t){const n=this.bytes[t];for(let t=0,r=this.width;t<r;++t)switch(n[t]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}class xn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new T;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<xn.NUM_MASK_PATTERNS}}xn.NUM_MASK_PATTERNS=8;class In extends c{}In.kind="WriterException";class Tn{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,a){Tn.clearMatrix(a),Tn.embedBasicPatterns(n,a),Tn.embedTypeInfo(t,r,a),Tn.maybeEmbedVersionInfo(n,a),Tn.embedDataBits(e,r,a)}static embedBasicPatterns(e,t){Tn.embedPositionDetectionPatternsAndSeparators(t),Tn.embedDarkDotAtLeftBottomCorner(t),Tn.maybeEmbedPositionAdjustmentPatterns(e,t),Tn.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new S;Tn.makeTypeInfoBits(e,t,r);for(let a=0,s=r.getSize();a<s;++a){const e=r.get(r.getSize()-1-a),t=Tn.TYPE_INFO_COORDINATES[a],s=t[0],i=t[1];if(n.setBoolean(s,i,e),a<8){const t=n.getWidth()-a-1,r=8;n.setBoolean(t,r,e)}else{const t=8,r=n.getHeight()-7+(a-8);n.setBoolean(t,r,e)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new S;Tn.makeVersionInfoBits(e,n);let r=17;for(let a=0;a<6;++a)for(let e=0;e<3;++e){const s=n.get(r);r--,t.setBoolean(a,t.getHeight()-11+e,s),t.setBoolean(t.getHeight()-11+e,a,s)}}static embedDataBits(e,t,n){let r=0,a=-1,s=n.getWidth()-1,i=n.getHeight()-1;for(;s>0;){for(6===s&&(s-=1);i>=0&&i<n.getHeight();){for(let a=0;a<2;++a){const o=s-a;if(!Tn.isEmpty(n.get(o,i)))continue;let l;r<e.getSize()?(l=e.get(r),++r):l=!1,255!==t&&En.getDataMaskBit(t,o,i)&&(l=!l),n.setBoolean(o,i,l)}i+=a}a=-a,i+=a,s-=2}if(r!==e.getSize())throw new In("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-w.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new d("0 polynomial");const n=Tn.findMSBSet(t);for(e<<=n-1;Tn.findMSBSet(e)>=n;)e^=t<<Tn.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!xn.isValidMaskPattern(t))throw new In("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const a=Tn.calculateBCHCode(r,Tn.TYPE_INFO_POLY);n.appendBits(a,10);const s=new S;if(s.appendBits(Tn.TYPE_INFO_MASK_PATTERN,15),n.xor(s),15!==n.getSize())throw new In("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=Tn.calculateBCHCode(e.getVersionNumber(),Tn.VERSION_INFO_POLY);if(t.appendBits(n,12),18!==t.getSize())throw new In("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;Tn.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),Tn.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new In;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!Tn.isEmpty(n.get(e+r,t)))throw new In;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!Tn.isEmpty(n.get(e,t+r)))throw new In;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const a=Tn.POSITION_ADJUSTMENT_PATTERN[r];for(let s=0;s<5;++s)n.setNumber(e+s,t+r,a[s])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const a=Tn.POSITION_DETECTION_PATTERN[r];for(let s=0;s<7;++s)n.setNumber(e+s,t+r,a[s])}}static embedPositionDetectionPatternsAndSeparators(e){const t=Tn.POSITION_DETECTION_PATTERN[0].length;Tn.embedPositionDetectionPattern(0,0,e),Tn.embedPositionDetectionPattern(e.getWidth()-t,0,e),Tn.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;Tn.embedHorizontalSeparationPattern(0,n-1,e),Tn.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),Tn.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;Tn.embedVerticalSeparationPattern(r,0,e),Tn.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),Tn.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=Tn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let a=0,s=r.length;a!==s;a++){const e=r[a];if(e>=0)for(let n=0;n!==s;n++){const a=r[n];a>=0&&Tn.isEmpty(t.get(a,e))&&Tn.embedPositionAdjustmentPattern(a-2,e-2,t)}}}}Tn.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Tn.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Tn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Tn.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Tn.VERSION_INFO_POLY=7973,Tn.TYPE_INFO_POLY=1335,Tn.TYPE_INFO_MASK_PATTERN=21522;class _n{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class jn{constructor(){}static calculateMaskPenalty(e){return En.applyMaskPenaltyRule1(e)+En.applyMaskPenaltyRule2(e)+En.applyMaskPenaltyRule3(e)+En.applyMaskPenaltyRule4(e)}static encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=jn.DEFAULT_BYTE_MODE_ENCODING;const a=null!==n&&void 0!==n.get(Cn.CHARACTER_SET);a&&(r=n.get(Cn.CHARACTER_SET).toString());const s=this.chooseMode(e,r),i=new S;if(s===_t.BYTE&&(a||jn.DEFAULT_BYTE_MODE_ENCODING!==r)){const e=E.getCharacterSetECIByName(r);void 0!==e&&this.appendECI(e,i)}this.appendModeInfo(s,i);const o=new S;let l;if(this.appendBytes(e,s,o,r),null!==n&&void 0!==n.get(Cn.QR_VERSION)){const e=Number.parseInt(n.get(Cn.QR_VERSION).toString(),10);l=At.getVersionForNumber(e);const r=this.calculateBitsNeeded(s,i,o,l);if(!this.willFit(r,l,t))throw new In("Data too big for requested version")}else l=this.recommendVersion(t,s,i,o);const c=new S;c.appendBitArray(i);const u=s===_t.BYTE?o.getSizeInBytes():e.length;this.appendLengthInfo(u,l,s,c),c.appendBitArray(o);const d=l.getECBlocksForLevel(t),h=l.getTotalCodewords()-d.getTotalECCodewords();this.terminateBits(h,c);const f=this.interleaveWithECBytes(c,l.getTotalCodewords(),h,d.getNumBlocks()),m=new xn;m.setECLevel(t),m.setMode(s),m.setVersion(l);const g=l.getDimensionForVersion(),p=new An(g,g),y=this.chooseMaskPattern(f,t,l,p);return m.setMaskPattern(y),Tn.buildMatrix(f,t,l,y,p),m.setMatrix(p),m}static recommendVersion(e,t,n,r){const a=this.calculateBitsNeeded(t,n,r,At.getVersionForNumber(1)),s=this.chooseVersion(a,e),i=this.calculateBitsNeeded(t,n,r,s);return this.chooseVersion(i,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<jn.ALPHANUMERIC_TABLE.length?jn.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(E.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return _t.KANJI;let n=!1,r=!1;for(let a=0,s=e.length;a<s;++a){const t=e.charAt(a);if(jn.isDigit(t))n=!0;else{if(-1===this.getAlphanumericCode(t.charCodeAt(0)))return _t.BYTE;r=!0}}return r?_t.ALPHANUMERIC:n?_t.NUMERIC:_t.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=x.encode(e,E.SJIS)}catch(r){return!1}const n=t.length;if(n%2!==0)return!1;for(let a=0;a<n;a+=2){const e=255&t[a];if((e<129||e>159)&&(e<224||e>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let a=Number.MAX_SAFE_INTEGER,s=-1;for(let i=0;i<xn.NUM_MASK_PATTERNS;i++){Tn.buildMatrix(e,t,n,i,r);let o=this.calculateMaskPenalty(r);o<a&&(a=o,s=i)}return s}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=At.getVersionForNumber(n);if(jn.willFit(e,r,t))return r}throw new In("Data too big")}static willFit(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8}static terminateBits(e,t){const n=8*e;if(t.getSize()>n)throw new In("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let s=0;s<4&&t.getSize()<n;++s)t.appendBit(!1);const r=7&t.getSize();if(r>0)for(let s=r;s<8;s++)t.appendBit(!1);const a=e-t.getSizeInBytes();for(let s=0;s<a;++s)t.appendBits(0===(1&s)?236:17,8);if(t.getSize()!==n)throw new In("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,a,s){if(r>=n)throw new In("Block ID too large");const i=e%n,o=n-i,l=Math.floor(e/n),c=l+1,u=Math.floor(t/n),d=u+1,h=l-u,f=c-d;if(h!==f)throw new In("EC bytes mismatch");if(n!==o+i)throw new In("RS blocks mismatch");if(e!==(u+h)*o+(d+f)*i)throw new In("Total bytes mismatch");r<o?(a[0]=u,s[0]=h):(a[0]=d,s[0]=f)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new In("Number of bits and data bytes does not match");let a=0,s=0,i=0;const o=new Array;for(let c=0;c<r;++c){const l=new Int32Array(1),u=new Int32Array(1);jn.getNumDataBytesAndNumECBytesForBlockID(t,n,r,c,l,u);const d=l[0],h=new Uint8Array(d);e.toBytes(8*a,h,0,d);const f=jn.generateECBytes(h,u[0]);o.push(new _n(h,f)),s=Math.max(s,d),i=Math.max(i,f.length),a+=l[0]}if(n!==a)throw new In("Data bytes does not match offset");const l=new S;for(let c=0;c<s;++c)for(const e of o){const t=e.getDataBytes();c<t.length&&l.appendBits(t[c],8)}for(let c=0;c<i;++c)for(const e of o){const t=e.getErrorCorrectionBytes();c<t.length&&l.appendBits(t[c],8)}if(t!==l.getSizeInBytes())throw new In("Interleaving error: "+t+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let s=0;s<n;s++)r[s]=255&e[s];new bn(ee.QR_CODE_FIELD_256).encode(r,t);const a=new Uint8Array(t);for(let s=0;s<t;s++)a[s]=r[n+s];return a}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const a=n.getCharacterCountBits(t);if(e>=1<<a)throw new In(e+" is bigger than "+((1<<a)-1));r.appendBits(e,a)}static appendBytes(e,t,n,r){switch(t){case _t.NUMERIC:jn.appendNumericBytes(e,n);break;case _t.ALPHANUMERIC:jn.appendAlphanumericBytes(e,n);break;case _t.BYTE:jn.append8BitBytes(e,n,r);break;case _t.KANJI:jn.appendKanjiBytes(e,n);break;default:throw new In("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=jn.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const a=jn.getDigit(e.charAt(r));if(r+2<n){const n=jn.getDigit(e.charAt(r+1)),s=jn.getDigit(e.charAt(r+2));t.appendBits(100*a+10*n+s,10),r+=3}else if(r+1<n){const n=jn.getDigit(e.charAt(r+1));t.appendBits(10*a+n,7),r+=2}else t.appendBits(a,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const a=jn.getAlphanumericCode(e.charCodeAt(r));if(-1===a)throw new In;if(r+1<n){const n=jn.getAlphanumericCode(e.charCodeAt(r+1));if(-1===n)throw new In;t.appendBits(45*a+n,11),r+=2}else t.appendBits(a,6),r++}}static append8BitBytes(e,t,n){let r;try{r=x.encode(e,n)}catch(a){throw new In(a)}for(let s=0,i=r.length;s!==i;s++){const e=r[s];t.appendBits(e,8)}}static appendKanjiBytes(e,t){let n;try{n=x.encode(e,E.SJIS)}catch(a){throw new In(a)}const r=n.length;for(let s=0;s<r;s+=2){const e=(255&n[s])<<8&4294967295|255&n[s+1];let r=-1;if(e>=33088&&e<=40956?r=e-33088:e>=57408&&e<=60351&&(r=e-49472),-1===r)throw new In("Invalid byte sequence");const a=192*(r>>8)+(255&r);t.appendBits(a,13)}}static appendECI(e,t){t.appendBits(_t.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}jn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),jn.DEFAULT_BYTE_MODE_ENCODING=E.UTF8.getName();class Rn{write(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(0===e.length)throw new d("Found empty contents");if(t<0||n<0)throw new d("Requested dimensions are too small: "+t+"x"+n);let a=Nt.L,s=Rn.QUIET_ZONE_SIZE;null!==r&&(void 0!==r.get(Cn.ERROR_CORRECTION)&&(a=Nt.fromString(r.get(Cn.ERROR_CORRECTION).toString())),void 0!==r.get(Cn.MARGIN)&&(s=Number.parseInt(r.get(Cn.MARGIN).toString(),10)));const i=jn.encode(e,a,r);return this.renderResult(i,t,n,s)}writeToDom(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;"string"===typeof e&&(e=document.querySelector(e));const s=this.write(t,n,r,a);e&&e.appendChild(s)}renderResult(e,t,n,r){const a=e.getMatrix();if(null===a)throw new ne;const s=a.getWidth(),i=a.getHeight(),o=s+2*r,l=i+2*r,c=Math.max(t,o),u=Math.max(n,l),d=Math.min(Math.floor(c/o),Math.floor(u/l)),h=Math.floor((c-s*d)/2),f=Math.floor((u-i*d)/2),m=this.createSVGElement(c,u);for(let g=0,p=f;g<i;g++,p+=d)for(let e=0,t=h;e<s;e++,t+=d)if(1===a.get(e,g)){const e=this.createSvgRectElement(t,p,d,d);m.appendChild(e)}return m}createSVGElement(e,t){const n=document.createElementNS(Rn.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const a=document.createElementNS(Rn.SVG_NS,"rect");return a.setAttributeNS(null,"x",e.toString()),a.setAttributeNS(null,"y",t.toString()),a.setAttributeNS(null,"height",n.toString()),a.setAttributeNS(null,"width",r.toString()),a.setAttributeNS(null,"fill","#000000"),a}}Rn.QUIET_ZONE_SIZE=4,Rn.SVG_NS="http://www.w3.org/2000/svg";class Dn{encode(e,t,n,r,a){if(0===e.length)throw new d("Found empty contents");if(t!==H.QR_CODE)throw new d("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new d("Requested dimensions are too small: ".concat(n,"x").concat(r));let s=Nt.L,i=Dn.QUIET_ZONE_SIZE;null!==a&&(void 0!==a.get(Cn.ERROR_CORRECTION)&&(s=Nt.fromString(a.get(Cn.ERROR_CORRECTION).toString())),void 0!==a.get(Cn.MARGIN)&&(i=Number.parseInt(a.get(Cn.MARGIN).toString(),10)));const o=jn.encode(e,s,a);return Dn.renderResult(o,n,r,i)}static renderResult(e,t,n,r){const a=e.getMatrix();if(null===a)throw new ne;const s=a.getWidth(),i=a.getHeight(),o=s+2*r,l=i+2*r,c=Math.max(t,o),u=Math.max(n,l),d=Math.min(Math.floor(c/o),Math.floor(u/l)),h=Math.floor((c-s*d)/2),f=Math.floor((u-i*d)/2),m=new _(c,u);for(let g=0,p=f;g<i;g++,p+=d)for(let e=0,t=h;e<s;e++,t+=d)1===a.get(e,g)&&m.setRegion(t,p,d,d);return m}}Dn.QUIET_ZONE_SIZE=4;class Mn{encode(e,t,n,r,a){let s;if(t!==H.QR_CODE)throw new d("No encoder available for format "+t);return s=new Dn,s.encode(e,t,n,r,a)}}class On extends M{constructor(e,t,n,r,a,s,i,o){if(super(s,i),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=a,r+s>t||a+i>n)throw new d("Crop rectangle does not fit within image data.");o&&this.reverseHorizontal(s,i)}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return g.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return g.arraycopy(this.yuvData,a,r,0,n),r;for(let s=0;s<t;s++){const t=s*e;g.arraycopy(this.yuvData,a,r,t,e),a+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new On(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/On.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/On.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let a=this.top*this.dataWidth+this.left;for(let s=0;s<t;s++){const t=s*e;for(let s=0;s<e;s++){const e=255&r[a+s*On.THUMBNAIL_SCALE_FACTOR];n[t+s]=4278190080|65793*e}a+=this.dataWidth*On.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/On.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/On.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,a=this.top*this.dataWidth+this.left;r<t;r++,a+=this.dataWidth){const t=a+e/2;for(let r=a,s=a+e-1;r<t;r++,s--){const e=n[r];n[r]=n[s],n[s]=e}}}invert(){return new O(this)}}On.THUMBNAIL_SCALE_FACTOR=2;class kn extends M{constructor(e,t,n,r,a,s,i){if(super(t,n),this.dataWidth=r,this.dataHeight=a,this.left=s,this.top=i,4===e.BYTES_PER_ELEMENT){const r=t*n,a=new Uint8ClampedArray(r);for(let t=0;t<r;t++){const n=e[t],r=n>>16&255,s=n>>7&510,i=255&n;a[t]=(r+s+i)/4&255}this.luminances=a}else this.luminances=e;if(void 0===r&&(this.dataWidth=t),void 0===a&&(this.dataHeight=n),void 0===s&&(this.left=0),void 0===i&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new d("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return g.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return g.arraycopy(this.luminances,a,r,0,n),r;for(let s=0;s<t;s++){const t=s*e;g.arraycopy(this.luminances,a,r,t,e),a+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new kn(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new O(this)}}class Pn extends E{static forName(e){return this.getCharacterSetECIByName(e)}}class Ln{}Ln.ISO_8859_1=E.ISO8859_1;class Fn{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Bn{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Un{constructor(e){this.previous=e}getPrevious(){return this.previous}}class zn extends Un{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new zn(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new zn(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+w.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Hn extends zn{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Hn(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Vn(e,t,n){return new Hn(e,t,n)}function Gn(e,t,n){return new zn(e,t,n)}const Wn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Yn=0,Xn=1,Qn=2,qn=3,Zn=4,Kn=new zn(null,0,0),$n=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function Jn(e){for(let t of e)v.fill(t,-1);return e[Yn][Zn]=0,e[Xn][Zn]=0,e[Xn][Yn]=28,e[qn][Zn]=0,e[Qn][Zn]=0,e[Qn][Yn]=15,e}const er=Jn(v.createInt32Array(6,6));class tr{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let t=$n[this.mode][e];r=Gn(r,65535&t,t>>16),n+=t>>16}let a=e===Qn?4:5;return r=Gn(r,t,a),new tr(r,e,0,n+a)}shiftAndAppend(e,t){let n=this.token,r=this.mode===Qn?4:5;return n=Gn(n,er[this.mode][e],r),n=Gn(n,t,5),new tr(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===Zn||this.mode===Qn){let e=$n[n][Yn];t=Gn(t,65535&e,e>>16),r+=e>>16,n=Yn}let a=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,s=new tr(t,n,this.binaryShiftByteCount+1,r+a);return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(e+1)),s}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return t=Vn(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new tr(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+($n[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=tr.calculateBinaryShiftCost(e)-tr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;null!==r;r=r.getPrevious())t.unshift(r);let n=new S;for(const r of t)r.appendTo(n,e);return n}toString(){return I.format("%s bits=%d bytes=%d",Wn[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}function nr(e){const t=I.getCharCode(" "),n=I.getCharCode("."),r=I.getCharCode(",");e[Yn][t]=1;const a=I.getCharCode("Z"),s=I.getCharCode("A");for(let h=s;h<=a;h++)e[Yn][h]=h-s+2;e[Xn][t]=1;const i=I.getCharCode("z"),o=I.getCharCode("a");for(let h=o;h<=i;h++)e[Xn][h]=h-o+2;e[Qn][t]=1;const l=I.getCharCode("9"),c=I.getCharCode("0");for(let h=c;h<=l;h++)e[Qn][h]=h-c+2;e[Qn][r]=12,e[Qn][n]=13;const u=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let h=0;h<u.length;h++)e[qn][I.getCharCode(u[h])]=h;const d=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let h=0;h<d.length;h++)I.getCharCode(d[h])>0&&(e[Zn][I.getCharCode(d[h])]=h);return e}tr.INITIAL_STATE=new tr(Kn,Yn,0,0);const rr=nr(v.createInt32Array(5,256));class ar{constructor(e){this.text=e}encode(){const e=I.getCharCode(" "),t=I.getCharCode("\n");let n=Bn.singletonList(tr.INITIAL_STATE);for(let r=0;r<this.text.length;r++){let a,s=r+1<this.text.length?this.text[r+1]:0;switch(this.text[r]){case I.getCharCode("\r"):a=s===t?2:0;break;case I.getCharCode("."):a=s===e?3:0;break;case I.getCharCode(","):a=s===e?4:0;break;case I.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(n=ar.updateStateListForPair(n,r,a),r++):n=this.updateStateListForChar(n,r)}return Bn.min(n,(e,t)=>e.getBitCount()-t.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return ar.simplifyStates(n)}updateStateForChar(e,t,n){let r=255&this.text[t],a=rr[e.getMode()][r]>0,s=null;for(let i=0;i<=Zn;i++){let o=rr[i][r];if(o>0){if(null==s&&(s=e.endBinaryShift(t)),!a||i===e.getMode()||i===Qn){const e=s.latchAndAppend(i,o);n.push(e)}if(!a&&er[e.getMode()][i]>=0){const e=s.shiftAndAppend(i,o);n.push(e)}}}if(e.getBinaryShiftByteCount()>0||0===rr[e.getMode()][r]){let r=e.addBinaryShiftChar(t);n.push(r)}}static updateStateListForPair(e,t,n){const r=[];for(let a of e)this.updateStateForPair(a,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let a=e.endBinaryShift(t);if(r.push(a.latchAndAppend(Zn,n)),e.getMode()!==Zn&&r.push(a.shiftAndAppend(Zn,n)),3===n||4===n){let e=a.latchAndAppend(Qn,16-n).latchAndAppend(Qn,1);r.push(e)}if(e.getBinaryShiftByteCount()>0){let n=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(n)}}static simplifyStates(e){let t=[];for(const n of e){let e=!0;for(const r of t){if(r.isBetterThanOrEqualTo(n)){e=!1;break}n.isBetterThanOrEqualTo(r)&&(t=t.filter(e=>e!==r))}e&&t.push(n)}return t}}class sr{constructor(){}static encodeBytes(e){return sr.encode(e,sr.DEFAULT_EC_PERCENT,sr.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r,a,s,i,o,l=new ar(e).encode(),c=w.truncDivision(l.getSize()*t,100)+11,u=l.getSize()+c;if(n!==sr.DEFAULT_AZTEC_LAYERS){if(r=n<0,a=Math.abs(n),a>(r?sr.MAX_NB_BITS_COMPACT:sr.MAX_NB_BITS))throw new d(I.format("Illegal value %s for layers",n));s=sr.totalBitsInLayer(a,r),i=sr.WORD_SIZE[a];let e=s-s%i;if(o=sr.stuffBits(l,i),o.getSize()+c>e)throw new d("Data to large for user specified layer");if(r&&o.getSize()>64*i)throw new d("Data to large for user specified layer")}else{i=0,o=null;for(let e=0;;e++){if(e>sr.MAX_NB_BITS)throw new d("Data too large for an Aztec code");if(r=e<=3,a=r?e+1:e,s=sr.totalBitsInLayer(a,r),u>s)continue;null!=o&&i===sr.WORD_SIZE[a]||(i=sr.WORD_SIZE[a],o=sr.stuffBits(l,i));let t=s-s%i;if(!(r&&o.getSize()>64*i)&&o.getSize()+c<=t)break}}let h,f=sr.generateCheckWords(o,s,i),m=o.getSize()/i,g=sr.generateModeMessage(r,a,m),p=(r?11:14)+4*a,y=new Int32Array(p);if(r){h=p;for(let e=0;e<y.length;e++)y[e]=e}else{h=p+1+2*w.truncDivision(w.truncDivision(p,2)-1,15);let e=w.truncDivision(p,2),t=w.truncDivision(h,2);for(let n=0;n<e;n++){let r=n+w.truncDivision(n,15);y[e-n-1]=t-r-1,y[e+n]=t+r+1}}let v=new _(h);for(let d=0,w=0;d<a;d++){let e=4*(a-d)+(r?9:12);for(let t=0;t<e;t++){let n=2*t;for(let r=0;r<2;r++)f.get(w+n+r)&&v.set(y[2*d+r],y[2*d+t]),f.get(w+2*e+n+r)&&v.set(y[2*d+t],y[p-1-2*d-r]),f.get(w+4*e+n+r)&&v.set(y[p-1-2*d-r],y[p-1-2*d-t]),f.get(w+6*e+n+r)&&v.set(y[p-1-2*d-t],y[2*d+r])}w+=8*e}if(sr.drawModeMessage(v,r,h,g),r)sr.drawBullsEye(v,w.truncDivision(h,2),5);else{sr.drawBullsEye(v,w.truncDivision(h,2),7);for(let e=0,t=0;e<w.truncDivision(p,2)-1;e+=15,t+=16)for(let n=1&w.truncDivision(h,2);n<h;n+=2)v.set(w.truncDivision(h,2)-t,n),v.set(w.truncDivision(h,2)+t,n),v.set(n,w.truncDivision(h,2)-t),v.set(n,w.truncDivision(h,2)+t)}let S=new Fn;return S.setCompact(r),S.setSize(h),S.setLayers(a),S.setCodeWords(m),S.setMatrix(v),S}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let n=t-r;n<=t+r;n++)e.set(n,t-r),e.set(n,t+r),e.set(t-r,n),e.set(t+r,n);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new S;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=sr.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=sr.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let a=w.truncDivision(n,2);if(t)for(let s=0;s<7;s++){let t=a-3+s;r.get(s)&&e.set(t,a-5),r.get(s+7)&&e.set(a+5,t),r.get(20-s)&&e.set(t,a+5),r.get(27-s)&&e.set(a-5,t)}else for(let s=0;s<10;s++){let t=a-5+s+w.truncDivision(s,5);r.get(s)&&e.set(t,a-7),r.get(s+10)&&e.set(a+7,t),r.get(29-s)&&e.set(t,a+7),r.get(39-s)&&e.set(a-7,t)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,a=new bn(sr.getGF(n)),s=w.truncDivision(t,n),i=sr.bitsToWords(e,n,s);a.encode(i,s-r);let o=t%n,l=new S;l.appendBits(0,o);for(const c of Array.from(i))l.appendBits(c,n);return l}static bitsToWords(e,t,n){let r,a,s=new Int32Array(n);for(r=0,a=e.getSize()/t;r<a;r++){let n=0;for(let a=0;a<t;a++)n|=e.get(r*t+a)?1<<t-a-1:0;s[r]=n}return s}static getGF(e){switch(e){case 4:return ee.AZTEC_PARAM;case 6:return ee.AZTEC_DATA_6;case 8:return ee.AZTEC_DATA_8;case 10:return ee.AZTEC_DATA_10;case 12:return ee.AZTEC_DATA_12;default:throw new d("Unsupported word size "+e)}}static stuffBits(e,t){let n=new S,r=e.getSize(),a=(1<<t)-2;for(let s=0;s<r;s+=t){let i=0;for(let n=0;n<t;n++)(s+n>=r||e.get(s+n))&&(i|=1<<t-1-n);(i&a)===a?(n.appendBits(i&a,t),s--):0===(i&a)?(n.appendBits(1|i,t),s--):n.appendBits(i,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}sr.DEFAULT_EC_PERCENT=33,sr.DEFAULT_AZTEC_LAYERS=0,sr.MAX_NB_BITS=32,sr.MAX_NB_BITS_COMPACT=4,sr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ir{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,a){let s=Ln.ISO_8859_1,i=sr.DEFAULT_EC_PERCENT,o=sr.DEFAULT_AZTEC_LAYERS;return null!=a&&(a.has(Cn.CHARACTER_SET)&&(s=Pn.forName(a.get(Cn.CHARACTER_SET).toString())),a.has(Cn.ERROR_CORRECTION)&&(i=w.parseInt(a.get(Cn.ERROR_CORRECTION).toString())),a.has(Cn.AZTEC_LAYERS)&&(o=w.parseInt(a.get(Cn.AZTEC_LAYERS).toString()))),ir.encodeLayers(e,t,n,r,s,i,o)}static encodeLayers(e,t,n,r,a,s,i){if(t!==H.AZTEC)throw new d("Can only encode AZTEC, but got "+t);let o=sr.encode(I.getBytes(e,a),s,i);return ir.renderResult(o,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(null==r)throw new ne;let a=r.getWidth(),s=r.getHeight(),i=Math.max(t,a),o=Math.max(n,s),l=Math.min(i/a,o/s),c=(i-a*l)/2,u=(o-s*l)/2,d=new _(i,o);for(let h=0,f=u;h<s;h++,f+=l)for(let e=0,t=c;e<a;e++,t+=l)r.get(e,h)&&d.setRegion(t,f,l,l);return d}}e.AbstractExpandedDecoder=We,e.ArgumentException=u,e.ArithmeticException=J,e.AztecCode=Fn,e.AztecCodeReader=ye,e.AztecCodeWriter=ir,e.AztecDecoder=ae,e.AztecDetector=pe,e.AztecDetectorResult=ce,e.AztecEncoder=sr,e.AztecHighLevelEncoder=ar,e.AztecPoint=ge,e.BarcodeFormat=H,e.Binarizer=m,e.BinaryBitmap=h,e.BitArray=S,e.BitMatrix=_,e.BitSource=gt,e.BrowserAztecCodeReader=ve,e.BrowserBarcodeReader=ct,e.BrowserCodeReader=B,e.BrowserDatamatrixCodeReader=St,e.BrowserMultiFormatReader=vn,e.BrowserPDF417Reader=wn,e.BrowserQRCodeReader=Sn,e.BrowserQRCodeSvgWriter=Rn,e.CharacterSetECI=E,e.ChecksumException=f,e.Code128Reader=Se,e.Code39Reader=Ne,e.DataMatrixDecodedBitStreamParser=pt,e.DataMatrixReader=wt,e.DecodeHintType=C,e.DecoderResult=Z,e.DefaultGridSampler=fe,e.DetectorResult=le,e.EAN13Reader=Te,e.EncodeHintType=Cn,e.Exception=c,e.FormatException=b,e.GenericGF=ee,e.GenericGFPoly=$,e.GlobalHistogramBinarizer=R,e.GridSampler=de,e.GridSamplerInstance=me,e.HTMLCanvasElementLuminanceSource=k,e.HybridBinarizer=D,e.ITFReader=Ce,e.IllegalArgumentException=d,e.IllegalStateException=ne,e.InvertedLuminanceSource=O,e.LuminanceSource=M,e.MathUtils=se,e.MultiFormatOneDReader=lt,e.MultiFormatReader=yn,e.MultiFormatWriter=Mn,e.NotFoundException=j,e.OneDReader=we,e.PDF417DecodedBitStreamParser=fn,e.PDF417DecoderErrorCorrection=Yt,e.PDF417Reader=gn,e.PDF417ResultMetadata=nn,e.PerspectiveTransform=he,e.PlanarYUVLuminanceSource=On,e.QRCodeByteMatrix=An,e.QRCodeDataMask=xt,e.QRCodeDecodedBitStreamParser=jt,e.QRCodeDecoderErrorCorrectionLevel=Nt,e.QRCodeDecoderFormatInformation=Ct,e.QRCodeEncoder=jn,e.QRCodeEncoderQRCode=xn,e.QRCodeMaskUtil=En,e.QRCodeMatrixUtil=Tn,e.QRCodeMode=_t,e.QRCodeReader=Bt,e.QRCodeVersion=At,e.QRCodeWriter=Dn,e.RGBLuminanceSource=kn,e.RSS14Reader=ot,e.RSSExpandedReader=st,e.ReaderException=pn,e.ReedSolomonDecoder=re,e.ReedSolomonEncoder=bn,e.ReedSolomonException=te,e.Result=U,e.ResultMetadataType=q,e.ResultPoint=oe,e.StringUtils=I,e.UnsupportedOperationException=A,e.VideoInputDevice=P,e.WhiteRectangleDetector=ue,e.WriterException=In,e.ZXingArrays=v,e.ZXingCharset=Pn,e.ZXingInteger=w,e.ZXingStandardCharsets=Ln,e.ZXingStringBuilder=T,e.ZXingStringEncoding=x,e.ZXingSystem=g,e.createAbstractExpandedDecoder=nt,Object.defineProperty(e,"__esModule",{value:!0})}(t)},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),m=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||g}function w(){}function S(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||g}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=v.prototype;var N=S.prototype=new w;N.constructor=S,p(N,v.prototype),N.isPureReactComponent=!0;var C=Array.isArray;function b(){}var E={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function x(e,t,r){var a=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==a?a:null,props:r}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function j(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return j((u=e._init)(e._payload),t,a,s,i)}}if(u)return i=i(e),u=""===s?"."+_(e,0):s,C(i)?(a="",null!=u&&(a=u.replace(T,"$&/")+"/"),j(i,t,a,"",function(e){return e})):null!=i&&(I(i)&&(l=i,c=a+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(T,"$&/")+"/")+u,i=x(l.type,c,l.props)),t.push(i)),1;u=0;var d,f=""===s?".":s+":";if(C(e))for(var g=0;g<e.length;g++)u+=j(s=e[g],t,a,o=f+_(s,g),i);else if("function"===typeof(g=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=m&&d[m]||d["@@iterator"])?d:null))for(e=g.call(e),g=0;!(s=e.next()).done;)u+=j(s=s.value,t,a,o=f+_(s,g++),i);else if("object"===o){if("function"===typeof e.then)return j(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(b,b):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,s,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function R(e,t,n){if(null==e)return e;var r=[],a=0;return j(e,r,"","",function(e){return t.call(n,e,a++)}),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},O={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=O,t.Component=v,t.Fragment=a,t.Profiler=i,t.PureComponent=S,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return E.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=p({},e.props),a=e.key;if(null!=t)for(s in void 0!==t.key&&(a=""+t.key),t)!A.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var i=Array(s),o=0;o<s;o++)i[o]=arguments[o+2];r.children=i}return x(e.type,a,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,a={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)A.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var i=arguments.length-2;if(1===i)a.children=n;else if(1<i){for(var o=Array(i),l=0;l<i;l++)o[l]=arguments[l+2];a.children=o}if(e&&e.defaultProps)for(r in i=e.defaultProps)void 0===a[r]&&(a[r]=i[r]);return x(e,s,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=E.T,n={};E.T=n;try{var r=e(),a=E.S;null!==a&&a(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(b,M)}catch(s){M(s)}finally{null!==t&&null!==n.types&&(t.types=n.types),E.T=t}},t.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},t.use=function(e){return E.H.use(e)},t.useActionState=function(e,t,n){return E.H.useActionState(e,t,n)},t.useCallback=function(e,t){return E.H.useCallback(e,t)},t.useContext=function(e){return E.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return E.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return E.H.useEffect(e,t)},t.useEffectEvent=function(e){return E.H.useEffectEvent(e)},t.useId=function(){return E.H.useId()},t.useImperativeHandle=function(e,t,n){return E.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return E.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return E.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return E.H.useMemo(e,t)},t.useOptimistic=function(e,t){return E.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return E.H.useReducer(e,t,n)},t.useRef=function(e){return E.H.useRef(e)},t.useState=function(e){return E.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return E.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return E.H.useTransition()},t.version="19.2.0"},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{"use strict";e.exports=n(799)},672:(e,t,n)=>{"use strict";var r=n(43);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(a(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=i.p;try{if(l.T=null,i.p=2,e)return e()}finally{l.T=t,i.p=n,i.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,i.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&i.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?i.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:s}):"script"===n&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},t.requestFormReset=function(e){i.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.0"},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(e,t,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:a,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=a,t.jsxs=a},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<a&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,g=!1,p=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,S="undefined"!==typeof setImmediate?setImmediate:null;function N(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function C(e){if(p=!1,N(e),!g)if(null!==r(c))g=!0,E||(E=!0,b());else{var t=r(u);null!==t&&D(C,t.startTime-e)}}var b,E=!1,A=-1,x=5,I=-1;function T(){return!!y||!(t.unstable_now()-I<x)}function _(){if(y=!1,E){var e=t.unstable_now();I=e;var n=!0;try{e:{g=!1,p&&(p=!1,w(A),A=-1),m=!0;var s=f;try{t:{for(N(e),h=r(c);null!==h&&!(h.expirationTime>e&&T());){var i=h.callback;if("function"===typeof i){h.callback=null,f=h.priorityLevel;var o=i(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,N(e),n=!0;break t}h===r(c)&&a(c),N(e)}else a(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&D(C,l.startTime-e),n=!1}}break e}finally{h=null,f=s,m=!1}n=void 0}}finally{n?b():E=!1}}}if("function"===typeof S)b=function(){S(_)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,R=j.port2;j.port1.onmessage=_,b=function(){R.postMessage(null)}}else b=function(){v(_,0)};function D(e,n){A=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(p?(w(A),A=-1):p=!0,D(C,s-i))):(e.sortIndex=o,n(c,e),g||m||(g=!0,E||(E=!0,b()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".cc83f11a.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="student-registration:";n.l=(r,a,s,i)=>{if(e[r])e[r].push(a);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[a];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var a=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var s=new Promise((n,r)=>a=e[t]=[n,r]);r.push(a[2]=s);var i=n.p+n.u(t),o=new Error;n.l(i,r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,a[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var a,s,i=r[0],o=r[1],l=r[2],c=0;if(i.some(t=>0!==e[t])){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(l)l(n)}for(t&&t(r);c<i.length;c++)s=i[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkstudent_registration=self.webpackChunkstudent_registration||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(43),t=n(391);function r(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function i(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const c=["sri"],u=["page"],d=["page","matches"],h=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],f=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],m=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var g="popstate";function p(){return b(function(e,t){let{pathname:n,search:r,hash:a}=e.location;return S("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:N(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function y(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function v(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function w(e,t){return{usr:e.state,key:e.key,idx:t}}function S(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return l(l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?C(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function N(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function C(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function b(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:a=document.defaultView,v5Compat:s=!1}=r,i=a.history,o="POP",c=null,u=d();function d(){return(i.state||{idx:null}).idx}function h(){o="POP";let e=d(),t=null==e?null:e-u;u=e,c&&c({action:o,location:m.location,delta:t})}function f(e){return E(e)}null==u&&(u=0,i.replaceState(l(l({},i.state),{},{idx:u}),""));let m={get action(){return o},get location(){return e(a,i)},listen(e){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(g,h),c=e,()=>{a.removeEventListener(g,h),c=null}},createHref:e=>t(a,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let r=S(m.location,e,t);n&&n(r,e),u=d()+1;let l=w(r,u),h=m.createHref(r);try{i.pushState(l,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;a.location.assign(h)}s&&c&&c({action:o,location:m.location,delta:1})},replace:function(e,t){o="REPLACE";let r=S(m.location,e,t);n&&n(r,e),u=d();let a=w(r,u),l=m.createHref(r);i.replaceState(a,"",l),s&&c&&c({action:o,location:m.location,delta:0})},go:e=>i.go(e)};return m}function E(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),y(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:N(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function A(e,t){return x(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function x(e,t,n,r){let a=z(("string"===typeof t?C(t):t).pathname||"/",n);if(null==a)return null;let s=I(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=U(a);i=L(s[o],e,r)}return i}function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&i)return;y(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=Y([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(y(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),I(e.children,t,u,c,i)),(null!=e.path||e.index)&&t.push({path:c,score:P(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of T(e.path))s(e,t,!0,r);else s(e,t)}),t}function T(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return a?[s,""]:[s];let i=T(r.join("/")),o=[];return o.push(...i.map(e=>""===e?s:[s,e].join("/"))),a&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var _=/^:[\w-]+$/,j=3,R=2,D=1,M=10,O=-2,k=e=>"*"===e;function P(e,t){let n=e.split("/"),r=n.length;return n.some(k)&&(r+=O),t&&(r+=R),n.filter(e=>!k(e)).reduce((e,t)=>e+(_.test(t)?j:""===t?D:M),r)}function L(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,a={},s="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),i.push({params:a,pathname:Y([s,u.pathname]),pathnameBase:X(Y([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=Y([s,u.pathnameBase]))}return i}function F(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=B(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=o[n]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:i,pattern:e}}function B(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];v("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function U(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return v(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function z(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function H(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function V(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function G(e){let t=V(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function W(e,t,n){let r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=C(e):(r=l({},e),y(!r.pathname||!r.pathname.includes("?"),H("?","pathname","search",r)),y(!r.pathname||!r.pathname.includes("#"),H("#","pathname","hash",r)),y(!r.search||!r.search.includes("#"),H("#","search","hash",r)));let s,i=""===e||""===r.pathname,o=i?"/":r.pathname;if(null==o)s=n;else{let e=t.length-1;if(!a&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:a=""}="string"===typeof e?C(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:Q(r),hash:q(a)}}(r,s),u=o&&"/"!==o&&o.endsWith("/"),d=(i||"."===o)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!d||(c.pathname+="/"),c}var Y=e=>e.join("/").replace(/\/\/+/g,"/"),X=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var K=["POST","PUT","PATCH","DELETE"],$=(new Set(K),["GET",...K]);new Set($),Symbol("ResetLoaderData");var J=e.createContext(null);J.displayName="DataRouter";var ee=e.createContext(null);ee.displayName="DataRouterState";var te=e.createContext(!1);var ne=e.createContext({isTransitioning:!1});ne.displayName="ViewTransition";var re=e.createContext(new Map);re.displayName="Fetchers";var ae=e.createContext(null);ae.displayName="Await";var se=e.createContext(null);se.displayName="Navigation";var ie=e.createContext(null);ie.displayName="Location";var oe=e.createContext({outlet:null,matches:[],isDataRoute:!1});oe.displayName="Route";var le=e.createContext(null);le.displayName="RouteError";function ce(){return null!=e.useContext(ie)}function ue(){return y(ce(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(ie).location}var de="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function he(t){e.useContext(se).static||e.useLayoutEffect(t)}function fe(){let{isDataRoute:t}=e.useContext(oe);return t?function(){let{router:t}=be("useNavigate"),n=Ae("useNavigate"),r=e.useRef(!1);he(()=>{r.current=!0});let a=e.useCallback(async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(r.current,de),r.current&&("number"===typeof e?t.navigate(e):await t.navigate(e,l({fromRouteId:n},a)))},[t,n]);return a}():function(){y(ce(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext(J),{basename:n,navigator:r}=e.useContext(se),{matches:a}=e.useContext(oe),{pathname:s}=ue(),i=JSON.stringify(G(a)),o=e.useRef(!1);he(()=>{o.current=!0});let l=e.useCallback(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(v(o.current,de),!o.current)return;if("number"===typeof e)return void r.go(e);let l=W(e,JSON.parse(i),s,"path"===a.relative);null==t&&"/"!==n&&(l.pathname="/"===l.pathname?n:Y([n,l.pathname])),(a.replace?r.replace:r.push)(l,a.state,a)},[n,r,i,s,t]);return l}()}var me=e.createContext(null);function ge(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=e.useContext(oe),{pathname:a}=ue(),s=JSON.stringify(G(r));return e.useMemo(()=>W(t,JSON.parse(s),a,"path"===n),[t,s,a,n])}function pe(t,n,r,a,s){y(ce(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=e.useContext(se),{matches:o}=e.useContext(oe),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",f=c&&c.route;{let e=f&&f.path||"";Te(d,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let m,g=ue();if(n){var p;let e="string"===typeof n?C(n):n;y("/"===h||(null===(p=e.pathname)||void 0===p?void 0:p.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),m=e}else m=g;let w=m.pathname||"/",S=w;if("/"!==h){let e=h.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(e.length).join("/")}let N=A(t,{pathname:S});v(f||null!=N,'No routes matched location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" ')),v(null==N||void 0!==N[N.length-1].route.element||void 0!==N[N.length-1].route.Component||void 0!==N[N.length-1].route.lazy,'Matched leaf route at location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let b=Ne(N&&N.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:Y([h,i.encodeLocation?i.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:Y([h,i.encodeLocation?i.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,r,a,s);return n&&b?e.createElement(ie.Provider,{value:{location:l({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:"POP"}},b):b}function ye(){let t=xe(),n=Z(t)?"".concat(t.status," ").concat(t.statusText):t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},i={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=e.createElement(e.Fragment,null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:i},"ErrorBoundary")," or"," ",e.createElement("code",{style:i},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:s},r):null,o)}var ve=e.createElement(ye,null),we=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?e.createElement(oe.Provider,{value:this.props.routeContext},e.createElement(le.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Se(t){let{routeContext:n,match:r,children:a}=t,s=e.useContext(J);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(oe.Provider,{value:n},a)}function Ne(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==t){if(!r)return null;if(r.errors)t=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;t=r.matches}}let s=t,i=null===r||void 0===r?void 0:r.errors;if(null!=i){let e=s.findIndex(e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id]));y(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let o=!1,l=-1;if(r)for(let e=0;e<s.length;e++){let t=s[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:n}=r,a=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!n||void 0===n[t.route.id]);if(t.route.lazy||a){o=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}return s.reduceRight((t,c,u)=>{let d,h=!1,f=null,m=null;r&&(d=i&&c.route.id?i[c.route.id]:void 0,f=c.route.errorElement||ve,o&&(l<0&&0===u?(Te("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):l===u&&(h=!0,m=c.route.hydrateFallbackElement||null)));let g=n.concat(s.slice(0,u+1)),p=()=>{let n;return n=d?f:h?m:c.route.Component?e.createElement(c.route.Component,null):c.route.element?c.route.element:t,e.createElement(Se,{match:c,routeContext:{outlet:t,matches:g,isDataRoute:null!=r},children:n})};return r&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?e.createElement(we,{location:r.location,revalidation:r.revalidation,component:f,error:d,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0},unstable_onError:a}):p()},null)}function Ce(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function be(t){let n=e.useContext(J);return y(n,Ce(t)),n}function Ee(t){let n=e.useContext(ee);return y(n,Ce(t)),n}function Ae(t){let n=function(t){let n=e.useContext(oe);return y(n,Ce(t)),n}(t),r=n.matches[n.matches.length-1];return y(r.route.id,"".concat(t,' can only be used on routes that contain a unique "id"')),r.route.id}function xe(){var t;let n=e.useContext(le),r=Ee("useRouteError"),a=Ae("useRouteError");return void 0!==n?n:null===(t=r.errors)||void 0===t?void 0:t[a]}var Ie={};function Te(e,t,n){t||Ie[e]||(Ie[e]=!0,v(!1,n))}var _e={};function je(e,t){e||_e[t]||(_e[t]=!0,console.warn(t))}e.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:a}=e;return pe(t,void 0,r,a,n)});function Re(t){let{to:n,replace:r,state:a,relative:s}=t;y(ce(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=e.useContext(se);v(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=e.useContext(oe),{pathname:l}=ue(),c=fe(),u=W(n,G(o),l,"path"===s),d=JSON.stringify(u);return e.useEffect(()=>{c(JSON.parse(d),{replace:r,state:a,relative:s})},[c,d,s,r,a]),null}function De(t){return function(t){let n=e.useContext(oe).outlet;return e.useMemo(()=>n&&e.createElement(me.Provider,{value:t},n),[n,t])}(t.context)}function Me(e){y(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Oe(t){let{basename:n="/",children:r=null,location:a,navigationType:s="POP",navigator:i,static:o=!1}=t;y(!ce(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=e.useMemo(()=>({basename:l,navigator:i,static:o,future:{}}),[l,i,o]);"string"===typeof a&&(a=C(a));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:m="default"}=a,g=e.useMemo(()=>{let e=z(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:f,key:m},navigationType:s}},[l,u,d,h,f,m,s]);return v(null!=g,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:e.createElement(se.Provider,{value:c},e.createElement(ie.Provider,{children:r,value:g}))}function ke(e){let{children:t,location:n}=e;return pe(Pe(t),n)}e.Component;function Pe(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return e.Children.forEach(t,(t,a)=>{if(!e.isValidElement(t))return;let s=[...n,a];if(t.type===e.Fragment)return void r.push.apply(r,Pe(t.props.children,s));y(t.type===Me,"[".concat("string"===typeof t.type?t.type:t.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),y(!t.props.index||!t.props.children,"An index route cannot have child routes.");let i={id:t.props.id||s.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,middleware:t.props.middleware,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(i.children=Pe(t.props.children,s)),r.push(i)}),r}var Le="get",Fe="application/x-www-form-urlencoded";function Be(e){return null!=e&&"string"===typeof e.tagName}var Ue=null;var ze=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function He(e){return null==e||ze.has(e)?e:(v(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Fe,'"')),null)}function Ve(e,t){let n,r,a,s,i;if(Be(o=e)&&"form"===o.tagName.toLowerCase()){let i=e.getAttribute("action");r=i?z(i,t):null,n=e.getAttribute("method")||Le,a=He(e.getAttribute("enctype"))||Fe,s=new FormData(e)}else if(function(e){return Be(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Be(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||i.getAttribute("action");if(r=o?z(o,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||Le,a=He(e.getAttribute("formenctype"))||He(i.getAttribute("enctype"))||Fe,s=new FormData(i,e),!function(){if(null===Ue)try{new FormData(document.createElement("form"),0),Ue=!1}catch(e){Ue=!0}return Ue}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,r)}}else{if(Be(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Le,r=null,a=Fe,i=e}var o;return s&&"text/plain"===a&&(i=s,s=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:s,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ge(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function We(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===z(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function Ye(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Xe(e){return null!=e&&"string"===typeof e.page}function Qe(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function qe(e,t,n,r,a,s){let i=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>i(e,t)||o(e,t)):"data"===s?t.filter((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(i(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function Ze(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1),[...new Set(r)];var r}function Ke(e,t){let n=new Set,r=new Set(t);return e.reduce((e,a)=>{if(t&&!Xe(a)&&"script"===a.as&&a.href&&r.has(a.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(a));return n.has(s)||(n.add(s),e.push({key:s,link:a})),e},[])}function $e(e,t){return"lazy"===e.mode&&!0===t}function Je(){let t=e.useContext(J);return Ge(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function et(){let t=e.useContext(ee);return Ge(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var tt=e.createContext(void 0);function nt(){let t=e.useContext(tt);return Ge(t,"You must render this element inside a <HydratedRouter> element"),t}function rt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function at(e,t,n){if(n&&!lt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}tt.displayName="FrameworkContext";function st(t){let{page:n}=t,a=r(t,u),{router:s}=Je(),i=e.useMemo(()=>A(s.routes,n,s.basename),[s.routes,n,s.basename]);return i?e.createElement(ot,l({page:n,matches:i},a)):null}function it(t){let{manifest:n,routeModules:r}=nt(),[a,s]=e.useState([]);return e.useEffect(()=>{let e=!1;return async function(e,t,n){return Ke((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Ye(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Qe).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?l(l({},e),{},{rel:"prefetch",as:"style"}):l(l({},e),{},{rel:"prefetch"})))}(t,n,r).then(t=>{e||s(t)}),()=>{e=!0}},[t,n,r]),a}function ot(t){let{page:n,matches:a}=t,s=r(t,d),i=ue(),{manifest:o,routeModules:c}=nt(),{basename:u}=Je(),{loaderData:h,matches:f}=et(),m=e.useMemo(()=>qe(n,a,f,o,i,"data"),[n,a,f,o,i]),g=e.useMemo(()=>qe(n,a,f,o,i,"assets"),[n,a,f,o,i]),p=e.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let e=new Set,t=!1;if(a.forEach(n=>{var r;let a=o.routes[n.route.id];a&&a.hasLoader&&(!m.some(e=>e.route.id===n.route.id)&&n.route.id in h&&null!==(r=c[n.route.id])&&void 0!==r&&r.shouldRevalidate||a.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let r=We(n,u,"data");return t&&e.size>0&&r.searchParams.set("_routes",a.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[r.pathname+r.search]},[u,h,i,o,m,a,n,c]),y=e.useMemo(()=>Ze(g,o),[g,o]),v=it(g);return e.createElement(e.Fragment,null,p.map(t=>e.createElement("link",l({key:t,rel:"prefetch",as:"fetch",href:t},s))),y.map(t=>e.createElement("link",l({key:t,rel:"modulepreload",href:t},s))),v.map(t=>{let{key:n,link:r}=t;return e.createElement("link",l({key:n,nonce:s.nonce},r))}))}var lt=!1;function ct(t){let{manifest:n,serverHandoffString:a,isSpaMode:s,renderMeta:i,routeDiscovery:o,ssr:u}=nt(),{router:d,static:h,staticContext:f}=Je(),{matches:m}=et(),g=e.useContext(te),p=$e(o,u);i&&(i.didRenderScripts=!0);let y=at(m,null,s);e.useEffect(()=>{0},[]);let v=e.useMemo(()=>{var s;if(g)return null;let i=f?"window.__reactRouterContext = ".concat(a,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",o=h?"".concat(null!==n.hmr&&void 0!==s&&s.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(p?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(y.map((e,t)=>{let r="route".concat(t),a=n.routes[e.route.id];Ge(a,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:i,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=a,u=[...s?[{module:s,varName:"".concat(r,"_clientAction")}]:[],...i?[{module:i,varName:"".concat(r,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(p?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,a=r(e,c),s=new Set(t.state.matches.map(e=>e.route.id)),i=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(i.pop();i.length>0;)o.push("/".concat(i.join("/"))),i.pop();o.forEach(e=>{let n=A(t.routes,e,t.basename);n&&n.forEach(e=>s.add(e.route.id))});let u=[...s].reduce((e,t)=>Object.assign(e,{[t]:a.routes[t]}),{});return l(l({},a),{},{routes:u,sri:!!n||void 0})}(n,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return e.createElement(e.Fragment,null,e.createElement("script",l(l({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:i},type:void 0})),e.createElement("script",l(l({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:"module",async:!0})))},[]),w=lt||g?[]:(n.entry.imports.concat(Ze(y,n,{includeHydrateFallback:!0})),[...new Set(S)]);var S;let N="object"===typeof n.sri?n.sri:{};return je(!g,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),lt||g?null:e.createElement(e.Fragment,null,"object"===typeof n.sri?e.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:N})}}):null,p?null:e.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:t.crossOrigin,integrity:N[n.url],suppressHydrationWarning:!0}),e.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:t.crossOrigin,integrity:N[n.entry.module],suppressHydrationWarning:!0}),w.map(n=>e.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:t.crossOrigin,integrity:N[n],suppressHydrationWarning:!0})),v)}function ut(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}e.Component;function dt(t){let{error:n,isOutsideRemixApp:r}=t;console.error(n);let a,s=e.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Z(n))return e.createElement(ht,{title:"Unhandled Thrown Response!"},e.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),s);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return e.createElement(ht,{title:"Application Error!",isOutsideRemixApp:r},e.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),e.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},a.stack),s)}function ht(t){var n;let{title:r,renderScripts:a,isOutsideRemixApp:s,children:i}=t,{routeModules:o}=nt();return null!==o.root&&void 0!==n&&n.Layout&&!s?i:e.createElement("html",{lang:"en"},e.createElement("head",null,e.createElement("meta",{charSet:"utf-8"}),e.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),e.createElement("title",null,r)),e.createElement("body",null,e.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,a?e.createElement(ct,null):null)))}var ft="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ft&&(window.__reactRouterVersion="7.9.4")}catch(sa){}function mt(t){let{basename:n,children:r,window:a}=t,s=e.useRef();null==s.current&&(s.current=p({window:a,v5Compat:!0}));let i=s.current,[o,l]=e.useState({action:i.action,location:i.location}),c=e.useCallback(t=>{e.startTransition(()=>l(t))},[l]);return e.useLayoutEffect(()=>i.listen(c),[i,c]),e.createElement(Oe,{basename:n,children:r,location:o.location,navigationType:o.action,navigator:i})}var gt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pt=e.forwardRef(function(t,n){let a,{onClick:s,discover:i="render",prefetch:o="none",relative:c,reloadDocument:u,replace:d,state:f,target:m,to:g,preventScrollReset:p,viewTransition:w}=t,S=r(t,h),{basename:C}=e.useContext(se),b="string"===typeof g&&gt.test(g),E=!1;if("string"===typeof g&&b&&(a=g,ft))try{let e=new URL(window.location.href),t=g.startsWith("//")?new URL(e.protocol+g):new URL(g),n=z(t.pathname,C);t.origin===e.origin&&null!=n?g=n+t.search+t.hash:E=!0}catch(sa){v(!1,'<Link to="'.concat(g,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let A=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(ce(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=e.useContext(se),{hash:s,pathname:i,search:o}=ge(t,{relative:n}),l=i;return"/"!==r&&(l="/"===i?r:Y([r,i])),a.createHref({pathname:l,search:o,hash:s})}(g,{relative:c}),[x,I,T]=function(t,n){let r=e.useContext(tt),[a,s]=e.useState(!1),[i,o]=e.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=n,f=e.useRef(null);e.useEffect(()=>{if("render"===t&&o(!0),"viewport"===t){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[t]),e.useEffect(()=>{if(a){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[a]);let m=()=>{s(!0)},g=()=>{s(!1),o(!1)};return r?"intent"!==t?[i,f,{}]:[i,f,{onFocus:rt(l,m),onBlur:rt(c,g),onMouseEnter:rt(u,m),onMouseLeave:rt(d,g),onTouchStart:rt(h,m)}]:[!1,f,{}]}(o,S),_=function(t){let{target:n,replace:r,state:a,preventScrollReset:s,relative:i,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=fe(),c=ue(),u=ge(t,{relative:i});return e.useCallback(e=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,n)){e.preventDefault();let n=void 0!==r?r:N(c)===N(u);l(t,{replace:n,state:a,preventScrollReset:s,relative:i,viewTransition:o})}},[c,l,u,r,a,n,t,s,i,o])}(g,{replace:d,state:f,target:m,preventScrollReset:p,relative:c,viewTransition:w});let j=e.createElement("a",l(l(l({},S),T),{},{href:a||A,onClick:E||u?s:function(e){s&&s(e),e.defaultPrevented||_(e)},ref:ut(n,I),target:m,"data-discover":b||"render"!==i?void 0:"true"}));return x&&!b?e.createElement(e.Fragment,null,j,e.createElement(st,{page:A})):j});pt.displayName="Link",e.forwardRef(function(t,n){let{"aria-current":a="page",caseSensitive:s=!1,className:i="",end:o=!1,style:c,to:u,viewTransition:d,children:h}=t,m=r(t,f),g=ge(u,{relative:m.relative}),p=ue(),v=e.useContext(ee),{navigator:w,basename:S}=e.useContext(se),N=null!=v&&function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.useContext(ne);y(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=wt("useViewTransitionState"),s=ge(t,{relative:n});if(!r.isTransitioning)return!1;let i=z(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=z(r.nextLocation.pathname,a)||r.nextLocation.pathname;return null!=F(s.pathname,o)||null!=F(s.pathname,i)}(g)&&!0===d,C=w.encodeLocation?w.encodeLocation(g).pathname:g.pathname,b=p.pathname,E=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(b=b.toLowerCase(),E=E?E.toLowerCase():null,C=C.toLowerCase()),E&&S&&(E=z(E,S)||E);const A="/"!==C&&C.endsWith("/")?C.length-1:C.length;let x,I=b===C||!o&&b.startsWith(C)&&"/"===b.charAt(A),T=null!=E&&(E===C||!o&&E.startsWith(C)&&"/"===E.charAt(C.length)),_={isActive:I,isPending:T,isTransitioning:N},j=I?a:void 0;x="function"===typeof i?i(_):[i,I?"active":null,T?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let R="function"===typeof c?c(_):c;return e.createElement(pt,l(l({},m),{},{"aria-current":j,className:x,ref:n,style:R,to:u,viewTransition:d}),"function"===typeof h?h(_):h)}).displayName="NavLink";var yt=e.forwardRef((t,n)=>{let{discover:a="render",fetcherKey:s,navigate:i,reloadDocument:o,replace:c,state:u,method:d=Le,action:h,onSubmit:f,relative:g,preventScrollReset:p,viewTransition:v}=t,w=r(t,m),S=Ct(),C=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=e.useContext(se),a=e.useContext(oe);y(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),i=l({},ge(t||".",{relative:n})),o=ue();if(null==t){i.search=o.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();i.search=n?"?".concat(n):""}}t&&"."!==t||!s.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(i.pathname="/"===i.pathname?r:Y([r,i.pathname]));return N(i)}(h,{relative:g}),b="get"===d.toLowerCase()?"get":"post",E="string"===typeof h&&gt.test(h);return e.createElement("form",l(l({ref:n,method:b,action:C,onSubmit:o?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;S(t||e.currentTarget,{fetcherKey:s,method:n,navigate:i,replace:c,state:u,relative:g,preventScrollReset:p,viewTransition:v})}},w),{},{"data-discover":E||"render"!==a?void 0:"true"}))});function vt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function wt(t){let n=e.useContext(J);return y(n,vt(t)),n}yt.displayName="Form";var St=0,Nt=()=>"__".concat(String(++St),"__");function Ct(){let{router:t}=wt("useSubmit"),{basename:n}=e.useContext(se),r=Ae("useRouteId");return e.useCallback(async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:i,encType:o,formData:l,body:c}=Ve(e,n);if(!1===a.navigate){let e=a.fetcherKey||Nt();await t.fetch(e,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||i,formEncType:a.encType||o,flushSync:a.flushSync})}else await t.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||i,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,n,r])}const bt="http://localhost:8080/api",Et=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="".concat(bt).concat(e);console.log("\ud83c\udf10 API CALL: ".concat(t.method||"GET"," ").concat(n));const r=l(l({},t),{},{mode:"cors",credentials:"include",headers:l(l({},{"Content-Type":"application/json",Accept:"application/json"}),t.headers)});try{const e=await fetch(n,r);return await(async e=>{if(console.log("\ud83d\udd0d API Response Code: ".concat(e.status)),204===e.status)return null;const t=e.headers.get("content-type");if(!e.ok){let r;try{if(t&&t.includes("application/json")){const t=await e.json();r=t.error||t.message||"HTTP ".concat(e.status)}else r=await e.text()||"HTTP ".concat(e.status,": ").concat(e.statusText)}catch(n){r="HTTP ".concat(e.status,": ").concat(e.statusText)}throw console.error("\u274c API Error Details:",{status:e.status,message:r,url:e.url}),new Error(r)}try{if(t&&t.includes("application/json")){const t=await e.json();return console.log("\u2705 API Success - JSON Data received"),t}{const t=await e.text();return console.log("\u2705 API Success - Text Data received"),t}}catch(n){throw console.error("\u274c Response Parse Error:",n),new Error("Failed to parse response")}})(e)}catch(a){if(console.error("\ud83d\udca5 API Call Failed for ".concat(n,":"),a),a.message.includes("Failed to fetch")||a.message.includes("NetworkError")||"TypeError"===a.name)throw new Error("CORS/Network error: Cannot connect to backend at ".concat(bt,". Check if Spring Boot is running and CORS is enabled."));throw a}},At=e=>Et(e,{method:"GET"}),xt=(e,t)=>Et(e,{method:"POST",body:JSON.stringify(t)}),It=(e,t)=>Et(e,{method:"PUT",body:JSON.stringify(t)}),Tt=e=>Et(e,{method:"DELETE"}),_t={login:e=>xt("/auth/login",e),validateSession:()=>xt("/auth/validate"),logout:()=>xt("/auth/logout"),health:()=>At("/auth/health")},jt={register:e=>xt("/students/register",e),getAll:()=>At("/students"),getById:e=>At("/students/".concat(e)),getByStudentId:e=>At("/students/student-id/".concat(encodeURIComponent(e))),update:(e,t)=>It("/students/".concat(e),t),delete:e=>Tt("/students/".concat(e)),getByClass:e=>At("/students/class/".concat(e)),getByGrade:e=>At("/students/grade/".concat(encodeURIComponent(e),"?t=").concat(Date.now())),getWithoutClass:()=>At("/students/unassigned"),updateClass:(e,t)=>It("/students/".concat(e,"/class/").concat(t)),getClassStatistics:e=>At("/students/class/".concat(e,"/statistics")),getRecent:()=>At("/students/recent"),testConnection:()=>At("/students?limit=1&test=true")},Rt={getAll:()=>At("/classes"),getAllActive:()=>At("/classes/active"),getById:e=>At("/classes/".concat(e)),create:e=>xt("/classes",e),update:(e,t)=>It("/classes/".concat(e),t),delete:e=>Tt("/classes/".concat(e)),deactivate:e=>It("/classes/".concat(e,"/deactivate")),getStudentCount:e=>At("/classes/".concat(e,"/student-count")),getByGrade:e=>(console.log("\ud83c\udfaf Getting classes for grade: ".concat(e)),At("/classes/by-grade?grade=".concat(encodeURIComponent(e))).then(e=>void 0!==e.classes?e.classes:e).catch(e=>{throw console.error("\u274c Error in getByGrade:",e),e})),getByGradePath:e=>{const t=e.replace(/\//g,"-");return At("/classes/grade/".concat(encodeURIComponent(t)))},testGradeEndpoint:e=>At("/classes/grade-test/".concat(encodeURIComponent(e.replace(/\//g,"-"))))},Dt={getAll:()=>At("/fees"),getByClass:e=>(console.log("\ud83d\udcb0 Fetching fee structure for class ID: ".concat(e)),At("/fees/class/".concat(e)).then(t=>(console.log("\u2705 Fee structure loaded for class ".concat(e,":"),t),t)).catch(t=>(console.warn("\u26a0\ufe0f Fee structure not found for class ".concat(e,":"),t.message),null))),create:e=>xt("/fees",e),update:(e,t)=>It("/fees/".concat(e),t),delete:e=>Tt("/fees/".concat(e)),getStudentFeeStatus:async e=>{console.log("\ud83d\udcb0 [feeAPI] Getting fee status for student: ".concat(e));try{const t=await At("/fee-payments/student/".concat(encodeURIComponent(e),"/status")),n=new Date,r=n.getDate(),a=(n.getMonth(),n.getFullYear(),l(l({},t),{},{gracePeriodActive:void 0!==t.gracePeriodActive?t.gracePeriodActive:r<=14,gracePeriodEnds:t.gracePeriodEnds||(r<=14?14-r:0),daysOverdue:t.daysOverdue||(r>14?r-15:0),checkDate:n.toISOString().split("T")[0]}));return console.log("\u2705 Enhanced fee status:",a),a}catch(t){console.error("\u274c Error in getStudentFeeStatus:",t.message);const n=new Date,r=n.getDate(),a=r<=14,s={studentId:e,studentName:"Unknown Student",className:"Unknown Class",classId:null,totalDue:8e3,totalPaid:0,balance:8e3,overallStatus:a?"PENDING":"OVERDUE",paymentStatus:a?"GRACE_PERIOD":"UNPAID",daysOverdue:r>14?r-15:0,gracePeriodActive:a,gracePeriodEnds:a?14-r:0,nextDueDate:a?new Date(n.getFullYear(),n.getMonth(),15).toISOString().split("T")[0]:new Date(n.getFullYear(),n.getMonth()+1,1).toISOString().split("T")[0],isFallback:!0,checkDate:n.toISOString().split("T")[0]};return console.log("\ud83d\udccb Returning fallback fee status:",s),s}},getFallbackForGrade:e=>{console.log("\ud83c\udfaf Getting fallback fee structure for grade: ".concat(e));const t={"A/L":{id:0,schoolClass:{id:0,className:"".concat(e," General"),grade:e},monthlyFee:4e3,admissionFee:2500,examFee:1500,sportsFee:600,libraryFee:400,labFee:900,otherFee:600,totalFee:10500,description:"Standard A/L Fee Structure",isFallback:!0},"O/L":{id:0,schoolClass:{id:0,className:"".concat(e," General"),grade:e},monthlyFee:3e3,admissionFee:2e3,examFee:1e3,sportsFee:500,libraryFee:300,labFee:700,otherFee:500,totalFee:8e3,description:"Standard O/L Fee Structure",isFallback:!0}};return Promise.resolve(t[e]||t["O/L"])}},Mt={recordPayment:e=>(console.log("\ud83d\udcb3 Recording payment:",e),xt("/fee-payments/record",e)),getStudentPayments:e=>At("/fee-payments/student/".concat(encodeURIComponent(e))),getFeeStatus:async e=>{console.log("\ud83d\udcb0 Checking fee status for student: ".concat(e));try{const t=await At("/fee-payments/student/".concat(encodeURIComponent(e),"/status"));return console.log("\u2705 Fee status received:",t),t}catch(t){console.warn("\u26a0\ufe0f Fee status endpoint failed: ".concat(t.message));const n=new Date,r=n.getDate(),a=r<=14,s={studentId:e,studentName:"Unknown Student",className:"Unknown Class",classId:null,totalDue:8e3,totalPaid:0,balance:8e3,overallStatus:a?"PENDING":"OVERDUE",paymentStatus:a?"GRACE_PERIOD":"UNPAID",daysOverdue:r>14?r-15:0,gracePeriodActive:a,gracePeriodEnds:a?14-r:0,nextDueDate:a?new Date(n.getFullYear(),n.getMonth(),15).toISOString().split("T")[0]:new Date(n.getFullYear(),n.getMonth()+1,1).toISOString().split("T")[0],isFallback:!0};return console.log("\ud83d\udccb Returning fallback fee status:",s),s}},getFeeStatusForClass:async(e,t)=>{console.log("\ud83d\udcca Getting fee status for student ".concat(e,", class ").concat(t));try{const n=await At("/fee-payments/student/".concat(encodeURIComponent(e),"/status"));return n.classId&&n.classId!==t&&(console.log("\u26a0\ufe0f Fee status is for class ".concat(n.classId,", not ").concat(t,". Adapting...")),n.classId=t,n.isAdapted=!0),n}catch(n){console.log("\u26a0\ufe0f Fee status endpoint not available, using fallback: ".concat(n.message));try{const n=await jt.getByStudentId(e).catch(()=>null),a=await Rt.getById(t).catch(()=>null),s=new Date,i=s.getDate(),o=i<=14,l=i>14?i-15:0,c=await Mt.getStudentPayments(e).catch(()=>[]),u=c.filter(e=>e.classId===t).reduce((e,t)=>e+(t.amountPaid||0),0);let d=8e3;try{const e=await Dt.getByClass(t);e&&(d=e.totalFee||d)}catch(r){console.log("Using default fee amount")}const h=d-u;let f;f=h<=0?"PAID":o?u>0?"PARTIAL":"PENDING":"OVERDUE";return{studentId:e,studentName:n?"".concat(n.firstName," ").concat(n.lastName):"Unknown Student",className:a?a.className:"Class ".concat(t),classId:t,totalDue:d,totalPaid:u,balance:h,overallStatus:f,paymentStatus:"PAID"===f?"COMPLETE":"PENDING"===f?"GRACE_PERIOD":"PARTIAL"===f?"IN_PROGRESS":"UNPAID",daysOverdue:"OVERDUE"===f?l:null,gracePeriodActive:o,gracePeriodEnds:o?14-i:0,nextDueDate:o?new Date(s.getFullYear(),s.getMonth(),15).toISOString().split("T")[0]:new Date(s.getFullYear(),s.getMonth()+1,1).toISOString().split("T")[0],isFallback:!0}}catch(a){console.error("Fallback fee status failed:",a);const n=new Date,r=n.getDate(),s=r<=14;return{studentId:e,studentName:"Unknown",className:"Unknown Class",classId:t,totalDue:8e3,totalPaid:0,balance:8e3,overallStatus:s?"PENDING":"OVERDUE",paymentStatus:s?"GRACE_PERIOD":"UNPAID",daysOverdue:s?0:r-15,gracePeriodActive:s,gracePeriodEnds:s?14-r:0,nextDueDate:s?new Date(n.getFullYear(),n.getMonth(),15).toISOString().split("T")[0]:new Date(n.getFullYear(),n.getMonth()+1,1).toISOString().split("T")[0],isFallback:!0}}}},getStudentPaymentsForClass:(e,t)=>At("/fee-payments/student/".concat(encodeURIComponent(e),"/class/").concat(t)),getOverdueStudents:()=>At("/fee-payments/overdue"),getFeeStatistics:()=>At("/fee-payments/statistics"),getRecentPayments:()=>At("/fee-payments/recent")},Ot={record:e=>xt("/attendance/record",e),getByStudent:e=>At("/attendance/student/".concat(encodeURIComponent(e))),getByDate:e=>At("/attendance/date/".concat(e)),getSummary:e=>At("/attendance/student/".concat(encodeURIComponent(e),"/summary")),recordManual:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const a=new URLSearchParams(l({studentId:e,date:t,status:n},r&&{sessionId:r.toString()}));return xt("/attendance/manual?".concat(a),{})},getBySession:e=>At("/attendance/session/".concat(e)),getActiveSessions:()=>At("/attendance/sessions/active"),getToday:()=>At("/attendance/today"),recordForSession:async(e,t,n)=>{const r=await fetch("/api/attendance/session/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:e,status:n})});if(!r.ok)throw new Error("Failed to record attendance");return r.json()}},kt={getByClass:e=>At("/schedules/class/".concat(e)),getTodayByClass:e=>At("/schedules/class/".concat(e,"/today")),create:e=>xt("/schedules",e),update:(e,t)=>It("/schedules/".concat(e),t),delete:e=>Tt("/schedules/".concat(e)),getSchedulesByClassAndDate:async(e,t)=>{try{const n=await fetch("/api/schedules/class/".concat(e,"?date=").concat(t)),r=n.headers.get("content-type");if(r&&r.includes("text/html"))throw new Error("API returned HTML instead of JSON");if(!n.ok)throw new Error("HTTP ".concat(n.status,": ").concat(n.statusText));return await n.json()}catch(n){throw console.error("getSchedulesByClassAndDate error:",n),n}},getTodaySchedulesByClass:async e=>{try{const t=await fetch("/api/schedules/class/".concat(e,"/today")),n=t.headers.get("content-type");if(n&&n.includes("text/html"))throw new Error("API returned HTML instead of JSON");if(!t.ok)throw new Error("HTTP ".concat(t.status,": ").concat(t.statusText));return await t.json()}catch(t){throw console.error("getTodaySchedulesByClass error:",t),t}},getSchedulesByClass:async e=>{try{const t=await fetch("/api/schedules/class/".concat(e)),n=t.headers.get("content-type");if(n&&n.includes("text/html"))throw new Error("API returned HTML instead of JSON");if(!t.ok)throw new Error("HTTP ".concat(t.status,": ").concat(t.statusText));return await t.json()}catch(t){throw console.error("getSchedulesByClass error:",t),t}}},Pt={getActive:()=>At("/attendance/sessions/active"),getByClassAndDate:(e,t)=>At("/attendance/sessions/class/".concat(e,"?date=").concat(t)),create:e=>xt("/attendance/sessions",e),start:e=>xt("/attendance/sessions/".concat(e,"/start")),end:e=>xt("/attendance/sessions/".concat(e,"/end")),getToday:()=>At("/attendance/sessions/today")},Lt={checkFeeStatusForAttendance:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("\ud83c\udfaf Checking fee status for attendance: student=".concat(e,", class=").concat(t));try{let s;s=t?await Mt.getFeeStatusForClass(e,t):await Mt.getFeeStatus(e);const i=(new Date).getDate(),o=s.gracePeriodActive||i<=14,c=s.daysOverdue||(i>14?i-15:0);let u=!0,d=!1,h="",f=!1;if("PAID"===s.overallStatus)u=!0,h="";else if(o){if(u=!0,f="PAID"!==s.overallStatus,"PENDING"===s.overallStatus)h="Fees not paid yet. Grace period ends in ".concat(s.gracePeriodEnds||14-i," day(s)");else if("PARTIAL"===s.overallStatus){var n,r;h="Partial payment: LKR ".concat(null===(n=s.totalPaid)||void 0===n?void 0:n.toFixed(2)," paid, balance: LKR ").concat(null===(r=s.balance)||void 0===r?void 0:r.toFixed(2))}}else{var a;if(c<=7)u=!0,d=!1,h="Fees overdue by ".concat(c," day(s). Balance: LKR ").concat(null===(a=s.balance)||void 0===a?void 0:a.toFixed(2)),f=!0;else c<=14?(u=!1,d=!0,h="Fees overdue by ".concat(c," day(s). Teacher approval required"),f=!0):(u=!1,d=!1,h="Attendance blocked: Fees overdue by ".concat(c," days"),f=!0)}return l(l({},s),{},{allowAttendance:u,requireTeacherApproval:d,warningMessage:h,showWarning:f,isGracePeriodActive:o,daysOverdue:c,checkTimestamp:(new Date).toISOString()})}catch(s){return console.error("Error in fee check for attendance:",s),{studentId:e,allowAttendance:!0,requireTeacherApproval:!1,warningMessage:"Fee check failed - attendance allowed",showWarning:!1,overallStatus:"ERROR",isFallback:!0,checkTimestamp:(new Date).toISOString()}}}};var Ft=n(579);const Bt=()=>{const[t,n]=(0,e.useState)({totalStudents:0,todayAttendance:0,presentToday:0,attendanceRate:0,feeCollection:0,pendingPayments:0,totalClasses:0,activeSessionsCount:0,monthlyCollection:0,averageAttendance:0,newRegistrations:0}),[r,a]=(0,e.useState)([]),[s,i]=(0,e.useState)([]),[o,l]=(0,e.useState)([]),[c,u]=(0,e.useState)([]),[d,h]=(0,e.useState)([]),[f,m]=(0,e.useState)([]),[g,p]=(0,e.useState)([]),[y,v]=(0,e.useState)([]),[w,S]=(0,e.useState)([]),[N,C]=(0,e.useState)(!0),[b,E]=(0,e.useState)(null),[A,x]=(0,e.useState)("overview");(0,e.useEffect)(()=>{I();const e=setInterval(I,12e4);return()=>clearInterval(e)},[]);const I=async()=>{try{C(!0),E(null);const t=(new Date).toISOString().split("T")[0];console.log("\ud83d\udcca Loading comprehensive dashboard data...");const[r,s,o,c,d,f]=await Promise.all([jt.getAll().catch(e=>(console.log("Students API error:",e.message),[])),Ot.getByDate(t).catch(e=>(console.log("Attendance API error:",e.message),[])),Rt.getAllActive().catch(e=>(console.log("Classes API error:",e.message),[])),Pt.getActive().catch(e=>(console.log("Sessions API error:",e.message),[])),Mt.getFeeStatistics().catch(e=>(console.log("Fee stats not available:",e.message),{totalCollected:0,pendingStudents:0})),Mt.getOverdueStudents().catch(e=>(console.log("Overdue students not available:",e.message),[]))]),g=Array.isArray(r)?r:[],y=Array.isArray(s)?s:[],w=Array.isArray(o)?o:[],N=Array.isArray(c)?c:[],A=Array.isArray(f)?f:[],x=y.filter(e=>"PRESENT"===e.status||"LATE"===e.status).length,I=g.length>0?Math.round(x/g.length*100):0,T=new Date;T.setDate(T.getDate()-7);const _=g.filter(e=>new Date(e.registrationDate||new Date)>T).length;n({totalStudents:g.length,todayAttendance:y.length,presentToday:x,attendanceRate:I,feeCollection:d.totalCollected||0,pendingPayments:d.pendingStudents||0,totalClasses:w.length,activeSessionsCount:N.length,monthlyCollection:1.5*(d.totalCollected||0),averageAttendance:Math.round(.9*I),newRegistrations:_});const j=await Promise.all(w.map(async e=>{try{const t=await jt.getByClass(e.id).catch(()=>[]),n=y.filter(e=>t.some(t=>t.studentId===e.studentId)).filter(e=>"PRESENT"===e.status||"LATE"===e.status).length;return{classId:e.id,className:e.className,totalStudents:t.length,presentCount:n,attendanceRate:t.length>0?Math.round(n/t.length*100):0,classTeacher:e.classTeacher,roomNumber:e.roomNumber,grade:e.grade}}catch(b){return console.error("Error loading stats for class ".concat(e.className,":"),b),{classId:e.id,className:e.className,totalStudents:0,presentCount:0,attendanceRate:0,classTeacher:e.classTeacher,roomNumber:e.roomNumber,grade:e.grade}}}));a(j),i(N),p(A.slice(0,10));const R=[...g].sort((e,t)=>new Date(t.registrationDate||new Date)-new Date(e.registrationDate||new Date));l(R.slice(0,5)),u(y.slice(0,10));try{const e=await Mt.getRecentPayments();h(Array.isArray(e)?e.slice(0,5):[])}catch(b){console.log("Recent payments not available:",b.message),h([])}const D=await(async()=>{try{const e=await Pt.getActive();return Array.isArray(e)?e.map(e=>{var t,n,r;return{id:e.id,subject:e.subject||"General",className:(null===(t=e.schoolClass)||void 0===t?void 0:t.className)||"Class",teacher:(null===(n=e.schoolClass)||void 0===n?void 0:n.classTeacher)||"Teacher",room:(null===(r=e.schoolClass)||void 0===r?void 0:r.roomNumber)||"101",startTime:e.scheduledStartTime||"08:00",endTime:e.scheduledEndTime||"09:00"}}):[]}catch(b){return console.log("Could not load schedules, using mock data:",b.message),[{id:1,subject:"Mathematics",className:"10-A",teacher:"Mr. Silva",room:"101",startTime:"08:00",endTime:"09:00"},{id:2,subject:"Science",className:"10-B",teacher:"Mrs. Perera",room:"102",startTime:"09:00",endTime:"10:00"}]}})();m(D.slice(0,6)),v((e=g.length,Array.from({length:7},(t,n)=>{const r=new Date;return r.setDate(r.getDate()-(6-n)),{date:r.toISOString().split("T")[0],present:Math.floor(e*(.7+.2*Math.random())),total:e}}))),S(Array.from({length:6},(e,t)=>{const n=new Date;return n.setMonth(n.getMonth()-(5-t)),{month:n.toLocaleDateString("en-US",{month:"short",year:"numeric"}),amount:Math.floor(5e4+1e5*Math.random())}}))}catch(b){console.error("\u274c Error loading dashboard data:",b),E("Failed to load dashboard data: "+b.message)}finally{C(!1)}var e},T=e=>{const t="PAID"===e?"paid":"PARTIAL"===e?"partial":"pending";return(0,Ft.jsx)("span",{className:"payment-status-badge ".concat(t),children:e})},_=e=>{const t=e.balance||0;return t>5e3?"high":t>2e3?"medium":"low"},j=e=>new Intl.NumberFormat("en-LK",{style:"currency",currency:"LKR"}).format(e||0),R=()=>{I()},D=()=>(0,Ft.jsxs)("div",{className:"trend-chart",children:[(0,Ft.jsxs)("div",{className:"chart-header",children:[(0,Ft.jsx)("h4",{children:"7-Day Attendance Trend"}),(0,Ft.jsx)("span",{className:"trend-indicator positive",children:"+5%"})]}),(0,Ft.jsx)("div",{className:"chart-bars",children:y.map((e,t)=>{const n=e.present/e.total*100;return(0,Ft.jsxs)("div",{className:"chart-bar-container",children:[(0,Ft.jsx)("div",{className:"chart-bar",children:(0,Ft.jsx)("div",{className:"chart-fill",style:{height:"".concat(n,"%")}})}),(0,Ft.jsx)("span",{className:"chart-label",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"short"})}),(0,Ft.jsx)("span",{className:"chart-value",children:e.present})]},t)})})]}),M=()=>(0,Ft.jsxs)("div",{className:"trend-chart",children:[(0,Ft.jsxs)("div",{className:"chart-header",children:[(0,Ft.jsx)("h4",{children:"Fee Collection Trend"}),(0,Ft.jsx)("span",{className:"trend-indicator positive",children:"+12%"})]}),(0,Ft.jsx)("div",{className:"chart-bars horizontal",children:w.map((e,t)=>(0,Ft.jsxs)("div",{className:"chart-bar-container horizontal",children:[(0,Ft.jsx)("div",{className:"chart-bar horizontal",children:(0,Ft.jsx)("div",{className:"chart-fill horizontal",style:{width:"".concat(e.amount/15e4*100,"%")}})}),(0,Ft.jsx)("span",{className:"chart-label",children:e.month}),(0,Ft.jsx)("span",{className:"chart-value",children:j(e.amount)})]},t))})]}),O=()=>(0,Ft.jsxs)("div",{className:"quick-stats-panel",children:[(0,Ft.jsxs)("div",{className:"quick-stat",children:[(0,Ft.jsx)("div",{className:"quick-stat-icon",children:"\ud83d\udcc8"}),(0,Ft.jsxs)("div",{className:"quick-stat-content",children:[(0,Ft.jsxs)("span",{className:"quick-stat-value",children:[t.averageAttendance,"%"]}),(0,Ft.jsx)("span",{className:"quick-stat-label",children:"Avg. Attendance"})]})]}),(0,Ft.jsxs)("div",{className:"quick-stat",children:[(0,Ft.jsx)("div",{className:"quick-stat-icon",children:"\ud83d\udcb0"}),(0,Ft.jsxs)("div",{className:"quick-stat-content",children:[(0,Ft.jsx)("span",{className:"quick-stat-value",children:j(t.monthlyCollection)}),(0,Ft.jsx)("span",{className:"quick-stat-label",children:"Monthly Collection"})]})]}),(0,Ft.jsxs)("div",{className:"quick-stat",children:[(0,Ft.jsx)("div",{className:"quick-stat-icon",children:"\ud83d\udc65"}),(0,Ft.jsxs)("div",{className:"quick-stat-content",children:[(0,Ft.jsx)("span",{className:"quick-stat-value",children:t.newRegistrations}),(0,Ft.jsx)("span",{className:"quick-stat-label",children:"New Students (7d)"})]})]}),(0,Ft.jsxs)("div",{className:"quick-stat",children:[(0,Ft.jsx)("div",{className:"quick-stat-icon",children:"\u23f0"}),(0,Ft.jsxs)("div",{className:"quick-stat-content",children:[(0,Ft.jsx)("span",{className:"quick-stat-value",children:g.length}),(0,Ft.jsx)("span",{className:"quick-stat-label",children:"Overdue Fees"})]})]})]});return N?(0,Ft.jsxs)("div",{className:"dashboard-loading",children:[(0,Ft.jsxs)("div",{className:"loading-animation",children:[(0,Ft.jsx)("div",{className:"loading-spinner"}),(0,Ft.jsxs)("div",{className:"loading-dots",children:[(0,Ft.jsx)("div",{className:"dot"}),(0,Ft.jsx)("div",{className:"dot"}),(0,Ft.jsx)("div",{className:"dot"})]})]}),(0,Ft.jsx)("p",{children:"Loading your comprehensive dashboard..."})]}):b?(0,Ft.jsxs)("div",{className:"dashboard-error",children:[(0,Ft.jsx)("div",{className:"error-animation",children:(0,Ft.jsx)("div",{className:"error-icon",children:"\u26a0\ufe0f"})}),(0,Ft.jsx)("h3",{children:"Unable to Load Dashboard"}),(0,Ft.jsx)("p",{children:b}),(0,Ft.jsxs)("button",{onClick:R,className:"modern-retry-btn",children:[(0,Ft.jsx)("span",{className:"retry-icon",children:"\ud83d\udd04"}),"Try Again"]})]}):(0,Ft.jsxs)("div",{className:"modern-dashboard",children:[(0,Ft.jsx)("div",{className:"dashboard-header",children:(0,Ft.jsxs)("div",{className:"header-content",children:[(0,Ft.jsxs)("div",{className:"welcome-section",children:[(0,Ft.jsx)("h1",{children:"School Management Dashboard"}),(0,Ft.jsx)("p",{children:"Comprehensive overview of student management, attendance, and financial tracking"})]}),(0,Ft.jsxs)("div",{className:"header-actions",children:[(0,Ft.jsx)(O,{}),(0,Ft.jsx)("div",{className:"current-time",children:(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})}),(0,Ft.jsxs)("div",{className:"dashboard-tabs",children:[(0,Ft.jsx)("button",{className:"tab ".concat("overview"===A?"active":""),onClick:()=>x("overview"),children:"\ud83d\udcca Overview"}),(0,Ft.jsx)("button",{className:"tab ".concat("analytics"===A?"active":""),onClick:()=>x("analytics"),children:"\ud83d\udcc8 Analytics"}),(0,Ft.jsx)("button",{className:"tab ".concat("alerts"===A?"active":""),onClick:()=>x("alerts"),children:"\u26a0\ufe0f Alerts"})]}),"overview"===A&&(0,Ft.jsxs)(Ft.Fragment,{children:[(0,Ft.jsxs)("div",{className:"stats-grid",children:[(0,Ft.jsxs)("div",{className:"stat-card primary",children:[(0,Ft.jsxs)("div",{className:"stat-icon",children:[(0,Ft.jsx)("div",{className:"icon-bg"}),(0,Ft.jsx)("span",{children:"\ud83d\udc68\u200d\ud83c\udf93"})]}),(0,Ft.jsxs)("div",{className:"stat-content",children:[(0,Ft.jsx)("h3",{children:"Total Students"}),(0,Ft.jsx)("div",{className:"stat-number",children:t.totalStudents}),(0,Ft.jsxs)("div",{className:"stat-trend positive",children:["+",t.newRegistrations," this week"]})]})]}),(0,Ft.jsxs)("div",{className:"stat-card success",children:[(0,Ft.jsxs)("div",{className:"stat-icon",children:[(0,Ft.jsx)("div",{className:"icon-bg"}),(0,Ft.jsx)("span",{children:"\ud83d\udcca"})]}),(0,Ft.jsxs)("div",{className:"stat-content",children:[(0,Ft.jsx)("h3",{children:"Attendance Rate"}),(0,Ft.jsxs)("div",{className:"stat-number",children:[t.attendanceRate,"%"]}),(0,Ft.jsx)("div",{className:"stat-trend positive",children:"+2% from yesterday"})]})]}),(0,Ft.jsxs)("div",{className:"stat-card warning",children:[(0,Ft.jsxs)("div",{className:"stat-icon",children:[(0,Ft.jsx)("div",{className:"icon-bg"}),(0,Ft.jsx)("span",{children:"\ud83d\udcb0"})]}),(0,Ft.jsxs)("div",{className:"stat-content",children:[(0,Ft.jsx)("h3",{children:"Monthly Collection"}),(0,Ft.jsx)("div",{className:"stat-number",children:j(t.monthlyCollection)}),(0,Ft.jsx)("div",{className:"stat-trend positive",children:"On track"})]})]}),(0,Ft.jsxs)("div",{className:"stat-card danger",children:[(0,Ft.jsxs)("div",{className:"stat-icon",children:[(0,Ft.jsx)("div",{className:"icon-bg"}),(0,Ft.jsx)("span",{children:"\u23f0"})]}),(0,Ft.jsxs)("div",{className:"stat-content",children:[(0,Ft.jsx)("h3",{children:"Pending Payments"}),(0,Ft.jsx)("div",{className:"stat-number",children:t.pendingPayments}),(0,Ft.jsx)("div",{className:"stat-trend negative",children:"Requires attention"})]})]})]}),(0,Ft.jsxs)("div",{className:"section-card",children:[(0,Ft.jsxs)("div",{className:"section-header",children:[(0,Ft.jsx)("h2",{children:"Quick Actions"}),(0,Ft.jsx)("span",{className:"section-badge",children:"All Features"})]}),(0,Ft.jsxs)("div",{className:"action-categories",children:[(0,Ft.jsxs)("div",{className:"action-category",children:[(0,Ft.jsx)("h3",{className:"category-title",children:"\ud83d\udc68\u200d\ud83c\udf93 Student Management"}),(0,Ft.jsxs)("div",{className:"actions-grid",children:[(0,Ft.jsxs)(pt,{to:"/register",className:"action-btn info",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\u2795"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Register Student"}),(0,Ft.jsx)("small",{children:"Add new student to system"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]}),(0,Ft.jsxs)(pt,{to:"/students",className:"action-btn info",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\ud83d\udc65"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"View All Students"}),(0,Ft.jsx)("small",{children:"Browse and manage students"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]}),(0,Ft.jsxs)(pt,{to:"/students/unassigned",className:"action-btn info",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\ud83c\udfaf"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Unassigned Students"}),(0,Ft.jsx)("small",{children:"Students without classes"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]}),(0,Ft.jsxs)(pt,{to:"/student-reports",className:"action-btn info",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\ud83d\udccb"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Student Reports"}),(0,Ft.jsx)("small",{children:"Generate student analytics"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]})]})]}),(0,Ft.jsxs)("div",{className:"action-category",children:[(0,Ft.jsx)("h3",{className:"category-title",children:"\ud83d\udcca Attendance Management"}),(0,Ft.jsxs)("div",{className:"actions-grid",children:[(0,Ft.jsxs)(pt,{to:"/attendance",className:"action-btn accent",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\ud83d\udcf1"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"QR Attendance"}),(0,Ft.jsx)("small",{children:"Scan student QR codes"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]}),(0,Ft.jsxs)(pt,{to:"/attendance/manual",className:"action-btn accent",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\u270f\ufe0f"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Manual Attendance"}),(0,Ft.jsx)("small",{children:"Record attendance manually"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]}),(0,Ft.jsxs)(pt,{to:"/today-attendance",className:"action-btn accent",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\ud83d\udcc5"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Today's Attendance"}),(0,Ft.jsx)("small",{children:"View today's records"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]}),(0,Ft.jsxs)(pt,{to:"/attendance-reports",className:"action-btn accent",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\ud83d\udcc8"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Attendance Reports"}),(0,Ft.jsx)("small",{children:"Generate analytics"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]})]})]}),(0,Ft.jsxs)("div",{className:"action-category",children:[(0,Ft.jsx)("h3",{className:"category-title",children:"\ud83d\udcb0 Fee Management"}),(0,Ft.jsxs)("div",{className:"actions-grid",children:[(0,Ft.jsxs)(pt,{to:"/fee-payment",className:"action-btn success",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\ud83d\udcb3"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Fee Payment"}),(0,Ft.jsx)("small",{children:"Process student payments"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]}),(0,Ft.jsxs)(pt,{to:"/payment-tracker",className:"action-btn success",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\ud83d\udd0d"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Payment Tracker"}),(0,Ft.jsx)("small",{children:"Advanced payment tracking"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]}),(0,Ft.jsxs)(pt,{to:"/fee-structure",className:"action-btn success",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\ud83c\udff7\ufe0f"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Fee Structure"}),(0,Ft.jsx)("small",{children:"Manage class fees"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]}),(0,Ft.jsxs)(pt,{to:"/overdue-fees",className:"action-btn success",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\u23f0"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Overdue Fees"}),(0,Ft.jsx)("small",{children:"View pending payments"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]})]})]}),(0,Ft.jsxs)("div",{className:"action-category",children:[(0,Ft.jsx)("h3",{className:"category-title",children:"\ud83c\udfeb Class Management"}),(0,Ft.jsxs)("div",{className:"actions-grid",children:[(0,Ft.jsxs)(pt,{to:"/classes",className:"action-btn info",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\ud83c\udfeb"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Manage Classes"}),(0,Ft.jsx)("small",{children:"Classes & sections"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]}),(0,Ft.jsxs)(pt,{to:"/schedules",className:"action-btn info",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\ud83d\udcc5"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Class Schedules"}),(0,Ft.jsx)("small",{children:"Manage timetables"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]}),(0,Ft.jsxs)(pt,{to:"/attendance-sessions",className:"action-btn info",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\u23f1\ufe0f"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Attendance Sessions"}),(0,Ft.jsx)("small",{children:"Manage class sessions"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]}),(0,Ft.jsxs)(pt,{to:"/class-analytics",className:"action-btn accent",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\ud83d\udcca"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Class Analytics"}),(0,Ft.jsx)("small",{children:"Performance reports"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]})]})]}),(0,Ft.jsxs)("div",{className:"action-category",children:[(0,Ft.jsx)("h3",{className:"category-title",children:"\ud83d\udcc8 Reports & Analytics"}),(0,Ft.jsxs)("div",{className:"actions-grid",children:[(0,Ft.jsxs)(pt,{to:"/reports/attendance",className:"action-btn danger",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\ud83d\udcca"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Attendance Reports"}),(0,Ft.jsx)("small",{children:"Detailed analytics"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]}),(0,Ft.jsxs)(pt,{to:"/reports/financial",className:"action-btn danger",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\ud83d\udcb0"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Financial Reports"}),(0,Ft.jsx)("small",{children:"Fee collection reports"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]}),(0,Ft.jsxs)(pt,{to:"/reports/student",className:"action-btn danger",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\ud83d\udc68\u200d\ud83c\udf93"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Student Reports"}),(0,Ft.jsx)("small",{children:"Student performance"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]}),(0,Ft.jsxs)(pt,{to:"/reports/class",className:"action-btn danger",children:[(0,Ft.jsx)("div",{className:"action-icon",children:"\ud83c\udfeb"}),(0,Ft.jsxs)("div",{className:"action-text",children:[(0,Ft.jsx)("span",{children:"Class Reports"}),(0,Ft.jsx)("small",{children:"Class-wise analytics"})]}),(0,Ft.jsx)("div",{className:"action-arrow",children:"\u2192"})]})]})]})]})]}),r.length>0&&(0,Ft.jsxs)("div",{className:"section-card",children:[(0,Ft.jsxs)("div",{className:"section-header",children:[(0,Ft.jsx)("h2",{children:"Class Performance Today"}),(0,Ft.jsx)("span",{className:"section-badge",children:"Real-time"})]}),(0,Ft.jsx)("div",{className:"classes-list",children:r.map(e=>(0,Ft.jsxs)("div",{className:"class-item",children:[(0,Ft.jsxs)("div",{className:"class-info",children:[(0,Ft.jsx)("h4",{children:e.className}),(0,Ft.jsxs)("p",{children:[e.classTeacher," \u2022 Room ",e.roomNumber]}),e.grade&&(0,Ft.jsxs)("span",{className:"grade-badge",children:["Grade ",e.grade]})]}),(0,Ft.jsxs)("div",{className:"class-stats",children:[(0,Ft.jsxs)("div",{className:"attendance-progress",children:[(0,Ft.jsx)("div",{className:"progress-bar",children:(0,Ft.jsx)("div",{className:"progress-fill",style:{width:"".concat(e.attendanceRate,"%")}})}),(0,Ft.jsxs)("span",{className:"attendance-percent",children:[e.attendanceRate,"%"]})]}),(0,Ft.jsxs)("div",{className:"attendance-count",children:[e.presentCount,"/",e.totalStudents]})]})]},e.classId))})]}),(0,Ft.jsxs)("div",{className:"content-column",children:[s.length>0&&(0,Ft.jsxs)("div",{className:"section-card",children:[(0,Ft.jsxs)("div",{className:"section-header",children:[(0,Ft.jsx)("h2",{children:"Live Class Sessions"}),(0,Ft.jsx)("span",{className:"status-dot live"})]}),(0,Ft.jsx)("div",{className:"sessions-list",children:s.map(e=>{var t;return(0,Ft.jsxs)("div",{className:"session-item",children:[(0,Ft.jsxs)("div",{className:"session-header",children:[(0,Ft.jsx)("h4",{children:(null===(t=e.schoolClass)||void 0===t?void 0:t.className)||"Unknown Class"}),(0,Ft.jsx)("span",{className:"session-badge live",children:"LIVE"})]}),(0,Ft.jsxs)("div",{className:"session-details",children:[(0,Ft.jsxs)("div",{className:"detail-item",children:[(0,Ft.jsx)("span",{className:"detail-label",children:"Subject:"}),(0,Ft.jsx)("span",{children:e.subject||"General"})]}),(0,Ft.jsxs)("div",{className:"detail-item",children:[(0,Ft.jsx)("span",{className:"detail-label",children:"Time:"}),(0,Ft.jsxs)("span",{children:[e.scheduledStartTime||"08:00"," - ",e.scheduledEndTime||"09:00"]})]})]}),(0,Ft.jsx)(pt,{to:"/attendance?session=".concat(e.id),className:"session-action",children:"Take Attendance"})]},e.id)})})]}),(0,Ft.jsxs)("div",{className:"section-card",children:[(0,Ft.jsxs)("div",{className:"section-header",children:[(0,Ft.jsx)("h2",{children:"Recent Activity"}),(0,Ft.jsx)("span",{className:"section-badge",children:"Latest"})]}),(0,Ft.jsx)("div",{className:"activity-tabs",children:(0,Ft.jsx)("div",{className:"tab-content",children:(0,Ft.jsxs)("div",{className:"activity-section",children:[(0,Ft.jsx)("h4",{children:"Recent Fee Payments"}),(0,Ft.jsx)("div",{className:"activity-list",children:0===d.length?(0,Ft.jsxs)("div",{className:"no-data",children:[(0,Ft.jsx)("p",{children:"No fee payments recorded yet."}),(0,Ft.jsx)(pt,{to:"/fee-payment",className:"fee-payment-link",children:"Record First Payment"})]}):(0,Ft.jsx)(Ft.Fragment,{children:d.map(e=>{var t,n,r;return(0,Ft.jsxs)("div",{className:"activity-item",children:[(0,Ft.jsx)("div",{className:"activity-avatar payment",children:"\ud83d\udcb0"}),(0,Ft.jsxs)("div",{className:"activity-details",children:[(0,Ft.jsxs)("p",{children:[(0,Ft.jsxs)("strong",{children:[null===(t=e.student)||void 0===t?void 0:t.firstName," ",null===(n=e.student)||void 0===n?void 0:n.lastName]}),(0,Ft.jsx)("span",{className:"payment-amount",children:j(e.amountPaid)})]}),(0,Ft.jsxs)("span",{className:"activity-meta",children:[null===(r=e.student)||void 0===r?void 0:r.studentId,e.paymentMethod&&" \u2022 ".concat(e.paymentMethod)]})]}),T(e.status||"PAID")]},e.id)})})})]})})})]})]})]}),"analytics"===A&&(0,Ft.jsxs)("div",{className:"analytics-grid",children:[(0,Ft.jsxs)("div",{className:"analytics-card large",children:[(0,Ft.jsxs)("div",{className:"card-header",children:[(0,Ft.jsx)("h3",{children:"Attendance Analytics"}),(0,Ft.jsx)("span",{className:"time-filter",children:"Last 7 Days"})]}),(0,Ft.jsx)(D,{})]}),(0,Ft.jsxs)("div",{className:"analytics-card large",children:[(0,Ft.jsxs)("div",{className:"card-header",children:[(0,Ft.jsx)("h3",{children:"Fee Collection Analytics"}),(0,Ft.jsx)("span",{className:"time-filter",children:"Last 6 Months"})]}),(0,Ft.jsx)(M,{})]}),(0,Ft.jsxs)("div",{className:"analytics-card",children:[(0,Ft.jsx)("div",{className:"card-header",children:(0,Ft.jsx)("h3",{children:"Class Performance"})}),(0,Ft.jsx)("div",{className:"performance-list",children:r.sort((e,t)=>t.attendanceRate-e.attendanceRate).map((e,t)=>(0,Ft.jsxs)("div",{className:"performance-item",children:[(0,Ft.jsxs)("div",{className:"rank",children:["#",t+1]}),(0,Ft.jsxs)("div",{className:"class-info",children:[(0,Ft.jsx)("h4",{children:e.className}),(0,Ft.jsxs)("p",{children:[e.grade," \u2022 ",e.classTeacher]})]}),(0,Ft.jsxs)("div",{className:"performance-metric",children:[(0,Ft.jsxs)("div",{className:"metric-value",children:[e.attendanceRate,"%"]}),(0,Ft.jsx)("div",{className:"metric-label",children:"Attendance"})]})]},e.classId))})]}),(0,Ft.jsxs)("div",{className:"analytics-card",children:[(0,Ft.jsx)("div",{className:"card-header",children:(0,Ft.jsx)("h3",{children:"Quick Insights"})}),(0,Ft.jsxs)("div",{className:"insights-list",children:[(0,Ft.jsxs)("div",{className:"insight-item positive",children:[(0,Ft.jsx)("div",{className:"insight-icon",children:"\ud83d\udcc8"}),(0,Ft.jsxs)("div",{className:"insight-content",children:[(0,Ft.jsx)("p",{children:"Attendance improved by 5% this week"}),(0,Ft.jsx)("span",{className:"insight-meta",children:"Compared to last week"})]})]}),(0,Ft.jsxs)("div",{className:"insight-item warning",children:[(0,Ft.jsx)("div",{className:"insight-icon",children:"\ud83d\udcb0"}),(0,Ft.jsxs)("div",{className:"insight-content",children:[(0,Ft.jsxs)("p",{children:[t.pendingPayments," students have pending fees"]}),(0,Ft.jsx)("span",{className:"insight-meta",children:"Requires follow-up"})]})]}),(0,Ft.jsxs)("div",{className:"insight-item positive",children:[(0,Ft.jsx)("div",{className:"insight-icon",children:"\ud83d\udc65"}),(0,Ft.jsxs)("div",{className:"insight-content",children:[(0,Ft.jsxs)("p",{children:[t.newRegistrations," new students registered this week"]}),(0,Ft.jsx)("span",{className:"insight-meta",children:"Growth trend"})]})]})]})]})]}),"alerts"===A&&(0,Ft.jsxs)("div",{className:"alerts-grid",children:[(0,Ft.jsxs)("div",{className:"alerts-card",children:[(0,Ft.jsxs)("div",{className:"card-header",children:[(0,Ft.jsx)("h3",{children:"\u26a0\ufe0f Overdue Fee Alerts"}),(0,Ft.jsxs)("span",{className:"alerts-count",children:[g.length," alerts"]})]}),(0,Ft.jsx)("div",{className:"alerts-list",children:0===g.length?(0,Ft.jsxs)("div",{className:"no-alerts",children:[(0,Ft.jsx)("div",{className:"no-alerts-icon",children:"\u2705"}),(0,Ft.jsx)("h4",{children:"No Overdue Fees"}),(0,Ft.jsx)("p",{children:"All fee payments are up to date"})]}):g.map((e,t)=>(0,Ft.jsxs)("div",{className:"alert-item ".concat(_(e)),children:[(0,Ft.jsxs)("div",{className:"alert-header",children:[(0,Ft.jsxs)("div",{className:"student-info",children:[(0,Ft.jsx)("h4",{children:e.studentName}),(0,Ft.jsxs)("p",{children:[e.className," \u2022 ",e.studentId]})]}),(0,Ft.jsx)("div",{className:"alert-badge",children:_(e).toUpperCase()})]}),(0,Ft.jsxs)("div",{className:"alert-details",children:[(0,Ft.jsxs)("div",{className:"fee-detail",children:[(0,Ft.jsx)("span",{children:"Overdue Amount:"}),(0,Ft.jsx)("span",{className:"amount overdue",children:j(e.balance)})]}),(0,Ft.jsxs)("div",{className:"fee-detail",children:[(0,Ft.jsx)("span",{children:"Total Due:"}),(0,Ft.jsx)("span",{children:j(e.totalDue)})]})]}),(0,Ft.jsxs)("div",{className:"alert-actions",children:[(0,Ft.jsx)("button",{className:"btn-remind",children:"Send Reminder"}),(0,Ft.jsx)(pt,{to:"/fee-payment?student=".concat(e.studentId),className:"btn-pay",children:"Process Payment"})]})]},e.studentId))})]}),(0,Ft.jsxs)("div",{className:"alerts-card",children:[(0,Ft.jsx)("div",{className:"card-header",children:(0,Ft.jsx)("h3",{children:"\ud83d\udcca Low Attendance Alerts"})}),(0,Ft.jsx)("div",{className:"attendance-alerts",children:r.filter(e=>e.attendanceRate<70).map(e=>(0,Ft.jsxs)("div",{className:"attendance-alert",children:[(0,Ft.jsxs)("div",{className:"alert-info",children:[(0,Ft.jsx)("h4",{children:e.className}),(0,Ft.jsxs)("p",{children:["Low attendance rate: ",e.attendanceRate,"%"]})]}),(0,Ft.jsx)("div",{className:"alert-metric",children:(0,Ft.jsxs)("span",{className:"metric critical",children:[e.attendanceRate,"%"]})})]},e.classId))})]})]})]})};var Ut,zt=Object.defineProperty,Ht=Object.getOwnPropertySymbols,Vt=Object.prototype.hasOwnProperty,Gt=Object.prototype.propertyIsEnumerable,Wt=(e,t,n)=>t in e?zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yt=(e,t)=>{for(var n in t||(t={}))Vt.call(t,n)&&Wt(e,n,t[n]);if(Ht)for(var n of Ht(t))Gt.call(t,n)&&Wt(e,n,t[n]);return e},Xt=(e,t)=>{var n={};for(var r in e)Vt.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Ht)for(var r of Ht(e))t.indexOf(r)<0&&Gt.call(e,r)&&(n[r]=e[r]);return n};(e=>{const t=class t{constructor(e,n,r,s){if(this.version=e,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(s<-1||s>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let i=[];for(let t=0;t<this.size;t++)i.push(!1);for(let t=0;t<this.size;t++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();const o=this.addEccAndInterleave(r);if(this.drawCodewords(o),-1==s){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const n=this.getPenaltyScore();n<e&&(s=t,e=n),this.applyMask(t)}}a(0<=s&&s<=7),this.mask=s,this.applyMask(s),this.drawFormatBits(s),this.isFunction=[]}static encodeText(n,r){const a=e.QrSegment.makeSegments(n);return t.encodeSegments(a,r)}static encodeBinary(n,r){const a=e.QrSegment.makeBytes(n);return t.encodeSegments([a],r)}static encodeSegments(e,r){let s,o,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,d=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t.MIN_VERSION<=l&&l<=c&&c<=t.MAX_VERSION)||u<-1||u>7)throw new RangeError("Invalid value");for(s=l;;s++){const n=8*t.getNumDataCodewords(s,r),a=i.getTotalBits(e,s);if(a<=n){o=a;break}if(s>=c)throw new RangeError("Data too long")}for(const n of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])d&&o<=8*t.getNumDataCodewords(s,n)&&(r=n);let h=[];for(const t of e){n(t.mode.modeBits,4,h),n(t.numChars,t.mode.numCharCountBits(s),h);for(const e of t.getData())h.push(e)}a(h.length==o);const f=8*t.getNumDataCodewords(s,r);a(h.length<=f),n(0,Math.min(4,f-h.length),h),n(0,(8-h.length%8)%8,h),a(h.length%8==0);for(let t=236;h.length<f;t^=253)n(t,8,h);let m=[];for(;8*m.length<h.length;)m.push(0);return h.forEach((e,t)=>m[t>>>3]|=e<<7-(7&t)),new t(s,r,m,u)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let r=0;r<t;r++)0==n&&0==r||0==n&&r==t-1||n==t-1&&0==r||this.drawAlignmentPattern(e[n],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let r=0;r<10;r++)n=n<<1^1335*(n>>>9);const s=21522^(t<<10|n);a(s>>>15==0);for(let a=0;a<=5;a++)this.setFunctionModule(8,a,r(s,a));this.setFunctionModule(8,7,r(s,6)),this.setFunctionModule(8,8,r(s,7)),this.setFunctionModule(7,8,r(s,8));for(let a=9;a<15;a++)this.setFunctionModule(14-a,8,r(s,a));for(let a=0;a<8;a++)this.setFunctionModule(this.size-1-a,8,r(s,a));for(let a=8;a<15;a++)this.setFunctionModule(8,this.size-15+a,r(s,a));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;a(t>>>18==0);for(let n=0;n<18;n++){const e=r(t,n),a=this.size-11+n%3,s=Math.floor(n/3);this.setFunctionModule(a,s,e),this.setFunctionModule(s,a,e)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let r=-4;r<=4;r++){const a=Math.max(Math.abs(r),Math.abs(n)),s=e+r,i=t+n;0<=s&&s<this.size&&0<=i&&i<this.size&&this.setFunctionModule(s,i,2!=a&&4!=a)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+n,1!=Math.max(Math.abs(r),Math.abs(n)))}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const n=this.version,r=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(n,r))throw new RangeError("Invalid argument");const s=t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][n],i=t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][n],o=Math.floor(t.getNumRawDataModules(n)/8),l=s-o%s,c=Math.floor(o/s);let u=[];const d=t.reedSolomonComputeDivisor(i);for(let a=0,f=0;a<s;a++){let n=e.slice(f,f+c-i+(a<l?0:1));f+=n.length;const r=t.reedSolomonComputeRemainder(n,d);a<l&&n.push(0),u.push(n.concat(r))}let h=[];for(let t=0;t<u[0].length;t++)u.forEach((e,n)=>{(t!=c-i||n>=l)&&h.push(e[t])});return a(h.length==o),h}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let a=0;a<this.size;a++)for(let s=0;s<2;s++){const i=t-s,o=0==(t+1&2)?this.size-1-a:a;!this.isFunction[o][i]&&n<8*e.length&&(this.modules[o][i]=r(e[n>>>3],7-(7&n)),n++)}}a(n==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let r;switch(e){case 0:r=(n+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=n%3==0;break;case 3:r=(n+t)%3==0;break;case 4:r=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:r=n*t%2+n*t%3==0;break;case 6:r=(n*t%2+n*t%3)%2==0;break;case 7:r=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&r&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let a=0;a<this.size;a++){let n=!1,r=0,s=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[a][i]==n?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,s),n||(e+=this.finderPenaltyCountPatterns(s)*t.PENALTY_N3),n=this.modules[a][i],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,s)*t.PENALTY_N3}for(let a=0;a<this.size;a++){let n=!1,r=0,s=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[i][a]==n?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,s),n||(e+=this.finderPenaltyCountPatterns(s)*t.PENALTY_N3),n=this.modules[i][a],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,s)*t.PENALTY_N3}for(let a=0;a<this.size-1;a++)for(let n=0;n<this.size-1;n++){const r=this.modules[a][n];r==this.modules[a][n+1]&&r==this.modules[a+1][n]&&r==this.modules[a+1][n+1]&&(e+=t.PENALTY_N2)}let n=0;for(const t of this.modules)n=t.reduce((e,t)=>e+(t?1:0),n);const r=this.size*this.size,s=Math.ceil(Math.abs(20*n-10*r)/r)-1;return a(0<=s&&s<=9),e+=s*t.PENALTY_N4,a(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let n=[6];for(let r=this.size-7;n.length<e;r-=t)n.splice(1,0,r);return n}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;n-=(25*t-10)*t-55,e>=7&&(n-=36)}return a(208<=n&&n<=29648),n}static getNumDataCodewords(e,n){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let n=[];for(let t=0;t<e-1;t++)n.push(0);n.push(1);let r=1;for(let a=0;a<e;a++){for(let e=0;e<n.length;e++)n[e]=t.reedSolomonMultiply(n[e],r),e+1<n.length&&(n[e]^=n[e+1]);r=t.reedSolomonMultiply(r,2)}return n}static reedSolomonComputeRemainder(e,n){let r=n.map(e=>0);for(const a of e){const e=a^r.shift();r.push(0),n.forEach((n,a)=>r[a]^=t.reedSolomonMultiply(n,e))}return r}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let n=0;for(let r=7;r>=0;r--)n=n<<1^285*(n>>>7),n^=(t>>>r&1)*e;return a(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];a(t<=3*this.size);const n=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(n&&e[0]>=4*t&&e[6]>=t?1:0)+(n&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];function n(e,t,n){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let r=t-1;r>=0;r--)n.push(e>>>r&1)}function r(e,t){return 0!=(e>>>t&1)}function a(e){if(!e)throw new Error("Assertion error")}e.QrCode=t;const s=class e{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(t){let r=[];for(const e of t)n(e,8,r);return new e(e.Mode.BYTE,t.length,r)}static makeNumeric(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");let r=[];for(let e=0;e<t.length;){const a=Math.min(t.length-e,3);n(parseInt(t.substring(e,e+a),10),3*a+1,r),e+=a}return new e(e.Mode.NUMERIC,t.length,r)}static makeAlphanumeric(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let r,a=[];for(r=0;r+2<=t.length;r+=2){let s=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r));s+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r+1)),n(s,11,a)}return r<t.length&&n(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r)),6,a),new e(e.Mode.ALPHANUMERIC,t.length,a)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let r=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)n(t,8,r);else if(t<16384)n(2,2,r),n(t,14,r);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");n(6,3,r),n(t,21,r)}return new e(e.Mode.ECI,0,r)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const r of e){const e=r.mode.numCharCountBits(t);if(r.numChars>=1<<e)return 1/0;n+=4+e+r.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)"%"!=e.charAt(n)?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substring(n+1,n+3),16)),n+=2);return t}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let i=s;e.QrSegment=s})(Ut||(Ut={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2);e.Ecc=t})(t=e.QrCode||(e.QrCode={}))})(Ut||(Ut={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]);e.Mode=t})(t=e.QrSegment||(e.QrSegment={}))})(Ut||(Ut={}));var Qt=Ut,qt={L:Qt.QrCode.Ecc.LOW,M:Qt.QrCode.Ecc.MEDIUM,Q:Qt.QrCode.Ecc.QUARTILE,H:Qt.QrCode.Ecc.HIGH},Zt=128,Kt="L",$t="#FFFFFF",Jt="#000000",en=!1,tn=1;function nn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=[];return e.forEach(function(e,r){let a=null;e.forEach(function(s,i){if(!s&&null!==a)return n.push("M".concat(a+t," ").concat(r+t,"h").concat(i-a,"v1H").concat(a+t,"z")),void(a=null);if(i!==e.length-1)s&&null===a&&(a=i);else{if(!s)return;null===a?n.push("M".concat(i+t,",").concat(r+t," h1v1H").concat(i+t,"z")):n.push("M".concat(a+t,",").concat(r+t," h").concat(i+1-a,"v1H").concat(a+t,"z"))}})}),n.join("")}function rn(e,t){return e.slice().map((e,n)=>n<t.y||n>=t.y+t.h?e:e.map((e,n)=>(n<t.x||n>=t.x+t.w)&&e))}function an(t){let{value:n,level:r,minVersion:a,includeMargin:s,marginSize:i,imageSettings:o,size:l,boostLevel:c}=t,u=e.useMemo(()=>{const e=(Array.isArray(n)?n:[n]).reduce((e,t)=>(e.push(...Qt.QrSegment.makeSegments(t)),e),[]);return Qt.QrCode.encodeSegments(e,qt[r],a,void 0,void 0,c)},[n,r,a,c]);const{cells:d,margin:h,numCells:f,calculatedImageSettings:m}=e.useMemo(()=>{let e=u.getModules();const t=function(e,t){return null!=t?Math.max(Math.floor(t),0):e?4:0}(s,i),n=e.length+2*t,r=function(e,t,n,r){if(null==r)return null;const a=e.length+2*n,s=Math.floor(.1*t),i=a/t,o=(r.width||s)*i,l=(r.height||s)*i,c=null==r.x?e.length/2-o/2:r.x*i,u=null==r.y?e.length/2-l/2:r.y*i,d=null==r.opacity?1:r.opacity;let h=null;if(r.excavate){let e=Math.floor(c),t=Math.floor(u);h={x:e,y:t,w:Math.ceil(o+c-e),h:Math.ceil(l+u-t)}}return{x:c,y:u,h:l,w:o,excavation:h,opacity:d,crossOrigin:r.crossOrigin}}(e,l,t,o);return{cells:e,margin:t,numCells:n,calculatedImageSettings:r}},[u,l,o,s,i]);return{qrcode:u,margin:h,cells:d,numCells:f,calculatedImageSettings:m}}var sn=function(){try{(new Path2D).addPath(new Path2D)}catch(sa){return!1}return!0}();e.forwardRef(function(t,n){const r=t,{value:a,size:s=Zt,level:i=Kt,bgColor:o=$t,fgColor:l=Jt,includeMargin:c=en,minVersion:u=tn,boostLevel:d,marginSize:h,imageSettings:f}=r,m=Xt(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:g}=m,p=Xt(m,["style"]),y=null==f?void 0:f.src,v=e.useRef(null),w=e.useRef(null),S=e.useCallback(e=>{v.current=e,"function"===typeof n?n(e):n&&(n.current=e)},[n]),[N,C]=e.useState(!1),{margin:b,cells:E,numCells:A,calculatedImageSettings:x}=an({value:a,level:i,minVersion:u,boostLevel:d,includeMargin:c,marginSize:h,imageSettings:f,size:s});e.useEffect(()=>{if(null!=v.current){const e=v.current,t=e.getContext("2d");if(!t)return;let n=E;const r=w.current,a=null!=x&&null!==r&&r.complete&&0!==r.naturalHeight&&0!==r.naturalWidth;a&&null!=x.excavation&&(n=rn(E,x.excavation));const i=window.devicePixelRatio||1;e.height=e.width=s*i;const c=s/A*i;t.scale(c,c),t.fillStyle=o,t.fillRect(0,0,A,A),t.fillStyle=l,sn?t.fill(new Path2D(nn(n,b))):E.forEach(function(e,n){e.forEach(function(e,r){e&&t.fillRect(r+b,n+b,1,1)})}),x&&(t.globalAlpha=x.opacity),a&&t.drawImage(r,x.x+b,x.y+b,x.w,x.h)}}),e.useEffect(()=>{C(!1)},[y]);const I=Yt({height:s,width:s},g);let T=null;return null!=y&&(T=e.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{C(!0)},ref:w,crossOrigin:null==x?void 0:x.crossOrigin})),e.createElement(e.Fragment,null,e.createElement("canvas",Yt({style:I,height:s,width:s,ref:S,role:"img"},p)),T)}).displayName="QRCodeCanvas";var on=e.forwardRef(function(t,n){const r=t,{value:a,size:s=Zt,level:i=Kt,bgColor:o=$t,fgColor:l=Jt,includeMargin:c=en,minVersion:u=tn,boostLevel:d,title:h,marginSize:f,imageSettings:m}=r,g=Xt(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:p,cells:y,numCells:v,calculatedImageSettings:w}=an({value:a,level:i,minVersion:u,boostLevel:d,includeMargin:c,marginSize:f,imageSettings:m,size:s});let S=y,N=null;null!=m&&null!=w&&(null!=w.excavation&&(S=rn(y,w.excavation)),N=e.createElement("image",{href:m.src,height:w.h,width:w.w,x:w.x+p,y:w.y+p,preserveAspectRatio:"none",opacity:w.opacity,crossOrigin:w.crossOrigin}));const C=nn(S,p);return e.createElement("svg",Yt({height:s,width:s,viewBox:"0 0 ".concat(v," ").concat(v),ref:n,role:"img"},g),!!h&&e.createElement("title",null,h),e.createElement("path",{fill:o,d:"M0,0 h".concat(v,"v").concat(v,"H0z"),shapeRendering:"crispEdges"}),e.createElement("path",{fill:l,d:C,shapeRendering:"crispEdges"}),N)});on.displayName="QRCodeSVG";const ln=function(){var t;const[n,r]=(0,e.useState)({firstName:"",lastName:"",gender:"",dob:"",grade:"O/L",email:"",phone:"",address:"",city:"",district:"",guardianName:"",guardianPhone:"",relationship:"",status:"Active",schoolClass:null}),[a,s]=(0,e.useState)({}),[i,o]=(0,e.useState)(null),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(null),[f,m]=(0,e.useState)(null),[g,p]=(0,e.useState)([]),[y,v]=(0,e.useState)("Arts"),[w,S]=(0,e.useState)(0),N=(0,e.useRef)(null),C=["Personal","Academic","Class","Contact","Guardian"];(0,e.useEffect)(()=>{const e=e=>{N.current&&!N.current.contains(e.target)&&N.current.blur()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,e.useEffect)(()=>{(async()=>{try{if(n.grade){console.log("\ud83c\udfaf Fetching classes for grade: ".concat(n.grade));const e=await Rt.getByGrade(n.grade);console.log("\u2705 Loaded ".concat(e.length," classes for grade ").concat(n.grade,":"),e),p(e)}else p([])}catch(e){console.error("Error fetching classes:",e),p([])}})()},[n.grade]);const b=()=>{const e={};for(let t=0;t<C.length;t++){const n=E(t);Object.assign(e,n)}return e},E=e=>{const t={};switch(e){case 0:if(n.firstName.trim()?/^[A-Za-z\s]+$/.test(n.firstName)||(t.firstName="First name should contain only letters"):t.firstName="First name is required",n.lastName.trim()?/^[A-Za-z\s]+$/.test(n.lastName)||(t.lastName="Last name should contain only letters"):t.lastName="Last name is required",n.gender||(t.gender="Gender is required"),n.dob){const e=new Date(n.dob),r=(new Date).getFullYear()-e.getFullYear();r<5?t.dob="Student must be at least 5 years old":r>25&&(t.dob="Student age seems too high")}else t.dob="Date of birth is required";break;case 1:default:break;case 2:n.schoolClass||(t.schoolClass="Class assignment is required");break;case 3:n.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(t.email="Please enter a valid email address"):t.email="Email is required",n.phone?/^(\+94|0)[1-9][0-9]{8}$/.test(n.phone.replace(/\s/g,""))||(t.phone="Please enter a valid Sri Lankan phone number"):t.phone="Phone number is required",n.address.trim()||(t.address="Address is required"),n.city.trim()||(t.city="City is required"),n.district||(t.district="District is required");break;case 4:(n.guardianName||n.guardianPhone)&&(n.guardianName&&!n.guardianPhone&&(t.guardianPhone="Guardian phone is required when guardian name is provided"),n.guardianPhone&&!n.guardianName&&(t.guardianName="Guardian name is required when guardian phone is provided"),n.guardianPhone&&!/^(\+94|0)[1-9][0-9]{8}$/.test(n.guardianPhone.replace(/\s/g,""))&&(t.guardianPhone="Please enter a valid Sri Lankan phone number"))}return t},A=e=>{const{name:t,value:n}=e.target;r(e=>l(l({},e),{},{[t]:n})),a[t]&&s(e=>l(l({},e),{},{[t]:""})),"grade"===t&&r(e=>l(l({},e),{},{schoolClass:null}))};return(0,Ft.jsx)("div",{className:"app-container",children:(0,Ft.jsx)("main",{className:"main-content",children:(0,Ft.jsxs)("div",{className:"form-wrapper",children:[(0,Ft.jsxs)("div",{className:"form-header",children:[(0,Ft.jsx)("div",{className:"header-icon",children:"\ud83d\udc68\u200d\ud83c\udf93"}),(0,Ft.jsx)("h2",{children:"Student Registration"}),(0,Ft.jsx)("p",{children:"Complete all fields to register a new student in the system"})]}),d?(0,Ft.jsxs)("div",{className:"qr-section",children:[(0,Ft.jsxs)("div",{className:"success-header",children:[(0,Ft.jsx)("div",{className:"success-icon",children:"\u2705"}),(0,Ft.jsx)("h3",{children:"Registration Successful!"}),(0,Ft.jsx)("p",{children:"Student has been registered successfully. Here's their ID card:"})]}),(0,Ft.jsxs)("div",{className:"id-card",children:[(0,Ft.jsxs)("div",{className:"qr-code-container",children:[(0,Ft.jsx)("div",{className:"qr-code",children:(0,Ft.jsx)(on,{value:d,size:200})}),(0,Ft.jsx)("p",{className:"qr-note",children:"Scan this QR code for attendance and fee payments"})]}),(0,Ft.jsxs)("div",{className:"student-info",children:[(0,Ft.jsx)("h4",{children:"Student ID Card"}),(0,Ft.jsxs)("div",{className:"info-grid",children:[(0,Ft.jsxs)("div",{className:"info-item",children:[(0,Ft.jsx)("strong",{children:"Student ID:"}),(0,Ft.jsx)("span",{children:f.studentId})]}),(0,Ft.jsxs)("div",{className:"info-item",children:[(0,Ft.jsx)("strong",{children:"Name:"}),(0,Ft.jsxs)("span",{children:[n.firstName," ",n.lastName]})]}),(0,Ft.jsxs)("div",{className:"info-item",children:[(0,Ft.jsx)("strong",{children:"Gender:"}),(0,Ft.jsx)("span",{children:n.gender})]}),(0,Ft.jsxs)("div",{className:"info-item",children:[(0,Ft.jsx)("strong",{children:"Date of Birth:"}),(0,Ft.jsx)("span",{children:new Date(n.dob).toLocaleDateString()})]}),(0,Ft.jsxs)("div",{className:"info-item",children:[(0,Ft.jsx)("strong",{children:"Grade:"}),(0,Ft.jsx)("span",{children:n.grade})]}),n.schoolClass&&(0,Ft.jsxs)("div",{className:"info-item",children:[(0,Ft.jsx)("strong",{children:"Class:"}),(0,Ft.jsx)("span",{children:n.schoolClass.className})]}),(0,Ft.jsxs)("div",{className:"info-item",children:[(0,Ft.jsx)("strong",{children:"Email:"}),(0,Ft.jsx)("span",{children:n.email})]}),(0,Ft.jsxs)("div",{className:"info-item",children:[(0,Ft.jsx)("strong",{children:"Phone:"}),(0,Ft.jsx)("span",{children:n.phone})]}),n.guardianName&&(0,Ft.jsxs)("div",{className:"info-item",children:[(0,Ft.jsx)("strong",{children:"Guardian:"}),(0,Ft.jsx)("span",{children:n.guardianName})]})]}),(0,Ft.jsxs)("div",{className:"action-buttons",children:[(0,Ft.jsx)("button",{onClick:()=>window.print(),className:"print-btn",children:"\ud83d\udda8\ufe0f Print ID Card"}),(0,Ft.jsx)("button",{onClick:()=>{r({firstName:"",lastName:"",gender:"",dob:"",grade:"O/L",email:"",phone:"",address:"",city:"",district:"",guardianName:"",guardianPhone:"",relationship:"",status:"Active",schoolClass:null}),h(null),m(null),o(null),v("Arts"),p([]),S(0)},className:"new-registration-btn",children:"\ud83d\udc68\u200d\ud83c\udf93 Register Another Student"})]})]})]})]}):(0,Ft.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=b();if(Object.keys(t).length>0){s(t);for(let e=0;e<C.length;e++){const t=E(e);if(Object.keys(t).length>0)return S(e),void setTimeout(()=>{const e=Object.keys(t)[0];if(e){const t=document.querySelector('[name="'.concat(e,'"]'));t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus())}},100)}}else{u(!0);try{var r,a;const e={firstName:n.firstName,lastName:n.lastName,gender:n.gender,dob:n.dob,grade:n.grade,email:n.email,phone:n.phone,address:n.address,city:n.city,district:n.district,status:n.status,classId:(null===(r=n.schoolClass)||void 0===r?void 0:r.id)||null};n.guardianName.trim()&&(e.guardianName=n.guardianName.trim()),n.guardianPhone.trim()&&(e.guardianPhone=n.guardianPhone.trim()),n.relationship&&(e.relationship=n.relationship),console.log("\ud83d\udce4 Sending to SIMPLE endpoint:",e),console.log("\ud83d\udccb School Class ID:",null===(a=n.schoolClass)||void 0===a?void 0:a.id);const t=await fetch("http://localhost:8080/api/students/register-simple",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();if(console.log("\u2705 Registration response:",s),!t.ok)throw new Error(s.error||"Registration failed");{var i,l;const e=JSON.stringify({studentId:s.studentId,firstName:s.firstName||n.firstName,lastName:s.lastName||n.lastName,grade:s.grade||n.grade,email:s.email||n.email,classId:s.classId||(null===(i=n.schoolClass)||void 0===i?void 0:i.id),className:s.className||(null===(l=n.schoolClass)||void 0===l?void 0:l.className)});h(e),m(s)}}catch(c){console.error("\u274c Registration error:",c),o({error:c.message})}finally{u(!1)}}},className:"modern-form",children:[(0,Ft.jsx)("div",{className:"progress-steps",children:C.map((e,t)=>(0,Ft.jsxs)("div",{className:"step ".concat(t===w?"active":""," ").concat(t<w?"completed":""),children:[(0,Ft.jsx)("div",{className:"step-number",children:t<w?"\u2713":t+1}),(0,Ft.jsx)("span",{className:"step-label",children:e}),t<C.length-1&&(0,Ft.jsx)("div",{className:"step-connector"})]},e))}),0===w&&(0,Ft.jsxs)("div",{className:"form-section active",children:[(0,Ft.jsx)("h3",{children:"Personal Information"}),(0,Ft.jsx)("div",{className:"section-description",children:"Please provide the student's basic personal details"}),(0,Ft.jsxs)("div",{className:"form-grid",children:[(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"firstName",children:"First Name *"}),(0,Ft.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:n.firstName,onChange:A,className:a.firstName?"error":"",placeholder:"Enter first name"}),a.firstName&&(0,Ft.jsx)("span",{className:"error-message",children:a.firstName})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"lastName",children:"Last Name *"}),(0,Ft.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:n.lastName,onChange:A,className:a.lastName?"error":"",placeholder:"Enter last name"}),a.lastName&&(0,Ft.jsx)("span",{className:"error-message",children:a.lastName})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"gender",children:"Gender *"}),(0,Ft.jsxs)("select",{id:"gender",name:"gender",value:n.gender,onChange:A,className:a.gender?"error":"",children:[(0,Ft.jsx)("option",{value:"",children:"Select Gender"}),(0,Ft.jsx)("option",{value:"Male",children:"Male"}),(0,Ft.jsx)("option",{value:"Female",children:"Female"}),(0,Ft.jsx)("option",{value:"Other",children:"Other"})]}),a.gender&&(0,Ft.jsx)("span",{className:"error-message",children:a.gender})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"dob",children:"Date of Birth *"}),(0,Ft.jsx)("input",{ref:N,type:"date",id:"dob",name:"dob",value:n.dob,onChange:e=>{const{name:t,value:n}=e.target;r(e=>l(l({},e),{},{[t]:n})),a[t]&&s(e=>l(l({},e),{},{[t]:""}))},className:a.dob?"error":"",max:(new Date).toISOString().split("T")[0]}),a.dob&&(0,Ft.jsx)("span",{className:"error-message",children:a.dob})]})]})]}),1===w&&(0,Ft.jsxs)("div",{className:"form-section active",children:[(0,Ft.jsx)("h3",{children:"Academic Information"}),(0,Ft.jsx)("div",{className:"section-description",children:"Select the student's academic level and status"}),(0,Ft.jsxs)("div",{className:"form-grid",children:[(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"grade",children:"Grade *"}),(0,Ft.jsxs)("select",{id:"grade",name:"grade",value:n.grade,onChange:A,children:[(0,Ft.jsx)("option",{value:"O/L",children:"O/L (Ordinary Level)"}),(0,Ft.jsx)("option",{value:"A/L",children:"A/L (Advanced Level)"})]})]}),"A/L"===n.grade&&(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"stream",children:"Stream *"}),(0,Ft.jsxs)("select",{id:"stream",name:"stream",value:y,onChange:e=>{const t=e.target.value;v(t)},children:[(0,Ft.jsx)("option",{value:"Arts",children:"Arts Stream"}),(0,Ft.jsx)("option",{value:"Commerce",children:"Commerce Stream"}),(0,Ft.jsx)("option",{value:"Science",children:"Science Stream"})]})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"status",children:"Status"}),(0,Ft.jsxs)("select",{id:"status",name:"status",value:n.status,onChange:A,children:[(0,Ft.jsx)("option",{value:"Active",children:"Active"}),(0,Ft.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,Ft.jsx)("option",{value:"Suspended",children:"Suspended"})]})]})]})]}),2===w&&(0,Ft.jsxs)("div",{className:"form-section active",children:[(0,Ft.jsxs)("h3",{children:["Class Assignment ",(0,Ft.jsx)("span",{className:"required-badge",children:"Required"})]}),(0,Ft.jsx)("div",{className:"section-description",children:"Assign the student to a specific class. This is required for attendance and fee management."}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"classAssignment",children:"Select Class *"}),(0,Ft.jsxs)("select",{id:"classAssignment",name:"classAssignment",value:(null===(t=n.schoolClass)||void 0===t?void 0:t.id)||"",onChange:e=>{const t=e.target.value,n=g.find(e=>e.id==t);r(e=>l(l({},e),{},{schoolClass:n||null})),a.schoolClass&&s(e=>l(l({},e),{},{schoolClass:""}))},className:a.schoolClass?"error":"",required:!0,children:[(0,Ft.jsx)("option",{value:"",children:"Choose a class *"}),g.map(e=>(0,Ft.jsxs)("option",{value:e.id,children:[e.className," - ",e.classTeacher," (",e.roomNumber,")"]},e.id))]}),a.schoolClass&&(0,Ft.jsx)("span",{className:"error-message",children:a.schoolClass}),n.schoolClass&&(0,Ft.jsx)("div",{className:"class-selection-info",children:(0,Ft.jsxs)("div",{className:"class-info-card",children:[(0,Ft.jsx)("strong",{children:"Selected Class:"})," ",n.schoolClass.className,(0,Ft.jsx)("br",{}),(0,Ft.jsx)("strong",{children:"Teacher:"})," ",n.schoolClass.classTeacher,(0,Ft.jsx)("br",{}),(0,Ft.jsx)("strong",{children:"Room:"})," ",n.schoolClass.roomNumber]})})]})]}),3===w&&(0,Ft.jsxs)("div",{className:"form-section active",children:[(0,Ft.jsx)("h3",{children:"Contact Information"}),(0,Ft.jsx)("div",{className:"section-description",children:"Provide the student's contact details and address"}),(0,Ft.jsxs)("div",{className:"form-grid",children:[(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"email",children:"Email *"}),(0,Ft.jsx)("input",{type:"email",id:"email",name:"email",value:n.email,onChange:A,className:a.email?"error":"",placeholder:"student@example.com"}),a.email&&(0,Ft.jsx)("span",{className:"error-message",children:a.email})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"phone",children:"Phone Number *"}),(0,Ft.jsx)("input",{type:"text",id:"phone",name:"phone",value:n.phone,onChange:A,className:a.phone?"error":"",placeholder:"+94 XX XXX XXXX or 0XX XXX XXXX"}),a.phone&&(0,Ft.jsx)("span",{className:"error-message",children:a.phone})]}),(0,Ft.jsxs)("div",{className:"form-group full-width",children:[(0,Ft.jsx)("label",{htmlFor:"address",children:"Address *"}),(0,Ft.jsx)("input",{type:"text",id:"address",name:"address",value:n.address,onChange:A,className:a.address?"error":"",placeholder:"Enter full address"}),a.address&&(0,Ft.jsx)("span",{className:"error-message",children:a.address})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"city",children:"City *"}),(0,Ft.jsx)("input",{type:"text",id:"city",name:"city",value:n.city,onChange:A,className:a.city?"error":"",placeholder:"Enter city"}),a.city&&(0,Ft.jsx)("span",{className:"error-message",children:a.city})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"district",children:"District *"}),(0,Ft.jsxs)("select",{id:"district",name:"district",value:n.district,onChange:A,className:a.district?"error":"",children:[(0,Ft.jsx)("option",{value:"",children:"Select District"}),["Ampara","Anuradhapura","Badulla","Batticaloa","Colombo","Galle","Gampaha","Hambantota","Jaffna","Kalutara","Kandy","Kegalle","Kilinochchi","Kurunegala","Mannar","Matale","Matara","Moneragala","Mullaitivu","Nuwara Eliya","Polonnaruwa","Puttalam","Ratnapura","Trincomalee","Vavuniya"].map(e=>(0,Ft.jsx)("option",{value:e,children:e},e))]}),a.district&&(0,Ft.jsx)("span",{className:"error-message",children:a.district})]})]})]}),4===w&&(0,Ft.jsxs)("div",{className:"form-section active",children:[(0,Ft.jsxs)("h3",{children:["Guardian Information ",(0,Ft.jsx)("span",{className:"optional-badge",children:"Optional"})]}),(0,Ft.jsx)("div",{className:"section-description",children:"Provide guardian details for emergency contact (optional). You can skip this section if not needed."}),(0,Ft.jsxs)("div",{className:"form-grid",children:[(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"guardianName",children:"Guardian Name"}),(0,Ft.jsx)("input",{type:"text",id:"guardianName",name:"guardianName",value:n.guardianName,onChange:A,className:a.guardianName?"error":"",placeholder:"Guardian's full name"}),a.guardianName&&(0,Ft.jsx)("span",{className:"error-message",children:a.guardianName})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"guardianPhone",children:"Guardian Phone"}),(0,Ft.jsx)("input",{type:"text",id:"guardianPhone",name:"guardianPhone",value:n.guardianPhone,onChange:A,className:a.guardianPhone?"error":"",placeholder:"+94 XX XXX XXXX or 0XX XXX XXXX"}),a.guardianPhone&&(0,Ft.jsx)("span",{className:"error-message",children:a.guardianPhone})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"relationship",children:"Relationship"}),(0,Ft.jsxs)("select",{id:"relationship",name:"relationship",value:n.relationship,onChange:A,children:[(0,Ft.jsx)("option",{value:"",children:"Select Relationship"}),["Father","Mother","Guardian","Other"].map(e=>(0,Ft.jsx)("option",{value:e,children:e},e))]})]})]})]}),(0,Ft.jsxs)("div",{className:"form-navigation",children:[w>0&&(0,Ft.jsx)("button",{type:"button",onClick:()=>{S(e=>Math.max(e-1,0))},className:"nav-btn prev-btn",children:"\u2190 Previous"}),w<C.length-1?(0,Ft.jsx)("button",{type:"button",onClick:()=>{const e=(()=>{const e={};switch(w){case 0:if(n.firstName.trim()?/^[A-Za-z\s]+$/.test(n.firstName)||(e.firstName="First name should contain only letters"):e.firstName="First name is required",n.lastName.trim()?/^[A-Za-z\s]+$/.test(n.lastName)||(e.lastName="Last name should contain only letters"):e.lastName="Last name is required",n.gender||(e.gender="Gender is required"),n.dob){const t=new Date(n.dob),r=(new Date).getFullYear()-t.getFullYear();r<5?e.dob="Student must be at least 5 years old":r>35&&(e.dob="Student age seems too high")}else e.dob="Date of birth is required";break;case 1:default:break;case 2:n.schoolClass||(e.schoolClass="Class assignment is required");break;case 3:n.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(e.email="Please enter a valid email address"):e.email="Email is required",n.phone?/^(\+94|0)[1-9][0-9]{8}$/.test(n.phone.replace(/\s/g,""))||(e.phone="Please enter a valid Sri Lankan phone number"):e.phone="Phone number is required",n.address.trim()||(e.address="Address is required"),n.city.trim()||(e.city="City is required"),n.district||(e.district="District is required");break;case 4:(n.guardianName||n.guardianPhone)&&(n.guardianName&&!n.guardianPhone&&(e.guardianPhone="Guardian phone is required when guardian name is provided"),n.guardianPhone&&!n.guardianName&&(e.guardianName="Guardian name is required when guardian phone is provided"),n.guardianPhone&&!/^(\+94|0)[1-9][0-9]{8}$/.test(n.guardianPhone.replace(/\s/g,""))&&(e.guardianPhone="Please enter a valid Sri Lankan phone number"))}return e})();if(Object.keys(e).length>0){s(t=>l(l({},t),e));const t=Object.keys(e)[0];if(t){const e=document.querySelector('[name="'.concat(t,'"]'));e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.focus())}return}S(e=>Math.min(e+1,C.length-1))},className:"nav-btn next-btn",children:"Next \u2192"}):(0,Ft.jsxs)("div",{className:"final-actions",children:[(0,Ft.jsx)("button",{type:"submit",className:"submit-btn ".concat(c?"submitting":""),disabled:c,children:c?(0,Ft.jsxs)(Ft.Fragment,{children:[(0,Ft.jsx)("div",{className:"spinner"}),"Registering..."]}):"Complete Registration"}),(0,Ft.jsx)("div",{className:"skip-notice",children:"Guardian information is optional. You can submit without filling this section."})]})]})]}),i&&i.error&&(0,Ft.jsxs)("div",{className:"result-box error",children:[(0,Ft.jsx)("h3",{children:"Error"}),(0,Ft.jsx)("pre",{children:JSON.stringify(i,null,2)})]})]})})})},cn=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),un=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),dn=e=>{if(!e)return"";const t=e.replace(/\D/g,"");return t.startsWith("94")?"+".concat(t):t.startsWith("0")?"+94".concat(t.slice(1)):e},hn=["O/L","A/L"],fn=["Active","Inactive","Suspended"],mn=["PRESENT","LATE","ABSENT"],gn=()=>{var t;const{students:n,loading:r,error:a,deleteStudent:s}=(()=>{const[t,n]=(0,e.useState)([]),[r,a]=(0,e.useState)(!1),[s,i]=(0,e.useState)(null),o=async()=>{a(!0),i(null);try{const e=await jt.getAll();n(Array.isArray(e)?e:[])}catch(e){i(e.message)}finally{a(!1)}};return(0,e.useEffect)(()=>{o()},[]),{students:t,loading:r,error:s,loadStudents:o}})(),[i,o]=(0,e.useState)(null),[l,c]=(0,e.useState)([]),[u,d]=(0,e.useState)(null),[h,f]=(0,e.useState)(""),[m,g]=(0,e.useState)(""),[p,y]=(0,e.useState)(""),[v,w]=(0,e.useState)(""),[S,N]=(0,e.useState)([]),[C,b]=(0,e.useState)(!1),[E,A]=(0,e.useState)(!1),[x,I]=(0,e.useState)("list"),[T,_]=(0,e.useState)("name"),[j,R]=(0,e.useState)(null);(0,e.useEffect)(()=>{D()},[]);const D=async()=>{b(!0);try{const e=await Rt.getAllClasses();N(e||[])}catch(e){console.error("Error loading classes:",e)}finally{b(!1)}},M=n.filter(e=>{var t,n,r,a,s;const i=(null===(t=e.firstName)||void 0===t?void 0:t.toLowerCase().includes(h.toLowerCase()))||(null===(n=e.lastName)||void 0===n?void 0:n.toLowerCase().includes(h.toLowerCase()))||(null===(r=e.studentId)||void 0===r?void 0:r.toLowerCase().includes(h.toLowerCase()))||(null===(a=e.email)||void 0===a?void 0:a.toLowerCase().includes(h.toLowerCase())),o=!m||e.grade===m,l=!p||e.status===p,c=!v||(null===(s=e.classId)||void 0===s?void 0:s.toString())===v;return i&&o&&l&&c}),O=[...M].sort((e,t)=>{switch(T){case"name":return"".concat(e.firstName," ").concat(e.lastName).localeCompare("".concat(t.firstName," ").concat(t.lastName));case"id":return e.studentId.localeCompare(t.studentId);case"grade":return e.grade.localeCompare(t.grade);case"date":return new Date(t.registrationDate)-new Date(e.registrationDate);case"class":return(e.className||"").localeCompare(t.className||"");default:return 0}}),k=async e=>{A(!0);try{const[t,n]=await Promise.all([Ot.getByStudent(e),Ot.getSummary(e)]);c(t||[]),d(n),o(e)}catch(t){console.error("Error loading attendance:",t)}finally{A(!1)}},P=async(e,t)=>{if(window.confirm("Are you sure you want to delete ".concat(t,"?")))try{await s(e),i===e&&(o(null),c([]),d(null))}catch(n){alert("Error deleting student: "+n.message)}},L=e=>{const t="PRESENT"===e?"present":"LATE"===e?"late":"absent";return(0,Ft.jsx)("span",{className:"status-badge ".concat(t),children:e})},F=e=>{const t="Active"===e?"active":"Inactive"===e?"inactive":"suspended";return(0,Ft.jsx)("span",{className:"student-status-badge ".concat(t),children:e})},B=e=>{if(!e.classId)return"Not Assigned";const t=e.className||"Unnamed Class",n=e.classTeacher?" - ".concat(e.classTeacher):"",r=e.roomNumber?" (Room: ".concat(e.roomNumber,")"):"";return"".concat(t).concat(n).concat(r)},U=()=>{f(""),g(""),y(""),w(""),_("name")},z=(()=>{const e={total:M.length,byGrade:{},byClass:{},byStatus:{},unassigned:M.filter(e=>!e.classId).length};return M.forEach(t=>{e.byGrade[t.grade]=(e.byGrade[t.grade]||0)+1;const n=t.className||"Unassigned";e.byClass[n]=(e.byClass[n]||0)+1,e.byStatus[t.status]=(e.byStatus[t.status]||0)+1}),e})();return r?(0,Ft.jsxs)("div",{className:"loading-container",children:[(0,Ft.jsx)("div",{className:"spinner"}),(0,Ft.jsx)("p",{children:"Loading students..."})]}):a?(0,Ft.jsxs)("div",{className:"error-container",children:[(0,Ft.jsx)("h3",{children:"Error Loading Students"}),(0,Ft.jsx)("p",{children:a}),(0,Ft.jsx)("button",{onClick:()=>window.location.reload(),className:"retry-btn",children:"Retry"})]}):(0,Ft.jsxs)("div",{className:"student-list-container",children:[(0,Ft.jsxs)("div",{className:"student-list-header",children:[(0,Ft.jsx)("h2",{children:"Student Management"}),(0,Ft.jsxs)("div",{className:"header-controls",children:[(0,Ft.jsxs)("div",{className:"view-controls",children:[(0,Ft.jsx)("button",{className:"view-btn ".concat("list"===x?"active":""),onClick:()=>I("list"),children:"List"}),(0,Ft.jsx)("button",{className:"view-btn ".concat("grid"===x?"active":""),onClick:()=>I("grid"),children:"Grid"}),(0,Ft.jsx)("button",{className:"view-btn ".concat("table"===x?"active":""),onClick:()=>I("table"),children:"Table"})]}),(0,Ft.jsxs)("div",{className:"statistics-brief",children:[(0,Ft.jsxs)("span",{className:"stat-badge total",children:[n.length," Total"]}),(0,Ft.jsxs)("span",{className:"stat-badge active",children:[z.byStatus.Active||0," Active"]}),(0,Ft.jsxs)("span",{className:"stat-badge unassigned",children:[z.unassigned," Unassigned"]})]})]})]}),(0,Ft.jsxs)("div",{className:"quick-stats",children:[(0,Ft.jsxs)("div",{className:"stat-card",children:[(0,Ft.jsx)("h4",{children:"Grade Distribution"}),Object.entries(z.byGrade).map(e=>{let[t,n]=e;return(0,Ft.jsxs)("div",{className:"stat-item",children:[(0,Ft.jsxs)("span",{children:[t,":"]}),(0,Ft.jsx)("strong",{children:n})]},t)})]}),(0,Ft.jsxs)("div",{className:"stat-card",children:[(0,Ft.jsx)("h4",{children:"Top Classes"}),Object.entries(z.byClass).slice(0,3).map(e=>{let[t,n]=e;return(0,Ft.jsxs)("div",{className:"stat-item",children:[(0,Ft.jsxs)("span",{children:[t,":"]}),(0,Ft.jsx)("strong",{children:n})]},t)})]}),(0,Ft.jsxs)("div",{className:"stat-card",children:[(0,Ft.jsx)("h4",{children:"Status Overview"}),Object.entries(z.byStatus).map(e=>{let[t,n]=e;return(0,Ft.jsxs)("div",{className:"stat-item",children:[(0,Ft.jsxs)("span",{children:[t,":"]}),(0,Ft.jsx)("strong",{children:n})]},t)})]})]}),(0,Ft.jsxs)("div",{className:"filters-section",children:[(0,Ft.jsxs)("div",{className:"search-controls",children:[(0,Ft.jsx)("div",{className:"search-box",children:(0,Ft.jsx)("input",{type:"text",placeholder:"Search by name, ID, email, or class...",value:h,onChange:e=>f(e.target.value),className:"search-input"})}),(0,Ft.jsxs)("div",{className:"filter-controls",children:[(0,Ft.jsxs)("select",{value:m,onChange:e=>g(e.target.value),className:"filter-select",children:[(0,Ft.jsx)("option",{value:"",children:"All Grades"}),hn.map(e=>(0,Ft.jsx)("option",{value:e,children:e},e))]}),(0,Ft.jsxs)("select",{value:p,onChange:e=>y(e.target.value),className:"filter-select",children:[(0,Ft.jsx)("option",{value:"",children:"All Status"}),fn.map(e=>(0,Ft.jsx)("option",{value:e,children:e},e))]}),(0,Ft.jsxs)("select",{value:v,onChange:e=>w(e.target.value),className:"filter-select",disabled:C,children:[(0,Ft.jsx)("option",{value:"",children:"All Classes"}),(0,Ft.jsx)("option",{value:"unassigned",children:"Unassigned Students"}),S.map(e=>(0,Ft.jsxs)("option",{value:e.id,children:[e.className," (",e.grade,") - ",e.classTeacher||"No Teacher"]},e.id))]}),(0,Ft.jsxs)("select",{value:T,onChange:e=>_(e.target.value),className:"filter-select",children:[(0,Ft.jsx)("option",{value:"name",children:"Sort by Name"}),(0,Ft.jsx)("option",{value:"id",children:"Sort by ID"}),(0,Ft.jsx)("option",{value:"grade",children:"Sort by Grade"}),(0,Ft.jsx)("option",{value:"class",children:"Sort by Class"}),(0,Ft.jsx)("option",{value:"date",children:"Sort by Date (Newest)"})]}),(0,Ft.jsx)("button",{className:"reset-filters-btn",onClick:U,disabled:!h&&!m&&!p&&!v,children:"Clear Filters"})]})]}),(0,Ft.jsxs)("div",{className:"filter-summary",children:["Showing ",M.length," of ",n.length," students",v&&" in selected class",m&&" in ".concat(m),p&&" with status ".concat(p)]})]}),(0,Ft.jsxs)("div",{className:"student-list-content",children:[(0,Ft.jsxs)("div",{className:"students-section",children:[(0,Ft.jsxs)("div",{className:"section-header",children:[(0,Ft.jsxs)("h3",{children:["Students (",M.length,")"]}),(0,Ft.jsxs)("div",{className:"section-actions",children:[(0,Ft.jsx)("a",{href:"/students/register",className:"btn-primary",children:"+ Register New Student"}),(0,Ft.jsx)("a",{href:"/classes/assign",className:"btn-secondary",children:"Assign to Class"})]})]}),0===M.length?(0,Ft.jsxs)("div",{className:"no-students",children:[(0,Ft.jsx)("p",{children:"No students found matching your criteria."}),h||m||p||v?(0,Ft.jsx)("button",{onClick:U,className:"btn-primary",children:"Reset Filters"}):(0,Ft.jsx)("a",{href:"/students/register",className:"btn-primary",children:"Register First Student"})]}):"grid"===x?(0,Ft.jsx)("div",{className:"students-grid",children:O.map(e=>(0,Ft.jsxs)("div",{className:"student-card ".concat(i===e.studentId?"selected":""," ").concat(j===e.id?"expanded":""),onClick:()=>R(j===e.id?null:e.id),children:[(0,Ft.jsxs)("div",{className:"student-card-header",children:[(0,Ft.jsxs)("div",{className:"student-avatar",children:[e.firstName.charAt(0),e.lastName.charAt(0)]}),(0,Ft.jsxs)("div",{className:"student-title",children:[(0,Ft.jsxs)("h4",{children:[e.firstName," ",e.lastName]}),F(e.status)]})]}),(0,Ft.jsxs)("div",{className:"student-card-body",children:[(0,Ft.jsxs)("div",{className:"student-info-compact",children:[(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"ID:"})," ",e.studentId]}),(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Grade:"})," ",e.grade]}),(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Class:"})," ",B(e)]})]}),j===e.id&&(0,Ft.jsxs)("div",{className:"student-details-expanded",children:[(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Phone:"})," ",dn(e.phone)]}),(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Registered:"})," ",cn(e.registrationDate)]}),e.subjects&&(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Subjects:"})," ",e.subjects]}),(0,Ft.jsxs)("div",{className:"expanded-actions",children:[(0,Ft.jsx)("button",{className:"view-attendance-btn",onClick:t=>{t.stopPropagation(),k(e.studentId)},disabled:E,children:"View Attendance"}),(0,Ft.jsx)("button",{className:"delete-btn",onClick:t=>{t.stopPropagation(),P(e.id,"".concat(e.firstName," ").concat(e.lastName))},children:"Delete"})]})]})]})]},e.id))}):"table"===x?(0,Ft.jsx)("div",{className:"students-table-container",children:(0,Ft.jsxs)("table",{className:"students-table",children:[(0,Ft.jsx)("thead",{children:(0,Ft.jsxs)("tr",{children:[(0,Ft.jsx)("th",{children:"Student ID"}),(0,Ft.jsx)("th",{children:"Name"}),(0,Ft.jsx)("th",{children:"Grade"}),(0,Ft.jsx)("th",{children:"Class"}),(0,Ft.jsx)("th",{children:"Status"}),(0,Ft.jsx)("th",{children:"Contact"}),(0,Ft.jsx)("th",{children:"Actions"})]})}),(0,Ft.jsx)("tbody",{children:O.map(e=>(0,Ft.jsxs)("tr",{className:i===e.studentId?"selected-row":"",children:[(0,Ft.jsx)("td",{children:(0,Ft.jsx)("strong",{children:e.studentId})}),(0,Ft.jsx)("td",{children:(0,Ft.jsxs)("div",{className:"student-name-cell",children:[e.firstName," ",e.lastName]})}),(0,Ft.jsx)("td",{children:e.grade}),(0,Ft.jsx)("td",{children:(0,Ft.jsxs)("div",{className:"class-info-cell",children:[(0,Ft.jsx)("div",{children:B(e)}),e.classTeacher&&(0,Ft.jsxs)("small",{children:["Teacher: ",e.classTeacher]})]})}),(0,Ft.jsx)("td",{children:F(e.status)}),(0,Ft.jsx)("td",{children:(0,Ft.jsxs)("div",{className:"contact-cell",children:[(0,Ft.jsx)("div",{children:e.email}),(0,Ft.jsx)("small",{children:dn(e.phone)})]})}),(0,Ft.jsx)("td",{children:(0,Ft.jsxs)("div",{className:"action-buttons",children:[(0,Ft.jsx)("button",{className:"btn-sm view-btn",onClick:()=>k(e.studentId),children:"Attendance"}),(0,Ft.jsx)("button",{className:"btn-sm edit-btn",onClick:()=>window.location.href="/students/edit/".concat(e.id),children:"Edit"}),(0,Ft.jsx)("button",{className:"btn-sm delete-btn",onClick:()=>P(e.id,"".concat(e.firstName," ").concat(e.lastName)),children:"Delete"})]})})]},e.id))})]})}):(0,Ft.jsx)("div",{className:"students-list",children:O.map(e=>(0,Ft.jsxs)("div",{className:"student-list-item ".concat(i===e.studentId?"selected":""),children:[(0,Ft.jsxs)("div",{className:"item-main",children:[(0,Ft.jsxs)("div",{className:"item-avatar",children:[e.firstName.charAt(0),e.lastName.charAt(0)]}),(0,Ft.jsxs)("div",{className:"item-info",children:[(0,Ft.jsxs)("div",{className:"item-header",children:[(0,Ft.jsxs)("h4",{children:[e.firstName," ",e.lastName]}),F(e.status)]}),(0,Ft.jsxs)("div",{className:"item-details",children:[(0,Ft.jsxs)("span",{children:[(0,Ft.jsx)("strong",{children:"ID:"})," ",e.studentId]}),(0,Ft.jsxs)("span",{children:[(0,Ft.jsx)("strong",{children:"Grade:"})," ",e.grade]}),(0,Ft.jsxs)("span",{children:[(0,Ft.jsx)("strong",{children:"Class:"})," ",B(e)]})]})]})]}),(0,Ft.jsxs)("div",{className:"item-actions",children:[(0,Ft.jsx)("button",{className:"view-attendance-btn",onClick:()=>k(e.studentId),disabled:E,children:"Attendance"}),(0,Ft.jsx)("button",{className:"edit-btn",onClick:()=>window.location.href="/students/edit/".concat(e.id),children:"Edit"}),(0,Ft.jsx)("button",{className:"delete-btn",onClick:()=>P(e.id,"".concat(e.firstName," ").concat(e.lastName)),children:"Delete"})]})]},e.id))})]}),i&&(0,Ft.jsxs)("div",{className:"attendance-section",children:[(0,Ft.jsxs)("div",{className:"attendance-header",children:[(0,Ft.jsx)("h3",{children:"Attendance Records"}),(0,Ft.jsx)("div",{className:"header-actions",children:(0,Ft.jsx)("button",{className:"close-btn",onClick:()=>o(null),children:"\xd7"})})]}),u&&(0,Ft.jsx)("div",{className:"attendance-stats",children:(0,Ft.jsxs)("div",{className:"stat-card",children:[(0,Ft.jsx)("h4",{children:"Attendance Summary"}),(0,Ft.jsxs)("div",{className:"stat-grid",children:[(0,Ft.jsxs)("div",{className:"stat-item",children:[(0,Ft.jsx)("span",{className:"stat-label",children:"Present:"}),(0,Ft.jsx)("span",{className:"stat-value present",children:u.presentDays})]}),(0,Ft.jsxs)("div",{className:"stat-item",children:[(0,Ft.jsx)("span",{className:"stat-label",children:"Absent:"}),(0,Ft.jsx)("span",{className:"stat-value absent",children:u.absentDays})]}),(0,Ft.jsxs)("div",{className:"stat-item",children:[(0,Ft.jsx)("span",{className:"stat-label",children:"Total Days:"}),(0,Ft.jsx)("span",{className:"stat-value",children:u.totalDays})]}),(0,Ft.jsxs)("div",{className:"stat-item",children:[(0,Ft.jsx)("span",{className:"stat-label",children:"Attendance Rate:"}),(0,Ft.jsxs)("span",{className:"stat-value percentage",children:[null===(t=u.attendancePercentage)||void 0===t?void 0:t.toFixed(1),"%"]})]})]})]})}),0===l.length?(0,Ft.jsx)("div",{className:"no-records",children:(0,Ft.jsx)("p",{children:"No attendance records found for this student."})}):(0,Ft.jsxs)("div",{className:"attendance-table-container",children:[(0,Ft.jsxs)("div",{className:"attendance-table",children:[(0,Ft.jsxs)("div",{className:"table-header",children:[(0,Ft.jsx)("span",{children:"Date"}),(0,Ft.jsx)("span",{children:"Time"}),(0,Ft.jsx)("span",{children:"Status"}),(0,Ft.jsx)("span",{children:"Class/Subject"}),(0,Ft.jsx)("span",{children:"Method"})]}),l.slice(0,15).map(e=>(0,Ft.jsxs)("div",{className:"table-row",children:[(0,Ft.jsx)("span",{children:cn(e.attendanceDate)}),(0,Ft.jsx)("span",{children:cn(e.scanTime)}),(0,Ft.jsx)("span",{children:L(e.status)}),(0,Ft.jsxs)("span",{children:[e.className||"N/A",e.subject&&" - ".concat(e.subject)]}),(0,Ft.jsx)("span",{className:"scan-method",children:e.scanMethod})]},e.id))]}),l.length>15&&(0,Ft.jsxs)("div",{className:"table-footer",children:[(0,Ft.jsxs)("p",{children:["Showing 15 of ",l.length," records"]}),(0,Ft.jsx)("button",{className:"view-all-btn",children:"View All"})]})]})]})]})]})},pn=()=>{const[t,n]=(0,e.useState)((new Date).toISOString().split("T")[0]),[r,a]=(0,e.useState)([]),[s,i]=(0,e.useState)(!1),[o,l]=(0,e.useState)(null),[c,u]=(0,e.useState)({present:0,late:0,absent:0,total:0,percentage:0}),[d,h]=(0,e.useState)(""),[f,m]=(0,e.useState)("");(0,e.useEffect)(()=>{g()},[t]);const g=async()=>{i(!0),l(null);try{const e=await Ot.getByDate(t),n=Array.isArray(e)?e:[];a(n),p(n)}catch(e){l("Failed to load attendance data: "+e.message),console.error("Error loading attendance data:",e)}finally{i(!1)}},p=e=>{const t=e.filter(e=>"PRESENT"===e.status).length,n=e.filter(e=>"LATE"===e.status).length,r=e.filter(e=>"ABSENT"===e.status).length,a=e.length,s=a>0?Math.round(t/a*100):0;u({present:t,late:n,absent:r,total:a,percentage:s})},y=r.filter(e=>{const t=!d||e.grade===d,n=!f||e.status===f;return t&&n}),v=e=>{const t="PRESENT"===e?"present":"LATE"===e?"late":"absent";return(0,Ft.jsx)("span",{className:"status-badge ".concat(t),children:e})};return(0,Ft.jsxs)("div",{className:"reports-container",children:[(0,Ft.jsxs)("div",{className:"reports-header",children:[(0,Ft.jsx)("h2",{children:"Attendance Reports"}),(0,Ft.jsxs)("div",{className:"header-controls",children:[(0,Ft.jsxs)("div",{className:"date-selector",children:[(0,Ft.jsx)("label",{htmlFor:"report-date",children:"Select Date: "}),(0,Ft.jsx)("input",{type:"date",id:"report-date",value:t,onChange:e=>n(e.target.value),max:(new Date).toISOString().split("T")[0]})]}),(0,Ft.jsx)("button",{className:"refresh-btn",onClick:g,disabled:s,children:s?"Refreshing...":"\ud83d\udd04 Refresh"})]})]}),(0,Ft.jsxs)("div",{className:"stats-cards",children:[(0,Ft.jsxs)("div",{className:"stat-card total",children:[(0,Ft.jsx)("div",{className:"stat-icon",children:"\ud83d\udc65"}),(0,Ft.jsxs)("div",{className:"stat-content",children:[(0,Ft.jsx)("h3",{children:"Total Present"}),(0,Ft.jsx)("div",{className:"stat-number",children:c.total})]})]}),(0,Ft.jsxs)("div",{className:"stat-card present",children:[(0,Ft.jsx)("div",{className:"stat-icon",children:"\u2705"}),(0,Ft.jsxs)("div",{className:"stat-content",children:[(0,Ft.jsx)("h3",{children:"On Time"}),(0,Ft.jsx)("div",{className:"stat-number",children:c.present})]})]}),(0,Ft.jsxs)("div",{className:"stat-card late",children:[(0,Ft.jsx)("div",{className:"stat-icon",children:"\u23f0"}),(0,Ft.jsxs)("div",{className:"stat-content",children:[(0,Ft.jsx)("h3",{children:"Late"}),(0,Ft.jsx)("div",{className:"stat-number",children:c.late})]})]}),(0,Ft.jsxs)("div",{className:"stat-card percentage",children:[(0,Ft.jsx)("div",{className:"stat-icon",children:"\ud83d\udcca"}),(0,Ft.jsxs)("div",{className:"stat-content",children:[(0,Ft.jsx)("h3",{children:"Attendance Rate"}),(0,Ft.jsxs)("div",{className:"stat-number",children:[c.percentage,"%"]})]})]})]}),(0,Ft.jsxs)("div",{className:"report-filters",children:[(0,Ft.jsxs)("div",{className:"filter-group",children:[(0,Ft.jsx)("label",{htmlFor:"filter-grade",children:"Filter by Grade:"}),(0,Ft.jsxs)("select",{id:"filter-grade",value:d,onChange:e=>h(e.target.value),children:[(0,Ft.jsx)("option",{value:"",children:"All Grades"}),hn.map(e=>(0,Ft.jsx)("option",{value:e,children:e},e))]})]}),(0,Ft.jsxs)("div",{className:"filter-group",children:[(0,Ft.jsx)("label",{htmlFor:"filter-status",children:"Filter by Status:"}),(0,Ft.jsxs)("select",{id:"filter-status",value:f,onChange:e=>m(e.target.value),children:[(0,Ft.jsx)("option",{value:"",children:"All Status"}),mn.map(e=>(0,Ft.jsx)("option",{value:e,children:e},e))]})]})]}),(0,Ft.jsxs)("div",{className:"attendance-list-section",children:[(0,Ft.jsxs)("div",{className:"section-header",children:[(0,Ft.jsxs)("h3",{children:["Attendance for ",cn(t)]}),(0,Ft.jsxs)("div",{className:"section-actions",children:[(0,Ft.jsx)("button",{className:"export-btn",onClick:()=>{const e=y.map(e=>[e.studentId,e.studentName,e.grade,un(e.scanTime),e.status,e.scanMethod]),n=[["Student ID","Name","Grade","Scan Time","Status","Method"].join(","),...e.map(e=>e.join(","))].join("\n"),r=new Blob([n],{type:"text/csv"}),a=window.URL.createObjectURL(r),s=document.createElement("a");s.href=a,s.download="attendance-".concat(t,".csv"),s.click(),window.URL.revokeObjectURL(a)},disabled:0===y.length,children:"\ud83d\udce5 Export CSV"}),(0,Ft.jsx)("button",{className:"print-btn",onClick:()=>window.print(),children:"\ud83d\udda8\ufe0f Print"})]})]}),o&&(0,Ft.jsxs)("div",{className:"error-message",children:[(0,Ft.jsx)("p",{children:o}),(0,Ft.jsx)("button",{onClick:g,className:"retry-btn",children:"Try Again"})]}),s?(0,Ft.jsxs)("div",{className:"loading-message",children:[(0,Ft.jsx)("div",{className:"spinner"}),(0,Ft.jsx)("p",{children:"Loading attendance data..."})]}):0===y.length?(0,Ft.jsx)("div",{className:"no-data-message",children:(0,Ft.jsx)("p",{children:"No attendance records found for the selected date and filters."})}):(0,Ft.jsxs)("div",{className:"attendance-table-container",children:[(0,Ft.jsxs)("div",{className:"attendance-table",children:[(0,Ft.jsxs)("div",{className:"table-header",children:[(0,Ft.jsx)("span",{children:"Student ID"}),(0,Ft.jsx)("span",{children:"Name"}),(0,Ft.jsx)("span",{children:"Grade"}),(0,Ft.jsx)("span",{children:"Scan Time"}),(0,Ft.jsx)("span",{children:"Status"}),(0,Ft.jsx)("span",{children:"Method"})]}),y.map(e=>(0,Ft.jsxs)("div",{className:"table-row",children:[(0,Ft.jsx)("span",{className:"student-id",children:e.studentId}),(0,Ft.jsx)("span",{className:"student-name",children:e.studentName}),(0,Ft.jsx)("span",{className:"grade",children:e.grade}),(0,Ft.jsx)("span",{className:"scan-time",children:un(e.scanTime)}),(0,Ft.jsx)("span",{className:"status",children:v(e.status)}),(0,Ft.jsx)("span",{className:"method",children:e.scanMethod})]},e.id))]}),(0,Ft.jsx)("div",{className:"table-footer",children:(0,Ft.jsxs)("p",{children:["Showing ",y.length," records"]})})]})]}),y.length>0&&(0,Ft.jsxs)("div",{className:"summary-section",children:[(0,Ft.jsx)("h4",{children:"Quick Summary"}),(0,Ft.jsxs)("div",{className:"summary-grid",children:[(0,Ft.jsxs)("div",{className:"summary-item",children:[(0,Ft.jsx)("strong",{children:"Total Records:"})," ",y.length]}),(0,Ft.jsxs)("div",{className:"summary-item",children:[(0,Ft.jsx)("strong",{children:"On Time Rate:"})," ",c.present,"/",c.total," (",c.percentage,"%)"]}),(0,Ft.jsxs)("div",{className:"summary-item",children:[(0,Ft.jsx)("strong",{children:"Late Arrivals:"})," ",c.late]}),(0,Ft.jsxs)("div",{className:"summary-item",children:[(0,Ft.jsx)("strong",{children:"Most Common Grade:"})," ",(()=>{const e={};return y.forEach(t=>{e[t.grade]=(e[t.grade]||0)+1}),Object.keys(e).reduce((t,n)=>e[t]>e[n]?t:n,"")})()]})]})]})]})};var yn;!function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(yn||(yn={}));var vn,wn,Sn=new Map([[yn.QR_CODE,"QR_CODE"],[yn.AZTEC,"AZTEC"],[yn.CODABAR,"CODABAR"],[yn.CODE_39,"CODE_39"],[yn.CODE_93,"CODE_93"],[yn.CODE_128,"CODE_128"],[yn.DATA_MATRIX,"DATA_MATRIX"],[yn.MAXICODE,"MAXICODE"],[yn.ITF,"ITF"],[yn.EAN_13,"EAN_13"],[yn.EAN_8,"EAN_8"],[yn.PDF_417,"PDF_417"],[yn.RSS_14,"RSS_14"],[yn.RSS_EXPANDED,"RSS_EXPANDED"],[yn.UPC_A,"UPC_A"],[yn.UPC_E,"UPC_E"],[yn.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function Nn(e){return Object.values(yn).includes(e)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"}(vn||(vn={})),function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(wn||(wn={}));var Cn,bn=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[wn.SCAN_TYPE_CAMERA,wn.SCAN_TYPE_FILE],e}(),En=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Sn.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Sn.get(t))},e}(),An=function(){function e(){}return e.createFromText=function(e){return{decodedText:e,result:{text:e}}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();!function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(Cn||(Cn={}));var xn=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:Cn.UNKWOWN_ERROR}},e}(),In=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function Tn(e){return"undefined"===typeof e||null===e}var _n,jn=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),Rn=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: ".concat(e)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),Dn=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),Mn=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!==typeof e){var n=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var r=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),a=0,s=Object.keys(e);a<s.length;a++){var i=s[a];if(r.has(i))return t.logError("".concat(i," is not supported videoConstaints."),!0),!1}return!0},e}(),On=n(72),kn=function(){function e(e,t,n){if(this.formatMap=new Map([[yn.QR_CODE,On.BarcodeFormat.QR_CODE],[yn.AZTEC,On.BarcodeFormat.AZTEC],[yn.CODABAR,On.BarcodeFormat.CODABAR],[yn.CODE_39,On.BarcodeFormat.CODE_39],[yn.CODE_93,On.BarcodeFormat.CODE_93],[yn.CODE_128,On.BarcodeFormat.CODE_128],[yn.DATA_MATRIX,On.BarcodeFormat.DATA_MATRIX],[yn.MAXICODE,On.BarcodeFormat.MAXICODE],[yn.ITF,On.BarcodeFormat.ITF],[yn.EAN_13,On.BarcodeFormat.EAN_13],[yn.EAN_8,On.BarcodeFormat.EAN_8],[yn.PDF_417,On.BarcodeFormat.PDF_417],[yn.RSS_14,On.BarcodeFormat.RSS_14],[yn.RSS_EXPANDED,On.BarcodeFormat.RSS_EXPANDED],[yn.UPC_A,On.BarcodeFormat.UPC_A],[yn.UPC_E,On.BarcodeFormat.UPC_E],[yn.UPC_EAN_EXTENSION,On.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!On)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var r=this.createZXingFormats(e),a=new Map;a.set(On.DecodeHintType.POSSIBLE_FORMATS,r),a.set(On.DecodeHintType.TRY_HARDER,!1),this.hints=a}return e.prototype.decodeAsync=function(e){var t=this;return new Promise(function(n,r){try{n(t.decode(e))}catch(a){r(a)}})},e.prototype.decode=function(e){var t=new On.MultiFormatReader(this.verbose,this.hints),n=new On.HTMLCanvasElementLuminanceSource(e),r=new On.BinaryBitmap(new On.HybridBinarizer(n)),a=t.decode(r);return{text:a.text,format:En.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var a=r[n];this.formatMap.has(a)?t.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),Pn=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(sa){s(sa)}}function o(e){try{l(r.throw(e))}catch(sa){s(sa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})},Ln=function(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(sa){o=[6,sa],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Fn=function(){function e(t,n,r){if(this.formatMap=new Map([[yn.QR_CODE,"qr_code"],[yn.AZTEC,"aztec"],[yn.CODABAR,"codabar"],[yn.CODE_39,"code_39"],[yn.CODE_93,"code_93"],[yn.CODE_128,"code_128"],[yn.DATA_MATRIX,"data_matrix"],[yn.ITF,"itf"],[yn.EAN_13,"ean_13"],[yn.EAN_8,"ean_8"],[yn.PDF_417,"pdf417"],[yn.UPC_A,"upc_a"],[yn.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&"undefined"!==typeof new BarcodeDetector({formats:["qr_code"]})},e.prototype.decodeAsync=function(e){return Pn(this,void 0,void 0,function(){var t,n;return Ln(this,function(r){switch(r.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=r.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(n=this.selectLargestBarcode(t)).rawValue,format:En.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,r=0,a=e;r<a.length;r++){var s=a[r],i=s.boundingBox.width*s.boundingBox.height;i>n&&(n=i,t=s)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var a=r[n];this.formatMap.has(a)?t.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Bn=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(sa){s(sa)}}function o(e){try{l(r.throw(e))}catch(sa){s(sa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})},Un=function(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(sa){o=[6,sa],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},zn=function(){function e(e,t,n,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&Fn.isSupported()?(this.primaryDecoder=new Fn(e,n,r),this.secondaryDecoder=new kn(e,n,r)):this.primaryDecoder=new kn(e,n,r)}return e.prototype.decodeAsync=function(e){return Bn(this,void 0,void 0,function(){var t;return Un(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(e){return Bn(this,void 0,void 0,function(){var t,n;return Un(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,r.sent()];case 3:if(n=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++){e+=n[t]}var r=e/this.executionResults.length;console.log("".concat(r," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Hn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vn=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(sa){s(sa)}}function o(e){try{l(r.throw(e))}catch(sa){s(sa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})},Gn=function(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(sa){o=[6,sa],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Wn=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),Yn=function(e){function t(t){return e.call(this,"zoom",t)||this}return Hn(t,e),t}(function(e){function t(t,n){return e.call(this,t,n)||this}return Hn(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(Wn)),Xn=function(e){function t(t){return e.call(this,"torch",t)||this}return Hn(t,e),t}(Wn),Qn=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new Yn(this.track)},e.prototype.torchFeature=function(){return new Xn(this.track)},e}(),qn=function(){function e(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=e.surface.clientWidth,r=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,r),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,a){return Vn(this,void 0,void 0,function(){var s,i;return Gn(this,function(o){switch(o.label){case 0:return s=new e(t,n,a),r.aspectRatio?(i={aspectRatio:r.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(i)]):[3,2];case 1:o.sent(),o.label=2;case 2:return s.setupSurface(),[2,s]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,n=function(){setTimeout(e,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return Vn(this,void 0,void 0,function(){return Gn(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,n){var r=e.mediaStream.getVideoTracks().length,a=0;e.mediaStream.getVideoTracks().forEach(function(n){e.mediaStream.removeTrack(n),n.stop(),++a>=r&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},e.prototype.getCapabilities=function(){return new Qn(this.getFirstTrackOrFail())},e}(),Zn=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,n){return Vn(this,void 0,void 0,function(){return Gn(this,function(r){return[2,qn.create(e,this.mediaStream,t,n)]})})},e.create=function(t){return Vn(this,void 0,void 0,function(){var n;return Gn(this,function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return[2,new e(r.sent())]}})})},e}(),Kn=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(sa){s(sa)}}function o(e){try{l(r.throw(e))}catch(sa){s(sa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})},$n=function(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(sa){o=[6,sa],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Jn=function(){function e(){}return e.failIfNotSupported=function(){return Kn(this,void 0,void 0,function(){return $n(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(e){return Kn(this,void 0,void 0,function(){return $n(this,function(t){return[2,Zn.create(e)]})})},e}(),er=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(sa){s(sa)}}function o(e){try{l(r.throw(e))}catch(sa){s(sa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})},tr=function(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(sa){o=[6,sa],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},nr=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=jn.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=jn.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){return er(this,void 0,void 0,function(){var e,t,n,r,a,s,i;return tr(this,function(o){switch(o.label){case 0:return e=function(e){for(var t=0,n=e.getVideoTracks();t<n.length;t++){var r=n[t];r.enabled=!1,r.stop(),e.removeTrack(r)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=o.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=o.sent(),r=[],a=0,s=n;a<s.length;a++)"videoinput"===(i=s[a]).kind&&r.push({id:i.deviceId,label:i.label});return e(t),[2,r]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){MediaStreamTrack.getSources(function(t){for(var n=[],r=0,a=t;r<a.length;r++){var s=a[r];"video"===s.kind&&n.push({id:s.id,label:s.label})}e(n)})})},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(_n||(_n={}));var rr,ar=function(){function e(){this.state=_n.NOT_STARTED,this.onGoingTransactionNewState=_n.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===_n.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=_n.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===_n.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=_n.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==_n.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case _n.UNKNOWN:throw"Transition from unknown is not allowed";case _n.NOT_STARTED:this.failIfNewStateIs(e,[_n.PAUSED]);case _n.SCANNING:case _n.PAUSED:}},e.prototype.failIfNewStateIs=function(e,t){for(var n=0,r=t;n<r.length;n++){if(e===r[n])throw"Cannot transition from ".concat(this.state," to ").concat(e)}},e}(),sr=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===_n.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==_n.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===_n.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===_n.PAUSED},e}(),ir=function(){function e(){}return e.create=function(){return new sr(new ar)},e}(),or=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return or(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(bn),cr=function(){function e(e,t){this.logger=t,this.fps=lr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=lr.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Mn.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Tn(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),ur=function(){function e(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");var n;this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(n=t,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new In(this.verbose),this.qrcode=new zn(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=ir.create()}return e.prototype.start=function(e,t,n,r){var a,s=this;if(!e)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";a=r||(this.verbose?this.logger.log:function(){});var i=cr.create(t,this.logger);this.clearElement();var o=!1;i.videoConstraints&&(i.isMediaStreamConstraintsValid()?o=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=o,c=document.getElementById(this.elementId);c.clientWidth?c.clientWidth:lr.DEFAULT_WIDTH;c.style.position="relative",this.shouldScan=!0,this.element=c;var u=this,d=this.stateManagerProxy.startTransition(_n.SCANNING);return new Promise(function(t,r){var o=l?i.videoConstraints:u.createVideoConstraints(e);if(!o)return d.cancel(),void r("videoConstraints should be defined");var c={};l&&!i.aspectRatio||(c.aspectRatio=i.aspectRatio);var h={onRenderSurfaceReady:function(e,t){u.setupUi(e,t,i),u.isScanning=!0,u.foreverScan(i,n,a)}};Jn.failIfNotSupported().then(function(e){e.create(o).then(function(e){return e.render(s.element,c,h).then(function(e){u.renderedCamera=e,d.execute(),t(null)}).catch(function(e){d.cancel(),r(e)})}).catch(function(e){d.cancel(),r(jn.errorGettingUserMedia(e))})}).catch(function(e){d.cancel(),r(jn.cameraStreamingNotSupported())})})},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(_n.PAUSED),this.showPausedState(),(Tn(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(_n.SCANNING),e.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume(function(){t()}):t()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(_n.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),function(){if(e.element){var t=document.getElementById(lr.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}}(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(e){return e.decodedText})},e.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Tn(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(r,a){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var s=new Image;s.onload=function(){var e=s.width,i=s.height,o=document.getElementById(n.elementId),l=o.clientWidth?o.clientWidth:lr.DEFAULT_WIDTH,c=Math.max(o.clientHeight?o.clientHeight:i,lr.FILE_SCAN_MIN_HEIGHT),u=n.computeCanvasDrawConfig(e,i,l,c);if(t){var d=n.createCanvasElement(l,c,"qr-canvas-visible");d.style.display="inline-block",o.appendChild(d);var h=d.getContext("2d");if(!h)throw"Unable to get 2d context from canvas";h.canvas.width=l,h.canvas.height=c,h.drawImage(s,0,0,e,i,u.x,u.y,u.width,u.height)}var f=lr.FILE_SCAN_HIDDEN_CANVAS_PADDING,m=Math.max(s.width,u.width),g=Math.max(s.height,u.height),p=m+2*f,y=g+2*f,v=n.createCanvasElement(p,y);o.appendChild(v);var w=v.getContext("2d");if(!w)throw"Unable to get 2d context from canvas";w.canvas.width=p,w.canvas.height=y,w.drawImage(s,0,0,e,i,f,f,m,g);try{n.qrcode.decodeRobustlyAsync(v).then(function(e){r(An.createFromQrcodeResult(e))}).catch(a)}catch(S){a("QR code parse error, error = ".concat(S))}},s.onerror=a,s.onabort=a,s.onstalled=a,s.onsuspend=a,s.src=URL.createObjectURL(e)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return nr.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(!e)throw"videoConstaints is required argument.";if(!Mn.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[yn.QR_CODE,yn.AZTEC,yn.CODABAR,yn.CODE_39,yn.CODE_93,yn.CODE_128,yn.DATA_MATRIX,yn.MAXICODE,yn.ITF,yn.EAN_13,yn.EAN_8,yn.PDF_417,yn.RSS_14,yn.RSS_EXPANDED,yn.UPC_A,yn.UPC_E,yn.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return t;if(!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],r=0,a=e.formatsToSupport;r<a.length;r++){var s=a[r];Nn(s)?n.push(s):this.logger.warn("Invalid format: ".concat(s," passed in config, ignoring."))}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Tn(e))return!0;if(!Tn(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(Tn(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!Tn(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,n){var r=this,a=n.qrbox;this.validateQrboxConfig(a);var s,i=this.toQrdimensions(e,t,a),o=function(e){if(e<lr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(lr.MIN_QR_BOX_SIZE,"px.")};o(i.width),o(i.height),i.width=((s=i.width)>e&&(r.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),s=e),s)},e.prototype.validateQrboxConfig=function(e){if("number"!==typeof e&&"function"!==typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,n){if("number"===typeof n)return{width:n,height:n};if("function"===typeof n)try{return n(e,t)}catch(r){throw new Error("qrbox config was passed as a function but it failed with unknown error"+r)}return n},e.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var r=Tn(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(r);var a=this.toQrdimensions(e,t,r);a.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var s=n.isShadedBoxEnabled()&&a.height<=t,i={x:0,y:0,width:e,height:t},o=s?this.getShadedRegionBounds(e,t,a):i,l=this.createCanvasElement(o.width,o.height),c=l.getContext("2d",{willReadFrequently:!0});c.canvas.width=o.width,c.canvas.height=o.height,this.element.append(l),s&&this.possiblyInsertShadingElement(this.element,e,t,a),this.createScannerPausedUiElement(this.element),this.qrRegion=o,this.context=c,this.canvasElement=l},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=jn.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(t){return e(t.text,An.createFromQrcodeResult(t)),n.possiblyUpdateShaders(!0),!0}).catch(function(e){n.possiblyUpdateShaders(!1);var r=jn.codeParseError(e);return t(r,xn.createFrom(r)),!1})},e.prototype.foreverScan=function(e,t,n){var r=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),s=a.videoWidth/a.clientWidth,i=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var o=this.qrRegion.width*s,l=this.qrRegion.height*i,c=this.qrRegion.x*s,u=this.qrRegion.y*i;this.context.drawImage(a,c,u,o,l,0,0,this.qrRegion.width,this.qrRegion.height);var d=function(){r.foreverScanTimeout=setTimeout(function(){r.foreverScan(e,t,n)},r.getTimeoutFps(e.fps))};this.scanContext(t,n).then(function(a){a||!0===e.disableFlip?d():(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(t,n).finally(function(){d()}))}).catch(function(e){r.logger.logError("Error happend while scanning context",e),d()})}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",n="deviceId",r={user:!0,environment:!0},a="exact",s=function(e){if(e in r)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},i=Object.keys(e);if(1!==i.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(i.length," keys");var o=Object.keys(e)[0];if(o!==t&&o!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(o!==t){var l=e.deviceId;if("string"==typeof l)return{deviceId:l};if("object"==typeof l){if(a in l)return{deviceId:{exact:l["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof l)}var c=e.facingMode;if("string"==typeof c){if(s(c))return{facingMode:c}}else{if("object"!=typeof c)throw"Invalid type of 'facingMode' = ".concat(typeof c);if(!(a in c))throw"'facingMode' should be string or object with"+" ".concat(a," as key.");if(s(c["".concat(a)]))return{facingMode:{exact:c["".concat(a)]}}}}throw"Invalid type of 'cameraIdOrConfig' = ".concat(typeof e)},e.prototype.computeCanvasDrawConfig=function(e,t,n,r){if(e<=n&&t<=r)return{x:(n-e)/2,y:(r-t)/2,width:e,height:t};var a=e,s=t;return e>n&&(t*=n/e,e=n),t>r&&(e*=r/t,t=r),this.logger.log("Image downsampled from "+"".concat(a,"X").concat(s)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,n,r)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?lr.BORDER_SHADER_MATCH_COLOR:lr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,n){var r=e,a=t,s=document.createElement("canvas");return s.style.width="".concat(r,"px"),s.style.height="".concat(a,"px"),s.style.display="none",s.id=Tn(n)?"qr-canvas":n,s},e.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(e,t,n,r){if(!(t-r.width<1||n-r.height<1)){var a=document.createElement("div");a.style.position="absolute";var s=(t-r.width)/2,i=(n-r.height)/2;if(a.style.borderLeft="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(i,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(i,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(lr.SHADED_REGION_ELEMENT_ID),t-r.width<11||n-r.height<11)this.hasBorderShaders=!1;else{var o=40;this.insertShaderBorders(a,o,5,-5,null,0,!0),this.insertShaderBorders(a,o,5,-5,null,0,!1),this.insertShaderBorders(a,o,5,null,-5,0,!0),this.insertShaderBorders(a,o,5,null,-5,0,!1),this.insertShaderBorders(a,5,45,-5,null,-5,!0),this.insertShaderBorders(a,5,45,null,-5,-5,!0),this.insertShaderBorders(a,5,45,-5,null,-5,!1),this.insertShaderBorders(a,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}e.append(a)}},e.prototype.insertShaderBorders=function(e,t,n,r,a,s,i){var o=document.createElement("div");o.style.position="absolute",o.style.backgroundColor=lr.BORDER_SHADER_DEFAULT_COLOR,o.style.width="".concat(t,"px"),o.style.height="".concat(n,"px"),null!==r&&(o.style.top="".concat(r,"px")),null!==a&&(o.style.bottom="".concat(a,"px")),i?o.style.left="".concat(s,"px"):o.style.right="".concat(s,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(o),e.appendChild(o)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),dr="data:image/svg+xml;base64,",hr=dr+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",fr=dr+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",mr=dr+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",gr=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),pr=function(){function e(){this.data=gr.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=gr.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),yr=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Dn.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var n=document.createElement("br"),r=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(r);var a=document.createElement("a");a.innerText=Dn.reportIssues(),a.href="https://github.com/mebjas/html5-qrcode/issues",a.target="new",a.style.color="white",this.infoDiv.appendChild(a),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),vr=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=mr,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=mr,this.infoIcon.style.opacity="0.6")},e}(),wr=function(){function e(){var e=this;this.infoDiv=new yr,this.infoIcon=new vr(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),Sr=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(sa){s(sa)}}function o(e){try{l(r.throw(e))}catch(sa){s(sa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})},Nr=function(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(sa){o=[6,sa],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Cr=function(){function e(){}return e.hasPermissions=function(){return Sr(this,void 0,void 0,function(){var e,t,n,r;return Nr(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=a.sent(),t=0,n=e;t<n.length;t++)if("videoinput"===(r=n[t]).kind&&r.label)return[2,!0];return[2,!1]}})})},e}(),br=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(e){return e===wn.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===wn.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return bn.DEFAULT_SUPPORTED_SCAN_TYPE;var t=bn.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var n=0,r=e;n<r.length;n++){var a=r[n];if(!bn.DEFAULT_SUPPORTED_SCAN_TYPE.includes(a))throw"Unsupported scan type ".concat(a)}return e},e}(),Er=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),Ar=function(){function e(){}return e.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n.classList.add(Er.ALL_ELEMENT_CLASS),"button"===e&&n.setAttribute("type","button"),n},e}(),xr=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(sa){s(sa)}}function o(e){try{l(r.throw(e))}catch(sa){s(sa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})},Ir=function(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(sa){o=[6,sa],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Tr=function(){function e(e,t,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=n}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return xr(this,void 0,void 0,function(){var e,t;return Ir(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?Rn.torchOffButton():Rn.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var n=e?Rn.torchOnFailedMessage():Rn.torchOffFailedMessage();t&&(n+="; Error = "+t),this.onTorchActionFailureCallback(n)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),_r=function(){function e(e,t){this.onTorchActionFailureCallback=t,this.torchButton=Ar.createElement("button",Er.TORCH_BUTTON_ID),this.torchController=new Tr(e,this,t)}return e.prototype.render=function(e,t){var n=this;this.torchButton.innerText=Rn.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var r=this;this.torchButton.addEventListener("click",function(e){return xr(n,void 0,void 0,function(){return Ir(this,function(e){switch(e.label){case 0:return[4,r.torchController.flipState()];case 1:return e.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(Er.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(Er.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(Er.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(Er.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(e){this.torchController=new Tr(e,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(e){this.torchButton.innerText=e},e.prototype.reset=function(){this.torchButton.innerText=Rn.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,a){var s=new e(n,a);return s.render(t,r),s},e}(),jr=function(){function e(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var r=document.createElement("label");r.setAttribute("for",this.getFileScanInputId()),r.style.display="inline-block",this.fileBasedScanRegion.appendChild(r),this.fileSelectionButton=Ar.createElement("button",Er.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(e){r.click()}),r.append(this.fileSelectionButton),this.fileScanInput=Ar.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",r.appendChild(this.fileScanInput);var a=this;this.fileScanInput.addEventListener("change",function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var r=t.files[0],s=r.name;a.setImageNameToButton(s),n(r)}}});var s=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(s),this.fileBasedScanRegion.addEventListener("dragenter",function(e){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(e){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(e){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var r=t.files;if(!r||0===r.length)return;for(var i=!1,o=0;o<r.length;++o){var l=r.item(o);if(l){if(l.type.match(/image.*/)){i=!0;var c=l.name;a.setImageNameToButton(c),n(l),s.innerText=Rn.dragAndDropMessage();break}}}i||(s.innerText=Rn.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=Rn.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),n=e.length,r=e.substring(n-8,n);e="".concat(t,"....").concat(r)}var a=Rn.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=a},e.prototype.setInitialValueToButton=function(){var e=Rn.fileSelectionChooseImage()+" - "+Rn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){return new e(t,n,r)},e}(),Rr=function(){function e(e){this.selectElement=Ar.createElement("select",Er.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return e.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw new Error("No cameras found");if(1===n)t.style.display="none";else{var r=Rn.selectCamera();t.innerText="".concat(r," (").concat(this.cameras.length,")  ")}for(var a=1,s=0,i=this.cameras;s<i.length;s++){var o=i[s],l=o.id,c=null==o.label?l:o.label;c&&""!==c||(c=[Rn.anonymousCameraPrefix(),a++].join(" "));var u=document.createElement("option");u.value=l,u.innerText=c,this.options.push(u),this.selectElement.appendChild(u)}t.appendChild(this.selectElement),e.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(e){for(var t=0,n=this.options;t<n.length;t++){if(n[t].value===e)return!0}return!1},e.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),Dr=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Ar.createElement("input",Er.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=Rn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var r=this;this.rangeInput.addEventListener("input",function(){return r.onValueChange()}),this.rangeInput.addEventListener("change",function(){return r.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var e=Rn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,n,r){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}();!function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(rr||(rr={}));!function(){function e(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===n,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new br(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new In(this.verbose),this.persistedDataManager=new pr,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}e.prototype.render=function(e,t){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,r){if(e)e(t,r);else{if(n.lastMatchFound===t)return;n.lastMatchFound=t,n.setHeaderMessage(Rn.lastMatch(t),rr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,n){t&&t(e,n)};var r,a,s=document.getElementById(this.elementId);if(!s)throw"HTML Element with id=".concat(this.elementId," not found");s.innerHTML="",this.createBasicLayout(s),this.html5Qrcode=new ur(this.getScanRegionId(),(r=this.config,a=this.verbose,{formatsToSupport:r.formatsToSupport,useBarCodeDetectorIfSupported:r.useBarCodeDetectorIfSupported,experimentalFeatures:r.experimentalFeatures,verbose:a}))},e.prototype.pause=function(e){(Tn(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise(function(n,r){e.html5Qrcode?e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(r){e.html5Qrcode?(e.html5Qrcode.clear(),t(),n()):n()}).catch(function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),r(t)}):(e.html5Qrcode.clear(),t(),n()):n()}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=bn.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!bn.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=bn.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=bn.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:bn.SCAN_DEFAULT_FPS,rememberLastUsedCamera:bn.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:bn.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),n=this.getScanRegionId();t.id=n,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),br.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var r=document.createElement("div"),a=this.getDashboardId();r.id=a,r.style.width="100%",e.appendChild(r),this.setupInitialDashboard(r)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t),(new wr).renderInto(t);var n=document.createElement("div");n.id=this.getHeaderMessageContainerId(),n.style.display="none",n.style.textAlign="center",n.style.fontSize="14px",n.style.padding="2px 10px",n.style.margin="4px",n.style.borderTop="1px solid #f6f6f6",t.appendChild(n)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,n){var r=this;r.showHideScanTypeSwapLink(!1),r.setHeaderMessage(Rn.cameraPermissionRequesting());var a=function(){n||r.createPermissionButton(e,t)};ur.getCameras().then(function(n){r.persistedDataManager.setHasPermission(!0),r.showHideScanTypeSwapLink(!0),r.resetHeaderMessage(),n&&n.length>0?(e.removeChild(t),r.renderCameraSelection(n)):(r.setHeaderMessage(Rn.noCameraFound(),rr.STATUS_WARNING),a())}).catch(function(e){r.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:a(),r.setHeaderMessage(e,rr.STATUS_WARNING),r.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(e,t){var n=this,r=Ar.createElement("button",this.getCameraPermissionButtonId());r.innerText=Rn.cameraPermissionTitle(),r.addEventListener("click",function(){r.disabled=!0,n.createCameraListUi(e,t,r)}),t.appendChild(r)},e.prototype.createPermissionsUi=function(e,t){var n=this;br.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?Cr.hasPermissions().then(function(r){r?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))}).catch(function(r){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)}):this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=br.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var r=document.createElement("div");r.style.textAlign="center",n.appendChild(r),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,r),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=br.isFileScanType(this.currentScanType),n=this;this.fileSelectionUi=jr.create(e,t,function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";br.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(Rn.loadingImage()),n.html5Qrcode.scanFileV2(e,!0).then(function(e){n.resetHeaderMessage(),n.qrCodeSuccessCallback(e.decodedText,e)}).catch(function(e){n.setHeaderMessage(e,rr.STATUS_WARNING),n.qrCodeErrorCallback(e,xn.createFrom(e))}))})},e.prototype.renderCameraSelection=function(e){var t=this,n=this,r=document.getElementById(this.getDashboardSectionCameraScanRegionId());r.style.textAlign="center";var a=Dr.create(r,!1),s=Rr.create(r,e),i=document.createElement("span"),o=Ar.createElement("button",Er.CAMERA_START_BUTTON_ID);o.innerText=Rn.scanButtonStartScanningText(),i.appendChild(o);var l,c=Ar.createElement("button",Er.CAMERA_STOP_BUTTON_ID);c.innerText=Rn.scanButtonStopScanningText(),c.style.display="none",c.disabled=!0,i.appendChild(c);r.appendChild(i);var u=function(e){e||(o.style.display="none"),o.innerText=Rn.scanButtonStartScanningText(),o.style.opacity="1",o.disabled=!1,e&&(o.style.display="inline-block")};if(o.addEventListener("click",function(e){o.innerText=Rn.scanButtonScanningStarting(),s.disable(),o.disabled=!0,o.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var r,d=s.getValue();n.persistedDataManager.setLastUsedCameraId(d),n.html5Qrcode.start(d,(r=n.config,{fps:r.fps,qrbox:r.qrbox,aspectRatio:r.aspectRatio,disableFlip:r.disableFlip,videoConstraints:r.videoConstraints}),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(e){c.disabled=!1,c.style.display="inline-block",u(!1);var r=n.html5Qrcode.getRunningTrackCameraCapabilities();!0===t.config.showTorchButtonIfSupported&&function(e){e.torchFeature().isSupported()?(l?l.updateTorchCapability(e.torchFeature()):l=_r.create(i,e.torchFeature(),{display:"none",marginLeft:"5px"},function(e){n.setHeaderMessage(e,rr.STATUS_WARNING)}),l.show()):l&&l.hide()}(r),!0===t.config.showZoomSliderIfSupported&&function(e){var n=e.zoomFeature();if(n.isSupported()){a.setOnCameraZoomValueChangeCallback(function(e){n.apply(e)});var r,s,i,o=1;t.config.defaultZoomValueIfSupported&&(o=t.config.defaultZoomValueIfSupported),r=o,s=n.min(),o=r>(i=n.max())?i:r<s?s:r,a.setValues(n.min(),n.max(),o,n.step()),a.show()}}(r)}).catch(function(e){n.showHideScanTypeSwapLink(!0),s.enable(),u(!0),n.setHeaderMessage(e,rr.STATUS_WARNING)})}),s.hasSingleItem()&&o.click(),c.addEventListener("click",function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";c.disabled=!0,n.html5Qrcode.stop().then(function(e){t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),s.enable(),o.disabled=!1,c.style.display="none",o.style.display="inline-block",l&&(l.reset(),l.hide()),a.removeOnCameraZoomValueChangeCallback(),a.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(e){c.disabled=!1,n.setHeaderMessage(e,rr.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var d=n.persistedDataManager.getLastUsedCameraId();s.hasValue(d)?(s.setValue(d),o.click()):n.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=Rn.textIfCameraScanSelected(),n=Rn.textIfFileScanSelected(),r=document.getElementById(this.getDashboardSectionId()),a=document.createElement("div");a.style.textAlign="center";var s=Ar.createElement("span",this.getDashboardSectionSwapLinkId());s.style.textDecoration="underline",s.style.cursor="pointer",s.innerText=br.isCameraScanType(this.currentScanType)?t:n,s.addEventListener("click",function(){e.sectionSwapAllowed?(e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,br.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),s.innerText=n,e.currentScanType=wn.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),s.innerText=t,e.currentScanType=wn.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0):e.verbose&&e.logger.logError("Section swap called when not allowed")}),a.appendChild(s),r.appendChild(a)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;this.persistedDataManager.hasCameraPermissions()&&Cr.hasPermissions().then(function(n){if(n){var r=document.getElementById(t.getCameraPermissionButtonId());if(!r)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";r.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(e){t.persistedDataManager.setHasPermission(!1)})},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=rr.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case rr.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case rr.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case rr.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return t.innerHTML="<br>",void t.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=hr,this.cameraScanImage.alt=Rn.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return t.innerHTML="<br>",void t.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=fr,this.fileScanImage.alt=Rn.fileScanAltText()},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return Er.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return Er.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())}}();const Mr=()=>{var t,n,r,a,s,i,o,c;const[u,d]=(0,e.useState)(null),[h,f]=(0,e.useState)(null),[m,g]=(0,e.useState)(null),[p,y]=(0,e.useState)(!1),[v,w]=(0,e.useState)(!1),[S,N]=(0,e.useState)([]),[C,b]=(0,e.useState)(null),[E,A]=(0,e.useState)(null),[x,I]=(0,e.useState)([]),[T,_]=(0,e.useState)(null),[j,R]=(0,e.useState)(!1),[D,M]=(0,e.useState)(!1),[O,k]=(0,e.useState)(new Date),[P,L]=(0,e.useState)(!1),F=(0,e.useRef)(null),B="reader",U=()=>({0:"SUNDAY",1:"MONDAY",2:"TUESDAY",3:"WEDNESDAY",4:"THURSDAY",5:"FRIDAY",6:"SATURDAY"}[(new Date).getDay()]);(0,e.useEffect)(()=>{const e=setInterval(()=>{k(new Date)},6e4);return()=>clearInterval(e)},[]),(0,e.useEffect)(()=>(z(),()=>$()),[]),(0,e.useEffect)(()=>{C&&H(C.id)},[C]);const z=async()=>{try{const e=await Rt.getAllActive();N(e),1===e.length&&b(e[0])}catch(m){console.error("Error loading classes:",m),g("Failed to load active classes")}},H=async e=>{L(!0);try{console.log("\ud83d\udcc5 Loading schedules for class ".concat(e,"..."));const n=U();console.log("Today is: ".concat(n));let r=[];try{const t=await kt.getByClass(e);console.log("\ud83d\udccb Found ".concat(t.length," total schedules")),r=t.filter(e=>e.dayOfWeek===n),console.log("\ud83d\udcc5 Found ".concat(r.length," schedules for today (").concat(n,")"))}catch(m){console.error("Error fetching schedules:",m),r=V(e,n),console.log("\ud83d\udd04 Using demo schedules: ".concat(r.length," periods"))}if(r.sort((e,t)=>e.startTime.localeCompare(t.startTime)),I(r),r.length>0){var t;const e=G(r);A(e||r[0]),console.log("\u2705 Selected schedule: ".concat((null===e||void 0===e?void 0:e.subject)||(null===(t=r[0])||void 0===t?void 0:t.subject)))}else console.log("\u26a0\ufe0f No schedules found for today"),A(null)}catch(m){console.error("Error loading schedules:",m)}finally{L(!1)}},V=(e,t)=>{let n=(new Date).getHours()<12?9:14;return[{id:1,schoolClass:{id:e},dayOfWeek:t,startTime:"".concat(n.toString().padStart(2,"0"),":00:00"),endTime:"".concat((n+1).toString().padStart(2,"0"),":30:00"),subject:"Mathematics"},{id:2,schoolClass:{id:e},dayOfWeek:t,startTime:"".concat((n+2).toString().padStart(2,"0"),":00:00"),endTime:"".concat((n+3).toString().padStart(2,"0"),":30:00"),subject:"Science"}]},G=e=>{const t=(new Date).toTimeString().split(" ")[0];for(const n of e){const e=n.startTime,r=n.endTime,a=W(r,30);if(t>=e&&t<=a)return n}return e.find(e=>e.startTime>t)||e[0]},W=(e,t)=>{const[n,r,a]=e.split(":").map(Number),s=new Date;return s.setHours(n,r+t,a||0),s.toTimeString().split(" ")[0]},Y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!e)return"PRESENT";const n=t.toTimeString().split(" ")[0],r=e.startTime,a=X(n)-X(r);return a<=0||a<=15?"PRESENT":a<=30?"LATE":"ABSENT"},X=e=>{const[t,n]=e.split(":").map(Number);return 60*t+n},Q=e=>{if(!e)return"General Attendance";const t=e.startTime.substring(0,5),n=e.endTime.substring(0,5),r=Y(e,O);let a="".concat(e.subject,": ").concat(t," - ").concat(n);if("LATE"===r){const e=W(t,15).substring(0,5),n=W(t,30).substring(0,5);a+=" (Late window: ".concat(e," - ").concat(n,")")}else if("ABSENT"===r){const e=W(t,30).substring(0,5);a+=" (Absent after: ".concat(e,")")}return a},q=async()=>{try{if(!C)return void g("Please select a class first");g(null),d(null),f(null),_(null),R(!1),M(!1),await new Promise(e=>setTimeout(e,100));if(!document.getElementById(B))throw new Error("Scanner element not found in DOM");F.current||(F.current=new ur(B));const e=await ur.getCameras();if(0===e.length)throw new Error("No camera found");const t=e[0].id;w(!0),await F.current.start({deviceId:{exact:t}},{fps:10,qrbox:{width:250,height:250}},async e=>{console.log("\u2705 Scanned QR:",e),await $(),d(e),await Z(e)},e=>{e&&!e.includes("NotFoundException")&&console.warn("\u26a0\ufe0f Scan error:",e)})}catch(e){console.error("\u274c Scanner start error:",e),g(e.message||"Failed to start scanner"),w(!1)}},Z=async e=>{y(!0);try{const t=JSON.parse(e),n=await(async e=>{try{console.log("\ud83d\udcb0 Checking fee status for student:",e);const t=await Lt.checkFeeStatusForAttendance(e,null===C||void 0===C?void 0:C.id);return _(t),{allowAttendance:t.allowAttendance,warningMessage:t.warningMessage,showWarning:t.showWarning,status:t,gracePeriodActive:t.isGracePeriodActive,daysOverdue:t.daysOverdue,balance:t.balance,isOverdue:"OVERDUE"===t.overallStatus,requireTeacherApproval:t.requireTeacherApproval}}catch(m){return console.error("Error checking fee status:",m),{allowAttendance:!0,warningMessage:"Fee check failed - attendance allowed",showWarning:!1,status:null,gracePeriodActive:!1,daysOverdue:0,balance:0,isOverdue:!1,requireTeacherApproval:!1}}})(t.studentId);if(!n.allowAttendance)return M(!0),void _(n.status);if(n.showWarning)return _(n.status),R(!0),void sessionStorage.setItem("pendingStudentData",JSON.stringify({studentData:t,classId:C.id,scheduleId:null===E||void 0===E?void 0:E.id,warningMessage:n.warningMessage}));await K(t,C.id)}catch(t){console.error("\u274c Processing error:",t),g(t.message||"Failed to process attendance")}finally{y(!1)}},K=async(e,t)=>{const n=new Date,r=n.toISOString().split("T")[0],a=Y(E,n),s={studentId:e.studentId,classId:t,scheduleId:null===E||void 0===E?void 0:E.id,date:r,status:a,scanTime:n.toISOString(),autoStatus:!0,subject:(null===E||void 0===E?void 0:E.subject)||"General"};console.log("\ud83d\udcbe Recording attendance:",s),console.log("\u23f0 Schedule: ".concat(null===E||void 0===E?void 0:E.subject," ").concat(null===E||void 0===E?void 0:E.startTime,"-").concat(null===E||void 0===E?void 0:E.endTime)),console.log("\ud83d\udcca Status: ".concat(a," (based on time comparison)"));try{let t;if(t=null!==E&&void 0!==E&&E.id?await Ot.recordForSession(e.studentId,E.id,a):await Ot.recordManual(e.studentId,r,a),t.error)throw new Error(t.error);const s=l(l({},t),{},{className:C.className,grade:C.grade,classTeacher:C.classTeacher,subject:(null===E||void 0===E?void 0:E.subject)||"General",scheduleTime:E?"".concat(E.startTime.substring(0,5)," - ").concat(E.endTime.substring(0,5)):"N/A",scanTime:n.toISOString(),status:a,feeStatus:T,timeDescription:Q(E),wasAutoDetermined:!0});f(s)}catch(m){console.error("Attendance recording error:",m);const s=l(l({},{id:Date.now(),studentId:e.studentId,studentName:"".concat(e.firstName," ").concat(e.lastName),status:a,attendanceDate:r,scanTime:n.toISOString(),success:!0}),{},{className:C.className,grade:C.grade,classTeacher:C.classTeacher,subject:(null===E||void 0===E?void 0:E.subject)||"General",scheduleTime:E?"".concat(E.startTime.substring(0,5)," - ").concat(E.endTime.substring(0,5)):"N/A",status:a,feeStatus:T,timeDescription:Q(E),wasAutoDetermined:!0});f(s)}},$=async()=>{try{var e;F.current&&F.current.isScanning&&await F.current.stop(),await(null===(e=F.current)||void 0===e?void 0:e.clear())}catch(t){console.warn("\u26a0\ufe0f Error stopping scanner:",t)}finally{w(!1);const e=document.getElementById(B);e&&(e.innerHTML="")}},J=async()=>{d(null),f(null),g(null),_(null),R(!1),M(!1),y(!1),await $(),sessionStorage.removeItem("pendingStudentData")},ee=e=>{switch(e){case"PRESENT":case"PAID":return"#4caf50";case"LATE":case"PENDING":return"#ff9800";case"ABSENT":case"OVERDUE":return"#f44336";case"PARTIAL":return"#2196f3";default:return"#757575"}};return(0,Ft.jsxs)("div",{className:"scanner-container",children:[(0,Ft.jsxs)("div",{className:"scanner-header",children:[(0,Ft.jsx)("h2",{children:"QR Attendance Scanner"}),(0,Ft.jsx)("p",{children:"Select class and scan student QR codes"}),(0,Ft.jsxs)("div",{className:"current-time-display",children:[(0,Ft.jsxs)("span",{children:["Current Time: ",O.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(0,Ft.jsxs)("span",{children:[" | Today: ",U()]})]}),(0,Ft.jsxs)("div",{className:"grace-period-banner",children:[(0,Ft.jsx)("span",{className:"grace-period-icon",children:"\u23f3"}),(0,Ft.jsx)("span",{children:"Attendance Grace: 15 minutes after start time"})]})]}),(0,Ft.jsx)("div",{className:"session-selection",children:(0,Ft.jsxs)("div",{className:"selection-row",children:[(0,Ft.jsxs)("div",{className:"selection-group",children:[(0,Ft.jsx)("label",{htmlFor:"classSelect",children:"Select Class:"}),(0,Ft.jsxs)("select",{id:"classSelect",value:(null===C||void 0===C?void 0:C.id)||"",onChange:e=>{const t=S.find(t=>t.id===parseInt(e.target.value));b(t),J()},disabled:v,children:[(0,Ft.jsx)("option",{value:"",children:"Choose a class..."}),S.map(e=>(0,Ft.jsxs)("option",{value:e.id,children:[e.className," - ",e.grade," ",e.stream?"(".concat(e.stream,")"):""]},e.id))]})]}),C&&x.length>0&&(0,Ft.jsxs)("div",{className:"selection-group",children:[(0,Ft.jsx)("label",{htmlFor:"scheduleSelect",children:"Select Period:"}),(0,Ft.jsxs)("select",{id:"scheduleSelect",value:(null===E||void 0===E?void 0:E.id)||"",onChange:e=>{const t=x.find(t=>t.id===parseInt(e.target.value));A(t)},disabled:v||P,children:[(0,Ft.jsx)("option",{value:"",children:"Choose period..."}),x.map(e=>(0,Ft.jsxs)("option",{value:e.id,children:[e.subject," (",e.startTime.substring(0,5)," - ",e.endTime.substring(0,5),")"]},e.id))]}),P&&(0,Ft.jsx)("small",{children:"Loading schedules..."})]})]})}),C&&(0,Ft.jsxs)("div",{className:"current-session-info",children:[(0,Ft.jsx)("h4",{children:"Current Session"}),(0,Ft.jsxs)("div",{className:"session-details",children:[(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Class:"})," ",C.className]}),(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Grade:"})," ",C.grade]}),(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Teacher:"})," ",C.classTeacher||"Not Assigned"]}),E?(0,Ft.jsxs)(Ft.Fragment,{children:[(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Period:"})," ",E.subject]}),(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Time:"})," ",E.startTime.substring(0,5)," - ",E.endTime.substring(0,5)]}),(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Predicted Status:"}),(0,Ft.jsx)("span",{className:"status-indicator",style:{backgroundColor:ee(Y(E))},children:Y(E)})]})]}):0===x.length?(0,Ft.jsx)("p",{className:"no-schedule-warning",children:"\u26a0\ufe0f No schedules found for today. Using general attendance."}):(0,Ft.jsx)("p",{className:"no-schedule-warning",children:"\u26a0\ufe0f Please select a period from the dropdown above."})]}),E&&(0,Ft.jsxs)("div",{className:"time-legend",children:[(0,Ft.jsxs)("h5",{children:["Attendance Rules for ",E.subject,":"]}),(0,Ft.jsxs)("div",{className:"legend-items",children:[(0,Ft.jsxs)("div",{className:"legend-item",children:[(0,Ft.jsx)("span",{className:"legend-dot present"}),(0,Ft.jsxs)("span",{children:[(0,Ft.jsx)("strong",{children:"Present:"})," Before ",W(E.startTime,15).substring(0,5)]})]}),(0,Ft.jsxs)("div",{className:"legend-item",children:[(0,Ft.jsx)("span",{className:"legend-dot late"}),(0,Ft.jsxs)("span",{children:[(0,Ft.jsx)("strong",{children:"Late:"})," ",W(E.startTime,15).substring(0,5)," to ",W(E.startTime,30).substring(0,5)]})]}),(0,Ft.jsxs)("div",{className:"legend-item",children:[(0,Ft.jsx)("span",{className:"legend-dot absent"}),(0,Ft.jsxs)("span",{children:[(0,Ft.jsx)("strong",{children:"Absent:"})," After ",W(E.startTime,30).substring(0,5)]})]})]})]})]}),(0,Ft.jsx)("div",{id:B,className:"qr-scanner"}),(0,Ft.jsxs)("div",{className:"scanner-controls",children:[!v&&!u&&!h&&!m&&!j&&!D&&(0,Ft.jsx)("button",{onClick:q,className:"start-scan-btn",disabled:!C||P,children:P?"Loading schedules...":C?"Start Scanner":"Select Class First"}),v&&(0,Ft.jsxs)(Ft.Fragment,{children:[(0,Ft.jsx)("p",{className:"scanner-status",children:"\ud83d\udfe2 Scanning... Point the QR code at the camera"}),(0,Ft.jsx)("button",{onClick:$,className:"stop-scan-btn",children:"Stop Scanner"})]})]}),p&&(0,Ft.jsxs)("div",{className:"loading-container",children:[(0,Ft.jsx)("div",{className:"spinner"}),(0,Ft.jsx)("p",{children:"Processing..."})]}),D&&T&&(0,Ft.jsx)("div",{className:"attendance-blocked-overlay",children:(0,Ft.jsxs)("div",{className:"attendance-blocked-modal",children:[(0,Ft.jsx)("div",{className:"blocked-icon",children:"\ud83d\udeab"}),(0,Ft.jsx)("h3",{children:"Attendance Restricted"}),(0,Ft.jsxs)("div",{className:"blocked-details",children:[(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Student ID:"})," ",T.studentId]}),(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Name:"})," ",T.studentName]}),(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Class:"})," ",T.className]}),(0,Ft.jsxs)("div",{className:"fee-summary",children:[(0,Ft.jsxs)("div",{className:"summary-item",children:[(0,Ft.jsx)("span",{children:"Fee Status:"}),(0,Ft.jsx)("span",{className:"status-badge",style:{backgroundColor:ee(T.overallStatus)},children:T.overallStatus})]}),(0,Ft.jsxs)("div",{className:"summary-item",children:[(0,Ft.jsx)("span",{children:"Total Due:"}),(0,Ft.jsxs)("span",{children:["LKR ",(null===(t=T.totalDue)||void 0===t?void 0:t.toFixed(2))||"0.00"]})]}),(0,Ft.jsxs)("div",{className:"summary-item",children:[(0,Ft.jsx)("span",{children:"Amount Paid:"}),(0,Ft.jsxs)("span",{children:["LKR ",(null===(n=T.totalPaid)||void 0===n?void 0:n.toFixed(2))||"0.00"]})]}),(0,Ft.jsxs)("div",{className:"summary-item",children:[(0,Ft.jsx)("span",{children:"Balance:"}),(0,Ft.jsxs)("span",{className:"balance-amount negative",children:["LKR ",(null===(r=T.balance)||void 0===r?void 0:r.toFixed(2))||"0.00"]})]}),(0,Ft.jsxs)("div",{className:"summary-item",children:[(0,Ft.jsx)("span",{children:"Days Overdue:"}),(0,Ft.jsxs)("span",{className:"overdue-days",children:[T.daysOverdue||0," days"]})]})]}),(0,Ft.jsxs)("div",{className:"restriction-reason",children:[(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Reason:"})," Fees overdue by more than 14 days"]}),(0,Ft.jsx)("p",{children:"Please settle the outstanding balance to enable attendance."})]})]}),(0,Ft.jsx)("div",{className:"blocked-actions",children:(0,Ft.jsx)("button",{onClick:J,className:"ok-btn",children:"OK"})})]})}),j&&T&&(0,Ft.jsx)("div",{className:"fee-warning-overlay",children:(0,Ft.jsxs)("div",{className:"fee-warning-modal",children:[(0,Ft.jsxs)("div",{className:"warning-header",children:[(0,Ft.jsx)("div",{className:"warning-icon",children:"\u26a0\ufe0f"}),(0,Ft.jsx)("h3",{children:"Fee Payment Notice"})]}),(0,Ft.jsxs)("div",{className:"fee-warning-details",children:[(0,Ft.jsxs)("div",{className:"student-info",children:[(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Student ID:"})," ",T.studentId]}),(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Name:"})," ",T.studentName]}),(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Class:"})," ",T.className]})]}),(0,Ft.jsxs)("div",{className:"fee-status-info",children:[(0,Ft.jsxs)("div",{className:"status-row",children:[(0,Ft.jsx)("span",{children:"Payment Status:"}),(0,Ft.jsxs)("span",{className:"payment-status ".concat(T.overallStatus.toLowerCase()),children:[T.overallStatus,T.gracePeriodActive&&(0,Ft.jsx)("span",{className:"grace-period-tag",children:" (Grace Period)"})]})]}),T.gracePeriodActive?(0,Ft.jsxs)("div",{className:"grace-period-info",children:[(0,Ft.jsxs)("p",{children:["\u2705 Grace period active (ends in ",T.gracePeriodEnds," days)"]}),(0,Ft.jsxs)("p",{children:["Next due date: ",T.nextDueDate?new Date(T.nextDueDate).toLocaleDateString():"N/A"]})]}):T.daysOverdue?(0,Ft.jsxs)("div",{className:"overdue-info",children:[(0,Ft.jsxs)("p",{children:["\u26a0\ufe0f Fees overdue by ",T.daysOverdue," days"]}),(0,Ft.jsxs)("p",{children:["Balance: ",(0,Ft.jsxs)("span",{className:"overdue-amount",children:["LKR ",null===(a=T.balance)||void 0===a?void 0:a.toFixed(2)]})]})]}):null,(0,Ft.jsxs)("div",{className:"payment-summary",children:[(0,Ft.jsxs)("div",{className:"summary-row",children:[(0,Ft.jsx)("span",{children:"Total Due:"}),(0,Ft.jsxs)("span",{children:["LKR ",(null===(s=T.totalDue)||void 0===s?void 0:s.toFixed(2))||"0.00"]})]}),(0,Ft.jsxs)("div",{className:"summary-row",children:[(0,Ft.jsx)("span",{children:"Amount Paid:"}),(0,Ft.jsxs)("span",{children:["LKR ",(null===(i=T.totalPaid)||void 0===i?void 0:i.toFixed(2))||"0.00"]})]}),(0,Ft.jsxs)("div",{className:"summary-row",children:[(0,Ft.jsx)("span",{children:"Balance:"}),(0,Ft.jsxs)("span",{className:"balance ".concat(T.balance>0?"negative":"positive"),children:["LKR ",(null===(o=T.balance)||void 0===o?void 0:o.toFixed(2))||"0.00"]})]})]})]})]}),(0,Ft.jsxs)("div",{className:"warning-actions",children:[(0,Ft.jsx)("button",{onClick:async()=>{y(!0);try{const e=JSON.parse(sessionStorage.getItem("pendingStudentData"));e&&(await K(e.studentData,e.classId),R(!1))}catch(e){console.error("\u274c Error proceeding with attendance:",e),g(e.message||"Failed to record attendance")}finally{y(!1),sessionStorage.removeItem("pendingStudentData")}},className:"proceed-btn",disabled:p,children:p?"Processing...":"Allow Attendance"}),(0,Ft.jsx)("button",{onClick:J,className:"cancel-btn",disabled:p,children:"Cancel"})]}),(0,Ft.jsx)("p",{className:"warning-note",children:(0,Ft.jsx)("small",{children:T.gracePeriodActive?"Student is within grace period. Attendance can be recorded.":"Attendance allowed at teacher discretion. Please follow up on payment."})})]})}),h&&(0,Ft.jsxs)("div",{className:"attendance-success",children:[(0,Ft.jsxs)("div",{className:"success-header",children:[(0,Ft.jsx)("div",{className:"success-icon",children:"\u2705"}),(0,Ft.jsx)("h3",{children:"Attendance Recorded"}),h.wasAutoDetermined&&(0,Ft.jsx)("span",{className:"auto-status-tag",children:"Auto-Determined Status"})]}),(0,Ft.jsxs)("div",{className:"attendance-details",children:[(0,Ft.jsxs)("div",{className:"detail-row",children:[(0,Ft.jsx)("span",{children:"Student ID:"}),(0,Ft.jsx)("span",{children:h.studentId})]}),(0,Ft.jsxs)("div",{className:"detail-row",children:[(0,Ft.jsx)("span",{children:"Name:"}),(0,Ft.jsx)("span",{children:h.studentName})]}),(0,Ft.jsxs)("div",{className:"detail-row",children:[(0,Ft.jsx)("span",{children:"Class:"}),(0,Ft.jsx)("span",{children:h.className})]}),(0,Ft.jsxs)("div",{className:"detail-row",children:[(0,Ft.jsx)("span",{children:"Start Time:"}),(0,Ft.jsx)("span",{children:h.scheduleTime})]}),(0,Ft.jsxs)("div",{className:"detail-row",children:[(0,Ft.jsx)("span",{children:"Scan Time:"}),(0,Ft.jsx)("span",{children:new Date(h.scanTime).toLocaleString()})]}),(0,Ft.jsxs)("div",{className:"detail-row status-row",children:[(0,Ft.jsx)("span",{children:"Status:"}),(0,Ft.jsx)("span",{className:"status-badge ".concat(h.status.toLowerCase()),style:{backgroundColor:ee(h.status)},children:h.status})]}),h.timeDescription&&(0,Ft.jsx)("div",{className:"time-explanation",children:(0,Ft.jsx)("p",{children:(0,Ft.jsx)("small",{children:h.timeDescription})})}),T&&(0,Ft.jsxs)("div",{className:"fee-summary-mini",children:[(0,Ft.jsxs)("div",{className:"fee-row",children:[(0,Ft.jsx)("span",{children:"Fee Status:"}),(0,Ft.jsxs)("span",{className:"fee-status-indicator ".concat(null===(c=T.overallStatus)||void 0===c?void 0:c.toLowerCase()),children:[T.overallStatus,T.gracePeriodActive&&" (Grace Period)"]})]}),T.balance>0&&(0,Ft.jsxs)("div",{className:"fee-row",children:[(0,Ft.jsx)("span",{children:"Balance:"}),(0,Ft.jsxs)("span",{className:"balance-remaining",children:["LKR ",T.balance.toFixed(2)]})]})]})]}),(0,Ft.jsx)("button",{onClick:async()=>{await J(),setTimeout(()=>q(),200)},className:"scan-again-btn",children:"Scan Next Student"})]}),m&&!j&&!D&&(0,Ft.jsxs)("div",{className:"attendance-error",children:[(0,Ft.jsx)("div",{className:"error-icon",children:"\u274c"}),(0,Ft.jsx)("h3",{children:"Error"}),(0,Ft.jsx)("p",{children:m}),(0,Ft.jsxs)("div",{className:"error-actions",children:[(0,Ft.jsx)("button",{onClick:J,className:"scan-again-btn",children:"Try Again"}),(0,Ft.jsx)("button",{onClick:z,className:"reload-btn",children:"Reload Classes"})]})]}),(0,Ft.jsxs)("div",{className:"scanner-instructions",children:[(0,Ft.jsx)("h4",{children:"How It Works:"}),(0,Ft.jsxs)("div",{className:"rules-grid",children:[(0,Ft.jsxs)("div",{className:"rule-card",children:[(0,Ft.jsx)("h5",{children:"Schedule-Based Attendance"}),(0,Ft.jsxs)("ul",{children:[(0,Ft.jsx)("li",{children:"System automatically uses schedules from Schedule Manager"}),(0,Ft.jsx)("li",{children:"Only today's schedules are shown"}),(0,Ft.jsx)("li",{children:"Status is determined based on schedule start time"}),(0,Ft.jsxs)("li",{children:[(0,Ft.jsx)("strong",{children:"Present:"})," Within 15 minutes of start"]}),(0,Ft.jsxs)("li",{children:[(0,Ft.jsx)("strong",{children:"Late:"})," 15-30 minutes after start"]}),(0,Ft.jsxs)("li",{children:[(0,Ft.jsx)("strong",{children:"Absent:"})," More than 30 minutes late"]})]})]}),(0,Ft.jsxs)("div",{className:"rule-card",children:[(0,Ft.jsx)("h5",{children:"Usage Instructions"}),(0,Ft.jsxs)("ol",{children:[(0,Ft.jsx)("li",{children:"Select a class from dropdown"}),(0,Ft.jsx)("li",{children:"System loads today's schedules automatically"}),(0,Ft.jsx)("li",{children:"Select a specific period (optional)"}),(0,Ft.jsx)("li",{children:'Click "Start Scanner"'}),(0,Ft.jsx)("li",{children:"Scan student QR codes"}),(0,Ft.jsx)("li",{children:"System automatically records status based on schedule time"})]})]})]})]})]})},Or=()=>{const[t,n]=(0,e.useState)([]),[r,a]=(0,e.useState)(!1),[s,i]=(0,e.useState)(!1),[o,c]=(0,e.useState)(null),[u,d]=(0,e.useState)(null),[h,f]=(0,e.useState)(!1),[m,g]=(0,e.useState)(null),[p,y]=(0,e.useState)({className:"",grade:"O/L",stream:"",classTeacher:"",roomNumber:"",active:!0}),[v,w]=(0,e.useState)({monthlyFee:"",admissionFee:"",examFee:"",sportsFee:"",libraryFee:"",labFee:"",otherFee:"",description:""});(0,e.useEffect)(()=>{S()},[]);const S=async()=>{try{f(!0),g(null);const e=await Rt.getAll();console.log("Loaded classes:",e);const t=await Promise.all(e.map(async e=>{try{const t=await Dt.getByClass(e.id);return console.log("Class ".concat(e.className," (ID: ").concat(e.id,") fees:"),t),l(l({},e),{},{fees:t})}catch(m){return console.log("Error loading fees for class ".concat(e.className,":"),m.message),l(l({},e),{},{fees:null})}}));console.log("Final classes with fees:",t),n(t)}catch(m){console.error("Error loading classes:",m),g("Failed to load classes")}finally{f(!1)}},N=()=>{a(!1),c(null),y({className:"",grade:"O/L",stream:"",classTeacher:"",roomNumber:"",active:!0}),g(null)},C=()=>{i(!1),d(null),w({monthlyFee:"",admissionFee:"",examFee:"",sportsFee:"",libraryFee:"",labFee:"",otherFee:"",description:""})},b=e=>new Intl.NumberFormat("en-LK",{style:"currency",currency:"LKR"}).format(e||0);return(0,Ft.jsxs)("div",{className:"class-manager",children:[(0,Ft.jsxs)("div",{className:"class-header",children:[(0,Ft.jsxs)("div",{className:"header-content",children:[(0,Ft.jsx)("h1",{children:"Class Management"}),(0,Ft.jsx)("p",{children:"Create and manage classes with fee structures"})]}),(0,Ft.jsx)("button",{onClick:()=>a(!0),className:"btn-primary",children:"+ Add New Class"})]}),m&&(0,Ft.jsxs)("div",{className:"error-message",children:[m,(0,Ft.jsx)("button",{onClick:()=>g(null),className:"close-error",children:"\xd7"})]}),r&&(0,Ft.jsx)("div",{className:"modal-overlay",children:(0,Ft.jsxs)("div",{className:"modal-content",children:[(0,Ft.jsxs)("div",{className:"modal-header",children:[(0,Ft.jsx)("h2",{children:o?"Edit Class":"Create New Class"}),(0,Ft.jsx)("button",{onClick:N,className:"close-btn",children:"\xd7"})]}),(0,Ft.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{g(null),o?await Rt.update(o.id,p):await Rt.create(p),a(!1),c(null),y({className:"",grade:"O/L",stream:"",classTeacher:"",roomNumber:"",active:!0}),S()}catch(m){console.error("Error saving class:",m),g(m.message||"Failed to save class")}},className:"class-form",children:[(0,Ft.jsxs)("div",{className:"form-grid",children:[(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"className",children:"Class Name *"}),(0,Ft.jsx)("input",{type:"text",id:"className",value:p.className,onChange:e=>y(l(l({},p),{},{className:e.target.value})),placeholder:"e.g., Grade 10-A, A/L Science",required:!0})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"grade",children:"Grade *"}),(0,Ft.jsxs)("select",{id:"grade",value:p.grade,onChange:e=>y(l(l({},p),{},{grade:e.target.value})),children:[(0,Ft.jsx)("option",{value:"O/L",children:"Ordinary Level (O/L)"}),(0,Ft.jsx)("option",{value:"A/L",children:"Advanced Level (A/L)"})]})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"stream",children:"Stream"}),(0,Ft.jsxs)("select",{id:"stream",value:p.stream,onChange:e=>y(l(l({},p),{},{stream:e.target.value})),children:[(0,Ft.jsx)("option",{value:"",children:"Select Stream"}),(0,Ft.jsx)("option",{value:"Science",children:"Science"}),(0,Ft.jsx)("option",{value:"Commerce",children:"Commerce"}),(0,Ft.jsx)("option",{value:"Arts",children:"Arts"})]})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"classTeacher",children:"Class Teacher"}),(0,Ft.jsx)("input",{type:"text",id:"classTeacher",value:p.classTeacher,onChange:e=>y(l(l({},p),{},{classTeacher:e.target.value})),placeholder:"Teacher's full name"})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"roomNumber",children:"Room Number"}),(0,Ft.jsx)("input",{type:"text",id:"roomNumber",value:p.roomNumber,onChange:e=>y(l(l({},p),{},{roomNumber:e.target.value})),placeholder:"e.g., Room 101, Lab 2"})]}),(0,Ft.jsx)("div",{className:"form-group full-width",children:(0,Ft.jsxs)("label",{className:"checkbox-label",children:[(0,Ft.jsx)("input",{type:"checkbox",checked:p.active,onChange:e=>y(l(l({},p),{},{active:e.target.checked}))}),(0,Ft.jsx)("span",{className:"checkmark"}),"Active Class (Can accept new students)"]})})]}),(0,Ft.jsxs)("div",{className:"form-actions",children:[(0,Ft.jsx)("button",{type:"button",onClick:N,className:"btn-secondary",children:"Cancel"}),(0,Ft.jsx)("button",{type:"submit",className:"btn-primary",children:o?"Update Class":"Create Class"})]})]})]})}),s&&u&&(0,Ft.jsx)("div",{className:"modal-overlay",children:(0,Ft.jsxs)("div",{className:"modal-content fee-modal",children:[(0,Ft.jsxs)("div",{className:"modal-header",children:[(0,Ft.jsxs)("h2",{children:["Manage Fees - ",u.className]}),(0,Ft.jsx)("button",{onClick:C,className:"close-btn",children:"\xd7"})]}),(0,Ft.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{g(null);const e={schoolClass:{id:u.id},monthlyFee:parseFloat(v.monthlyFee)||0,admissionFee:parseFloat(v.admissionFee)||0,examFee:parseFloat(v.examFee)||0,sportsFee:parseFloat(v.sportsFee)||0,libraryFee:parseFloat(v.libraryFee)||0,labFee:parseFloat(v.labFee)||0,otherFee:parseFloat(v.otherFee)||0,description:v.description};u.fees?await Dt.update(u.fees.id,e):await Dt.create(e),i(!1),S()}catch(m){console.error("Error saving fees:",m),g(m.message||"Failed to save fees")}},className:"fee-form",children:[(0,Ft.jsxs)("div",{className:"fee-form-grid",children:[(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"monthlyFee",children:"Monthly Fee"}),(0,Ft.jsx)("input",{type:"number",id:"monthlyFee",value:v.monthlyFee,onChange:e=>w(l(l({},v),{},{monthlyFee:e.target.value})),placeholder:"0.00",step:"0.01",min:"0"})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"admissionFee",children:"Admission Fee"}),(0,Ft.jsx)("input",{type:"number",id:"admissionFee",value:v.admissionFee,onChange:e=>w(l(l({},v),{},{admissionFee:e.target.value})),placeholder:"0.00",step:"0.01",min:"0"})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"examFee",children:"Exam Fee"}),(0,Ft.jsx)("input",{type:"number",id:"examFee",value:v.examFee,onChange:e=>w(l(l({},v),{},{examFee:e.target.value})),placeholder:"0.00",step:"0.01",min:"0"})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"sportsFee",children:"Sports Fee"}),(0,Ft.jsx)("input",{type:"number",id:"sportsFee",value:v.sportsFee,onChange:e=>w(l(l({},v),{},{sportsFee:e.target.value})),placeholder:"0.00",step:"0.01",min:"0"})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"libraryFee",children:"Library Fee"}),(0,Ft.jsx)("input",{type:"number",id:"libraryFee",value:v.libraryFee,onChange:e=>w(l(l({},v),{},{libraryFee:e.target.value})),placeholder:"0.00",step:"0.01",min:"0"})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"labFee",children:"Lab Fee"}),(0,Ft.jsx)("input",{type:"number",id:"labFee",value:v.labFee,onChange:e=>w(l(l({},v),{},{labFee:e.target.value})),placeholder:"0.00",step:"0.01",min:"0"})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"otherFee",children:"Other Fees"}),(0,Ft.jsx)("input",{type:"number",id:"otherFee",value:v.otherFee,onChange:e=>w(l(l({},v),{},{otherFee:e.target.value})),placeholder:"0.00",step:"0.01",min:"0"})]}),(0,Ft.jsxs)("div",{className:"form-group full-width",children:[(0,Ft.jsx)("label",{htmlFor:"description",children:"Fee Description"}),(0,Ft.jsx)("textarea",{id:"description",value:v.description,onChange:e=>w(l(l({},v),{},{description:e.target.value})),placeholder:"Additional information about fees...",rows:"3"})]}),(0,Ft.jsxs)("div",{className:"total-fee-display",children:[(0,Ft.jsx)("div",{className:"total-fee-label",children:"Total Fee:"}),(0,Ft.jsx)("div",{className:"total-fee-amount",children:b((parseFloat(v.monthlyFee)||0)+(parseFloat(v.admissionFee)||0)+(parseFloat(v.examFee)||0)+(parseFloat(v.sportsFee)||0)+(parseFloat(v.libraryFee)||0)+(parseFloat(v.labFee)||0)+(parseFloat(v.otherFee)||0))})]})]}),(0,Ft.jsxs)("div",{className:"form-actions",children:[(0,Ft.jsx)("button",{type:"button",onClick:C,className:"btn-secondary",children:"Cancel"}),(0,Ft.jsx)("button",{type:"submit",className:"btn-primary",children:u.fees?"Update Fees":"Save Fees"})]})]})]})}),(0,Ft.jsx)("div",{className:"classes-container",children:h?(0,Ft.jsxs)("div",{className:"loading-state",children:[(0,Ft.jsx)("div",{className:"spinner"}),(0,Ft.jsx)("p",{children:"Loading classes..."})]}):(0,Ft.jsxs)(Ft.Fragment,{children:[(0,Ft.jsxs)("div",{className:"classes-stats",children:[(0,Ft.jsxs)("div",{className:"stat-card",children:[(0,Ft.jsx)("span",{className:"stat-number",children:t.length}),(0,Ft.jsx)("span",{className:"stat-label",children:"Total Classes"})]}),(0,Ft.jsxs)("div",{className:"stat-card",children:[(0,Ft.jsx)("span",{className:"stat-number",children:t.filter(e=>e.active).length}),(0,Ft.jsx)("span",{className:"stat-label",children:"Active Classes"})]}),(0,Ft.jsxs)("div",{className:"stat-card",children:[(0,Ft.jsx)("span",{className:"stat-number",children:t.filter(e=>e.fees).length}),(0,Ft.jsx)("span",{className:"stat-label",children:"Classes with Fees"})]}),(0,Ft.jsxs)("div",{className:"stat-card",children:[(0,Ft.jsx)("span",{className:"stat-number",children:b(t.reduce((e,t)=>{var n;return e+((null===(n=t.fees)||void 0===n?void 0:n.totalFee)||0)},0))}),(0,Ft.jsx)("span",{className:"stat-label",children:"Total Monthly Revenue"})]})]}),(0,Ft.jsx)("div",{className:"classes-grid",children:t.map(e=>(0,Ft.jsxs)("div",{className:"class-card",children:[(0,Ft.jsxs)("div",{className:"class-card-header",children:[(0,Ft.jsxs)("div",{className:"class-title",children:[(0,Ft.jsx)("h3",{children:e.className}),(0,Ft.jsx)("span",{className:"status-badge ".concat(e.active?"active":"inactive"),children:e.active?"Active":"Inactive"})]}),(0,Ft.jsx)("span",{className:"grade-badge",children:e.grade})]}),(0,Ft.jsxs)("div",{className:"class-details",children:[(0,Ft.jsxs)("div",{className:"detail-item",children:[(0,Ft.jsx)("span",{className:"label",children:"Stream:"}),(0,Ft.jsx)("span",{className:"value",children:e.stream||"Not Specified"})]}),(0,Ft.jsxs)("div",{className:"detail-item",children:[(0,Ft.jsx)("span",{className:"label",children:"Teacher:"}),(0,Ft.jsx)("span",{className:"value",children:e.classTeacher||"Not Assigned"})]}),(0,Ft.jsxs)("div",{className:"detail-item",children:[(0,Ft.jsx)("span",{className:"label",children:"Room:"}),(0,Ft.jsx)("span",{className:"value",children:e.roomNumber||"Not Assigned"})]}),(0,Ft.jsxs)("div",{className:"detail-item",children:[(0,Ft.jsx)("span",{className:"label",children:"Students:"}),(0,Ft.jsxs)("span",{className:"value",children:[e.studentCount||0," enrolled"]})]})]}),(0,Ft.jsxs)("div",{className:"fee-summary",children:[(0,Ft.jsxs)("div",{className:"fee-header",children:[(0,Ft.jsx)("h4",{children:"Fee Structure"}),e.fees?(0,Ft.jsx)("span",{className:"fee-status configured",children:"Configured"}):(0,Ft.jsx)("span",{className:"fee-status not-configured",children:"Not Set"})]}),e.fees&&(0,Ft.jsxs)("div",{className:"fee-breakdown",children:[(0,Ft.jsxs)("div",{className:"fee-item",children:[(0,Ft.jsx)("span",{children:"Monthly:"}),(0,Ft.jsx)("span",{children:b(e.fees.monthlyFee)})]}),(0,Ft.jsxs)("div",{className:"fee-total",children:[(0,Ft.jsx)("span",{children:"Total Monthly:"}),(0,Ft.jsx)("span",{className:"total-amount",children:b(e.fees.totalFee)})]})]})]}),(0,Ft.jsxs)("div",{className:"class-actions",children:[(0,Ft.jsx)("button",{onClick:()=>(e=>{c(e),y({className:e.className,grade:e.grade,stream:e.stream||"",classTeacher:e.classTeacher||"",roomNumber:e.roomNumber||"",active:e.active}),a(!0)})(e),className:"btn-edit",children:"Edit Class"}),(0,Ft.jsx)("button",{onClick:()=>(e=>{d(e),e.fees?w({monthlyFee:e.fees.monthlyFee||"",admissionFee:e.fees.admissionFee||"",examFee:e.fees.examFee||"",sportsFee:e.fees.sportsFee||"",libraryFee:e.fees.libraryFee||"",labFee:e.fees.labFee||"",otherFee:e.fees.otherFee||"",description:e.fees.description||""}):w({monthlyFee:"",admissionFee:"",examFee:"",sportsFee:"",libraryFee:"",labFee:"",otherFee:"",description:""}),i(!0)})(e),className:e.fees?"btn-warning":"btn-success",children:e.fees?"Manage Fees":"Set Fees"}),(0,Ft.jsx)("button",{onClick:()=>(async(e,t)=>{try{t?await Rt.deactivate(e):await Rt.update(e,{active:!0}),S()}catch(m){console.error("Error updating class status:",m),g("Failed to update class status")}})(e.id,e.active),className:e.active?"btn-warning":"btn-success",children:e.active?"Deactivate":"Activate"}),(0,Ft.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this class? This action cannot be undone."))try{await Rt.delete(e),S()}catch(m){console.error("Error deleting class:",m),g("Failed to delete class")}})(e.id),className:"btn-danger",children:"Delete"})]})]},e.id))}),0===t.length&&!h&&(0,Ft.jsxs)("div",{className:"empty-state",children:[(0,Ft.jsx)("div",{className:"empty-icon",children:"\ud83c\udfeb"}),(0,Ft.jsx)("h3",{children:"No Classes Found"}),(0,Ft.jsx)("p",{children:"Create your first class to start organizing students."}),(0,Ft.jsx)("button",{onClick:()=>a(!0),className:"btn-primary",children:"Create First Class"})]})]})})]})},kr=()=>{var t,n;const[r,a]=(0,e.useState)([]),[s,i]=(0,e.useState)([]),[o,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)(null),[h,f]=(0,e.useState)(""),[m,g]=(0,e.useState)(!1),[p,y]=(0,e.useState)(null),[v,w]=(0,e.useState)({schoolClass:{id:""},dayOfWeek:"MONDAY",startTime:"08:00",endTime:"09:00",subject:""}),S=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],N=["07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00"];(0,e.useEffect)(()=>{C(),b()},[]);const C=async()=>{try{const e=await Rt.getAllActive();i(e),e.length>0&&(f(e[0].id),w(t=>l(l({},t),{},{schoolClass:{id:e[0].id}})))}catch(p){console.error("Error loading classes:",p),y("Failed to load classes")}},b=async()=>{try{g(!0);const e=[];for(const t of s)try{const n=(await kt.getByClass(t.id)).map(e=>l(l({},e),{},{className:t.className,grade:t.grade,stream:t.stream,roomNumber:t.roomNumber,classTeacher:t.classTeacher}));e.push(...n)}catch(p){console.error("Error loading schedules for class ".concat(t.className,":"),p)}a(e)}catch(p){console.error("Error loading schedules:",p),y("Failed to load schedules")}finally{g(!1)}},E=async e=>{try{g(!0);const t=await kt.getByClass(e),n=s.find(t=>t.id==e),r=t.map(e=>l(l({},e),{},{className:null===n||void 0===n?void 0:n.className,grade:null===n||void 0===n?void 0:n.grade,stream:null===n||void 0===n?void 0:n.stream,roomNumber:null===n||void 0===n?void 0:n.roomNumber,classTeacher:null===n||void 0===n?void 0:n.classTeacher}));a(r)}catch(p){console.error("Error loading schedules:",p),y("Failed to load schedules")}finally{g(!1)}};(0,e.useEffect)(()=>{h?E(h):b()},[h]);const A=()=>{c(!1),d(null),w({schoolClass:{id:h||""},dayOfWeek:"MONDAY",startTime:"08:00",endTime:"09:00",subject:""}),y(null)},x=e=>e.replace(":00","").replace(":30",":30"),I=e=>{let t=e.className;return e.grade&&(t+=" (".concat(e.grade,")")),e.stream&&(t+=" - ".concat(e.stream)),t};return(0,Ft.jsxs)("div",{className:"schedule-manager",children:[(0,Ft.jsxs)("div",{className:"schedule-header",children:[(0,Ft.jsxs)("div",{className:"header-content",children:[(0,Ft.jsx)("h1",{children:"Class Schedule Management"}),(0,Ft.jsx)("p",{children:"Manage timetables and class schedules for all classes"})]}),(0,Ft.jsx)("button",{onClick:()=>c(!0),className:"btn-primary",children:"+ Add Schedule"})]}),p&&(0,Ft.jsxs)("div",{className:"error-message",children:[p,(0,Ft.jsx)("button",{onClick:()=>y(null),className:"close-error",children:"\xd7"})]}),(0,Ft.jsxs)("div",{className:"view-controls",children:[(0,Ft.jsxs)("div",{className:"view-toggle",children:[(0,Ft.jsx)("button",{className:h?"":"active",onClick:()=>f(""),children:"\ud83d\udccb All Classes"}),(0,Ft.jsx)("button",{className:h?"active":"",onClick:()=>{var e;return f((null===(e=s[0])||void 0===e?void 0:e.id)||"")},children:"\ud83c\udfeb Single Class"})]}),h&&(0,Ft.jsxs)("div",{className:"class-selection",children:[(0,Ft.jsx)("label",{htmlFor:"classSelect",children:"Select Class:"}),(0,Ft.jsxs)("select",{id:"classSelect",value:h,onChange:e=>f(e.target.value),children:[(0,Ft.jsx)("option",{value:"",children:"Choose a class..."}),s.map(e=>(0,Ft.jsxs)("option",{value:e.id,children:[e.className," - ",e.grade," ",e.stream?"(".concat(e.stream,")"):""]},e.id))]})]})]}),o&&(0,Ft.jsx)("div",{className:"modal-overlay",children:(0,Ft.jsxs)("div",{className:"modal-content",children:[(0,Ft.jsxs)("div",{className:"modal-header",children:[(0,Ft.jsx)("h2",{children:u?"Edit Schedule":"Add New Schedule"}),(0,Ft.jsx)("button",{onClick:A,className:"close-btn",children:"\xd7"})]}),(0,Ft.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{if(y(null),v.startTime>=v.endTime)return void y("End time must be after start time");if(!v.schoolClass.id)return void y("Please select a class");const e={schoolClass:{id:v.schoolClass.id},dayOfWeek:v.dayOfWeek,startTime:v.startTime,endTime:v.endTime,subject:v.subject};console.log("Sending schedule data:",e),u?await kt.update(u.id,e):await kt.create(e),A(),h?E(h):b()}catch(p){console.error("Error saving schedule:",p),y(p.message||"Failed to save schedule")}},className:"schedule-form",children:[(0,Ft.jsxs)("div",{className:"form-grid",children:[(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"classId",children:"Class *"}),(0,Ft.jsxs)("select",{id:"classId",value:v.schoolClass.id,onChange:e=>w(l(l({},v),{},{schoolClass:{id:e.target.value}})),required:!0,children:[(0,Ft.jsx)("option",{value:"",children:"Select Class"}),s.map(e=>(0,Ft.jsxs)("option",{value:e.id,children:[e.className," - ",e.grade," ",e.stream?"(".concat(e.stream,")"):""]},e.id))]})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"dayOfWeek",children:"Day of Week *"}),(0,Ft.jsx)("select",{id:"dayOfWeek",value:v.dayOfWeek,onChange:e=>w(l(l({},v),{},{dayOfWeek:e.target.value})),required:!0,children:S.map(e=>(0,Ft.jsx)("option",{value:e,children:e},e))})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"startTime",children:"Start Time *"}),(0,Ft.jsx)("select",{id:"startTime",value:v.startTime,onChange:e=>w(l(l({},v),{},{startTime:e.target.value})),required:!0,children:N.map(e=>(0,Ft.jsx)("option",{value:e,children:x(e)},e))})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"endTime",children:"End Time *"}),(0,Ft.jsx)("select",{id:"endTime",value:v.endTime,onChange:e=>w(l(l({},v),{},{endTime:e.target.value})),required:!0,children:N.map(e=>(0,Ft.jsx)("option",{value:e,children:x(e)},e))})]}),(0,Ft.jsxs)("div",{className:"form-group full-width",children:[(0,Ft.jsx)("label",{htmlFor:"subject",children:"Subject *"}),(0,Ft.jsx)("input",{type:"text",id:"subject",value:v.subject,onChange:e=>w(l(l({},v),{},{subject:e.target.value})),placeholder:"e.g., Mathematics, Science, English",required:!0})]})]}),(0,Ft.jsxs)("div",{className:"form-actions",children:[(0,Ft.jsx)("button",{type:"button",onClick:A,className:"btn-secondary",children:"Cancel"}),(0,Ft.jsx)("button",{type:"submit",className:"btn-primary",children:u?"Update Schedule":"Create Schedule"})]})]})]})}),(0,Ft.jsx)("div",{className:"schedule-container",children:m?(0,Ft.jsxs)("div",{className:"loading-state",children:[(0,Ft.jsx)("div",{className:"spinner"}),(0,Ft.jsx)("p",{children:"Loading schedules..."})]}):(0,Ft.jsxs)(Ft.Fragment,{children:[(0,Ft.jsxs)("div",{className:"schedule-header-info",children:[(0,Ft.jsx)("h2",{children:h?"Schedule for ".concat(null===(t=s.find(e=>e.id==h))||void 0===t?void 0:t.className):"All Class Schedules"}),(0,Ft.jsxs)("span",{className:"schedule-count",children:[r.length," period(s) total"]})]}),(0,Ft.jsx)("div",{className:"weekly-schedule-table",children:S.map(e=>{const t=(e=>r.filter(t=>t.dayOfWeek===e).sort((e,t)=>e.startTime.localeCompare(t.startTime)))(e);return(0,Ft.jsxs)("div",{className:"day-section",children:[(0,Ft.jsxs)("div",{className:"day-header",children:[(0,Ft.jsx)("h3",{children:e}),(0,Ft.jsxs)("span",{className:"period-count",children:[t.length," periods"]})]}),t.length>0?(0,Ft.jsx)("div",{className:"schedules-table",children:(0,Ft.jsxs)("table",{children:[(0,Ft.jsx)("thead",{children:(0,Ft.jsxs)("tr",{children:[(0,Ft.jsx)("th",{children:"Time"}),(0,Ft.jsx)("th",{children:"Class"}),(0,Ft.jsx)("th",{children:"Room"}),(0,Ft.jsx)("th",{children:"Subject"}),(0,Ft.jsx)("th",{children:"Class Teacher"}),(0,Ft.jsx)("th",{children:"Actions"})]})}),(0,Ft.jsx)("tbody",{children:t.map(e=>(0,Ft.jsxs)("tr",{children:[(0,Ft.jsxs)("td",{className:"time-cell",children:[x(e.startTime)," - ",x(e.endTime)]}),(0,Ft.jsx)("td",{className:"class-cell",children:(0,Ft.jsxs)("div",{className:"class-info",children:[(0,Ft.jsx)("strong",{children:I(e)}),(0,Ft.jsx)("span",{className:"grade",children:e.grade})]})}),(0,Ft.jsx)("td",{className:"room-cell",children:e.roomNumber||"N/A"}),(0,Ft.jsx)("td",{className:"subject-cell",children:e.subject}),(0,Ft.jsx)("td",{className:"teacher-cell",children:e.classTeacher||"N/A"}),(0,Ft.jsxs)("td",{className:"actions-cell",children:[(0,Ft.jsx)("button",{onClick:()=>(e=>{d(e),w({schoolClass:{id:e.schoolClass.id},dayOfWeek:e.dayOfWeek,startTime:e.startTime,endTime:e.endTime,subject:e.subject}),c(!0)})(e),className:"btn-edit-small",children:"Edit"}),(0,Ft.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this schedule?"))try{await kt.delete(e),h?E(h):b()}catch(p){console.error("Error deleting schedule:",p),y("Failed to delete schedule")}})(e.id),className:"btn-danger-small",children:"Delete"})]})]},e.id))})]})}):(0,Ft.jsxs)("div",{className:"no-periods",children:["No classes scheduled for ",e]})]},e)})}),0===r.length&&(0,Ft.jsxs)("div",{className:"empty-state",children:[(0,Ft.jsx)("div",{className:"empty-icon",children:"\ud83d\udcc5"}),(0,Ft.jsx)("h3",{children:"No Schedules Found"}),(0,Ft.jsx)("p",{children:h?"No schedules have been created for ".concat(null===(n=s.find(e=>e.id==h))||void 0===n?void 0:n.className," yet."):"No schedules have been created for any class yet."}),(0,Ft.jsx)("button",{onClick:()=>c(!0),className:"btn-primary",children:"Add First Schedule"})]})]})})]})},Pr=()=>{const[t,n]=(0,e.useState)(null),[r,a]=(0,e.useState)(null),[s,i]=(0,e.useState)(null),[o,c]=(0,e.useState)({amount:"",paymentMethod:"CASH",month:(new Date).toISOString().substring(0,7),notes:""}),[u,d]=(0,e.useState)(!1),[h,f]=(0,e.useState)(!1),[m,g]=(0,e.useState)(null),[p,y]=(0,e.useState)([]),[v,w]=(0,e.useState)(!1),[S,N]=(0,e.useState)(null),C=(0,e.useRef)(null),b="fee-qr-reader";(0,e.useEffect)(()=>()=>A(),[]);const E=async()=>{try{x(),await new Promise(e=>setTimeout(e,100));if(!document.getElementById(b))throw new Error("Scanner element not found");C.current||(C.current=new ur(b));const e=await ur.getCameras();if(0===e.length)throw new Error("No camera found");const t=e[0].id;f(!0),await C.current.start({deviceId:{exact:t}},{fps:10,qrbox:{width:250,height:250}},async e=>{console.log("\u2705 Scanned QR:",e),await A(),await I(e)},e=>{e&&!e.includes("NotFoundException")&&console.warn("\u26a0\ufe0f Scan error:",e)})}catch(e){console.error("\u274c Scanner start error:",e),g(e.message||"Failed to start scanner"),f(!1)}},A=async()=>{try{var e;C.current&&C.current.isScanning&&await C.current.stop(),await(null===(e=C.current)||void 0===e?void 0:e.clear())}catch(t){console.warn("\u26a0\ufe0f Error stopping scanner:",t)}finally{f(!1);const e=document.getElementById(b);e&&(e.innerHTML="")}},x=()=>{n(null),a(null),i(null),N(null),g(null),y([]),w(!1),c({amount:"",paymentMethod:"CASH",month:(new Date).toISOString().substring(0,7),notes:""})},I=async e=>{try{const r=JSON.parse(e);let a;console.log("\ud83d\udcca Processing student QR data:",r);try{a=await jt.getByStudentId(r.studentId),console.log("\u2705 Student found in database:",a)}catch(t){console.log("\u274c Student not found, using QR data"),a={studentId:r.studentId,firstName:r.firstName,lastName:r.lastName,grade:r.grade,email:r.email,id:r.studentId,status:"Active",_fromQR:!0}}let s=[];try{console.log("\ud83d\udd04 Fetching classes for grade: ".concat(a.grade));const e=await fetch("http://localhost:8080/api/classes/by-grade?grade=".concat(encodeURIComponent(a.grade)),{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors"});if(!e.ok)throw console.log("\u274c Query param failed: ".concat(e.status)),new Error("HTTP ".concat(e.status));s=(await e.json()).classes||[],console.log("\u2705 Query param successful: Found ".concat(s.length," classes"))}catch(m){console.error("\u274c Error loading classes:",m),s=T(a.grade),console.log("\ud83d\udd04 Using ".concat(s.length," fallback classes"))}0===s.length&&(s=T(a.grade)),y(s),1===s.length?await _(a,s[0]):(n(a),w(!0))}catch(m){console.error("\u274c Error processing QR:",m),g("Error: ".concat(m.message))}},T=e=>({"A/L":[{id:1,className:"".concat(e," Mathematics"),grade:e,classTeacher:"Math Teacher",roomNumber:"101"},{id:2,className:"".concat(e," Physics"),grade:e,classTeacher:"Physics Teacher",roomNumber:"102"},{id:3,className:"".concat(e," Chemistry"),grade:e,classTeacher:"Chemistry Teacher",roomNumber:"103"},{id:4,className:"".concat(e," Biology"),grade:e,classTeacher:"Biology Teacher",roomNumber:"104"}],"O/L":[{id:5,className:"".concat(e," Mathematics"),grade:e,classTeacher:"Math Teacher",roomNumber:"201"},{id:6,className:"".concat(e," Science"),grade:e,classTeacher:"Science Teacher",roomNumber:"202"},{id:7,className:"".concat(e," English"),grade:e,classTeacher:"English Teacher",roomNumber:"203"},{id:8,className:"".concat(e," Sinhala"),grade:e,classTeacher:"Sinhala Teacher",roomNumber:"204"}]}[e]||[{id:9,className:"".concat(e," General"),grade:e,classTeacher:"Class Teacher",roomNumber:"301"}]),_=async(e,t)=>{try{console.log("\ud83c\udfaf Selected class for payment: ".concat(t.className)),N(t),w(!1);let s,o=await Dt.getByClass(t.id);o||(console.log("\ud83d\udcdd Using fallback fee structure"),o=(e=>{const t={"O/L":{monthlyFee:3e3,admissionFee:2e3,examFee:1e3,sportsFee:500,libraryFee:300,labFee:700,otherFee:500,totalFee:8e3},"A/L":{monthlyFee:4e3,admissionFee:2500,examFee:1500,sportsFee:600,libraryFee:400,labFee:900,otherFee:600,totalFee:10500}};return t[e]||t["O/L"]})(e.grade),o._isFallback=!0);try{s=await Mt.getFeeStatusForClass(e.studentId,t.id)}catch(r){console.log("\u26a0\ufe0f Using fallback fee status"),s={studentId:e.studentId,studentName:"".concat(e.firstName," ").concat(e.lastName),className:t.className,totalDue:o.totalFee,totalPaid:0,balance:o.totalFee,overallStatus:"PENDING",classId:t.id}}n(e),a(s),i(o);const u=s.balance>0?s.balance:o.totalFee;c(e=>l(l({},e),{},{amount:u.toString()}))}catch(m){console.error("\u274c Error selecting class:",m),g("Failed to load class data: ".concat(m.message))}},j=e=>new Intl.NumberFormat("en-LK",{style:"currency",currency:"LKR"}).format(e||0);return(0,Ft.jsxs)("div",{className:"fee-scanner-container",children:[(0,Ft.jsxs)("div",{className:"scanner-header",children:[(0,Ft.jsx)("h2",{children:"Fee Payment Scanner"}),(0,Ft.jsx)("p",{children:"Scan student QR code and select which class to pay fees for"})]}),(0,Ft.jsxs)("div",{className:"scanner-section",children:[(0,Ft.jsx)("div",{id:b,className:"qr-scanner"}),(0,Ft.jsxs)("div",{className:"scanner-controls",children:[!h&&!t&&(0,Ft.jsx)("button",{onClick:E,className:"start-scan-btn",children:"Start Scanner"}),h&&(0,Ft.jsxs)(Ft.Fragment,{children:[(0,Ft.jsx)("p",{className:"scanner-status",children:"\ud83d\udfe2 Scanning... Point QR code at camera"}),(0,Ft.jsx)("button",{onClick:A,className:"stop-scan-btn",children:"Stop Scanner"})]})]})]}),m&&(0,Ft.jsxs)("div",{className:"error-message",children:[(0,Ft.jsx)("div",{className:"error-icon",children:"\u274c"}),(0,Ft.jsx)("p",{children:m}),(0,Ft.jsx)("button",{onClick:x,className:"retry-btn",children:"Try Again"})]}),v&&t&&(0,Ft.jsx)("div",{className:"class-selection-modal",children:(0,Ft.jsxs)("div",{className:"modal-content",children:[(0,Ft.jsxs)("div",{className:"modal-header",children:[(0,Ft.jsx)("h3",{children:"Select Class for Payment"}),(0,Ft.jsxs)("p",{children:[t.firstName," is eligible for multiple classes. Select which class to pay fees for."]})]}),(0,Ft.jsx)("div",{className:"class-selection-grid",children:p.map(e=>(0,Ft.jsxs)("div",{className:"class-option",onClick:()=>_(t,e),children:[(0,Ft.jsxs)("div",{className:"class-info",children:[(0,Ft.jsx)("h4",{children:e.className}),(0,Ft.jsxs)("p",{children:["Teacher: ",e.classTeacher]}),(0,Ft.jsxs)("p",{children:["Room: ",e.roomNumber]}),e.stream&&(0,Ft.jsxs)("p",{children:["Stream: ",e.stream]})]}),(0,Ft.jsx)("div",{className:"class-actions",children:(0,Ft.jsx)("button",{className:"select-class-btn",children:"Pay Fees for This Class"})})]},e.id))}),(0,Ft.jsx)("div",{className:"modal-actions",children:(0,Ft.jsx)("button",{onClick:x,className:"cancel-btn",children:"Cancel"})})]})}),t&&r&&s&&S&&(0,Ft.jsxs)("div",{className:"payment-interface",children:[(0,Ft.jsxs)("div",{className:"student-card",children:[(0,Ft.jsxs)("div",{className:"student-header",children:[(0,Ft.jsxs)("h3",{children:[t.firstName," ",t.lastName]}),(e=>{const t="PAID"===e?"paid":"PARTIAL"===e?"partial":"pending";return(0,Ft.jsx)("span",{className:"fee-status-badge ".concat(t),children:e})})(r.overallStatus)]}),(0,Ft.jsxs)("div",{className:"student-details",children:[(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Student ID:"})," ",t.studentId]}),(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Grade:"})," ",t.grade]}),(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strong",{children:"Payment Class:"})," ",S.className]}),p.length>1&&(0,Ft.jsx)("button",{onClick:()=>w(!0),className:"change-class-btn",children:"Change Class"})]})]}),(0,Ft.jsxs)("div",{className:"fee-structure-card",children:[(0,Ft.jsxs)("h4",{children:["Class Fee Structure - ",S.className]}),s._isFallback&&(0,Ft.jsx)("div",{className:"demo-mode-indicator",children:(0,Ft.jsxs)("small",{children:["\ud83d\udcf1 Using standard fee structure for ",t.grade]})}),(0,Ft.jsxs)("div",{className:"fee-breakdown-detailed",children:[(0,Ft.jsxs)("div",{className:"fee-item",children:[(0,Ft.jsx)("span",{children:"Monthly Fee:"}),(0,Ft.jsx)("span",{children:j(s.monthlyFee)})]}),(0,Ft.jsxs)("div",{className:"fee-item",children:[(0,Ft.jsx)("span",{children:"Admission Fee:"}),(0,Ft.jsx)("span",{children:j(s.admissionFee)})]}),(0,Ft.jsxs)("div",{className:"fee-item",children:[(0,Ft.jsx)("span",{children:"Exam Fee:"}),(0,Ft.jsx)("span",{children:j(s.examFee)})]}),(0,Ft.jsxs)("div",{className:"fee-item",children:[(0,Ft.jsx)("span",{children:"Sports Fee:"}),(0,Ft.jsx)("span",{children:j(s.sportsFee)})]}),(0,Ft.jsxs)("div",{className:"fee-item",children:[(0,Ft.jsx)("span",{children:"Library Fee:"}),(0,Ft.jsx)("span",{children:j(s.libraryFee)})]}),(0,Ft.jsxs)("div",{className:"fee-item",children:[(0,Ft.jsx)("span",{children:"Lab Fee:"}),(0,Ft.jsx)("span",{children:j(s.labFee)})]}),(0,Ft.jsxs)("div",{className:"fee-item",children:[(0,Ft.jsx)("span",{children:"Other Fees:"}),(0,Ft.jsx)("span",{children:j(s.otherFee)})]}),(0,Ft.jsxs)("div",{className:"fee-item total",children:[(0,Ft.jsx)("span",{children:(0,Ft.jsx)("strong",{children:"Total Monthly Fee:"})}),(0,Ft.jsx)("span",{children:(0,Ft.jsx)("strong",{children:j(s.totalFee)})})]})]})]}),(0,Ft.jsxs)("div",{className:"fee-status-card",children:[(0,Ft.jsxs)("h4",{children:["Current Payment Status - ",S.className]}),(0,Ft.jsxs)("div",{className:"fee-breakdown",children:[(0,Ft.jsxs)("div",{className:"fee-item",children:[(0,Ft.jsx)("span",{children:"Total Due:"}),(0,Ft.jsx)("span",{className:"amount",children:j(r.totalDue)})]}),(0,Ft.jsxs)("div",{className:"fee-item",children:[(0,Ft.jsx)("span",{children:"Total Paid:"}),(0,Ft.jsx)("span",{className:"amount paid",children:j(r.totalPaid)})]}),(0,Ft.jsxs)("div",{className:"fee-item total",children:[(0,Ft.jsx)("span",{children:"Remaining Balance:"}),(0,Ft.jsx)("span",{className:"amount ".concat(r.balance>0?"pending":"paid"),children:j(r.balance)})]})]})]}),(0,Ft.jsxs)("div",{className:"payment-form-card",children:[(0,Ft.jsxs)("h4",{children:["Record Payment for ",S.className]}),(0,Ft.jsxs)("div",{className:"payment-suggestions",children:[(0,Ft.jsxs)("button",{onClick:()=>c(l(l({},o),{},{amount:s.totalFee.toString()})),className:"suggestion-btn full-fee",children:["Pay Full Fee: ",j(s.totalFee)]}),(0,Ft.jsxs)("button",{onClick:()=>c(l(l({},o),{},{amount:s.monthlyFee.toString()})),className:"suggestion-btn monthly",children:["Monthly Only: ",j(s.monthlyFee)]}),r.balance>0&&(0,Ft.jsxs)("button",{onClick:()=>c(l(l({},o),{},{amount:r.balance.toString()})),className:"suggestion-btn balance",children:["Pay Balance: ",j(r.balance)]})]}),(0,Ft.jsxs)("div",{className:"form-grid",children:[(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{children:"Amount (Rs.) *"}),(0,Ft.jsx)("input",{type:"number",value:o.amount,onChange:e=>c(l(l({},o),{},{amount:e.target.value})),placeholder:"Enter amount",min:"0",step:"0.01"}),(0,Ft.jsxs)("small",{children:["Full fee: ",j(s.totalFee)," | Balance: ",j(r.balance)]})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{children:"Payment Method *"}),(0,Ft.jsxs)("select",{value:o.paymentMethod,onChange:e=>c(l(l({},o),{},{paymentMethod:e.target.value})),children:[(0,Ft.jsx)("option",{value:"CASH",children:"Cash"}),(0,Ft.jsx)("option",{value:"CARD",children:"Card"}),(0,Ft.jsx)("option",{value:"ONLINE",children:"Online"}),(0,Ft.jsx)("option",{value:"BANK_TRANSFER",children:"Bank Transfer"})]})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{children:"For Month *"}),(0,Ft.jsx)("input",{type:"month",value:o.month,onChange:e=>c(l(l({},o),{},{month:e.target.value}))})]}),(0,Ft.jsxs)("div",{className:"form-group full-width",children:[(0,Ft.jsx)("label",{children:"Notes (Optional)"}),(0,Ft.jsx)("textarea",{value:o.notes,onChange:e=>c(l(l({},o),{},{notes:e.target.value})),placeholder:"Additional notes about payment for ".concat(S.className,"..."),rows:"3"})]})]}),(0,Ft.jsxs)("div",{className:"payment-actions",children:[(0,Ft.jsx)("button",{onClick:async()=>{if(!o.amount||parseFloat(o.amount)<=0)g("Please enter a valid payment amount");else if(S){d(!0),g(null);try{const e={studentId:t.studentId,classId:S.id,amountPaid:parseFloat(o.amount),paymentDate:(new Date).toISOString().split("T")[0],month:o.month,paymentMethod:o.paymentMethod,transactionId:"TXN".concat(Date.now()),notes:o.notes};console.log("\ud83d\udcb3 Recording payment:",e);const n=await Mt.recordPayment(e);console.log("\u2705 Payment recorded:",n);const r=await Mt.getFeeStatusForClass(t.studentId,S.id);a(r),c({amount:"",paymentMethod:"CASH",month:(new Date).toISOString().substring(0,7),notes:""}),alert("\u2705 Payment recorded successfully for ".concat(S.className,"!"))}catch(e){console.error("\u274c Payment error:",e),g(e.message||"Failed to record payment")}finally{d(!1)}}else g("Please select a class for payment")},disabled:u||!o.amount||parseFloat(o.amount)<=0,className:"pay-btn",children:u?(0,Ft.jsxs)(Ft.Fragment,{children:[(0,Ft.jsx)("div",{className:"spinner-small"}),"Processing..."]}):"Record Payment for ".concat(S.className," - ").concat(j(parseFloat(o.amount)))}),(0,Ft.jsx)("button",{onClick:async()=>{await x(),setTimeout(()=>E(),200)},className:"scan-again-btn",children:"Scan Another Student"})]})]})]})]})},Lr=()=>{var t,n;const[r,a]=(0,e.useState)([]),[s,i]=(0,e.useState)([]),[o,l]=(0,e.useState)({}),[c,u]=(0,e.useState)(!0),[d,h]=(0,e.useState)(null),[f,m]=(0,e.useState)("overview");(0,e.useEffect)(()=>{g()},[]);const g=async()=>{try{u(!0),h(null);const[e,t,n]=await Promise.all([Mt.getOverdueStudents(),Mt.getRecentPayments(),Mt.getFeeStatistics()]);a(e),i(t),l(n)}catch(e){console.error("Error loading fee data:",e),h("Failed to load fee data: "+e.message)}finally{u(!1)}},p=e=>{const t="PAID"===e?"paid":"PARTIAL"===e?"partial":"pending";return(0,Ft.jsx)("span",{className:"status-badge ".concat(t),children:e})},y=e=>new Intl.NumberFormat("en-LK",{style:"currency",currency:"LKR"}).format(e||0);return c?(0,Ft.jsxs)("div",{className:"loading-container",children:[(0,Ft.jsx)("div",{className:"spinner"}),(0,Ft.jsx)("p",{children:"Loading fee data..."})]}):d?(0,Ft.jsxs)("div",{className:"error-container",children:[(0,Ft.jsx)("div",{className:"error-icon",children:"\u274c"}),(0,Ft.jsx)("h3",{children:"Error Loading Data"}),(0,Ft.jsx)("p",{children:d}),(0,Ft.jsx)("button",{onClick:g,className:"retry-btn",children:"Retry"})]}):(0,Ft.jsxs)("div",{className:"fee-management",children:[(0,Ft.jsxs)("div",{className:"fee-header",children:[(0,Ft.jsx)("h1",{children:"Fee Management"}),(0,Ft.jsx)("p",{children:"Manage student fees and payment tracking"})]}),(0,Ft.jsxs)("div",{className:"stats-cards",children:[(0,Ft.jsxs)("div",{className:"stat-card total-collected",children:[(0,Ft.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb0"}),(0,Ft.jsxs)("div",{className:"stat-content",children:[(0,Ft.jsx)("h3",{children:"Total Collected"}),(0,Ft.jsx)("div",{className:"stat-number",children:y(o.totalCollected)}),(0,Ft.jsx)("p",{children:"Last 30 days"})]})]}),(0,Ft.jsxs)("div",{className:"stat-card pending-payments",children:[(0,Ft.jsx)("div",{className:"stat-icon",children:"\u23f0"}),(0,Ft.jsxs)("div",{className:"stat-content",children:[(0,Ft.jsx)("h3",{children:"Pending Payments"}),(0,Ft.jsx)("div",{className:"stat-number",children:o.pendingStudents}),(0,Ft.jsx)("p",{children:"Students with dues"})]})]}),(0,Ft.jsxs)("div",{className:"stat-card collection-rate",children:[(0,Ft.jsx)("div",{className:"stat-icon",children:"\ud83d\udcca"}),(0,Ft.jsxs)("div",{className:"stat-content",children:[(0,Ft.jsx)("h3",{children:"Collection Rate"}),(0,Ft.jsxs)("div",{className:"stat-number",children:[null===(t=o.collectionRate)||void 0===t?void 0:t.toFixed(1),"%"]}),(0,Ft.jsx)("p",{children:"Overall efficiency"})]})]}),(0,Ft.jsxs)("div",{className:"stat-card recent-payments",children:[(0,Ft.jsx)("div",{className:"stat-icon",children:"\ud83d\udd04"}),(0,Ft.jsxs)("div",{className:"stat-content",children:[(0,Ft.jsx)("h3",{children:"Recent Payments"}),(0,Ft.jsx)("div",{className:"stat-number",children:o.recentPaymentCount}),(0,Ft.jsx)("p",{children:"Last 30 days"})]})]})]}),(0,Ft.jsxs)("div",{className:"tabs-container",children:[(0,Ft.jsxs)("div",{className:"tabs",children:[(0,Ft.jsx)("button",{className:"tab ".concat("overview"===f?"active":""),onClick:()=>m("overview"),children:"Overview"}),(0,Ft.jsx)("button",{className:"tab ".concat("overdue"===f?"active":""),onClick:()=>m("overdue"),children:"Overdue Students"}),(0,Ft.jsx)("button",{className:"tab ".concat("history"===f?"active":""),onClick:()=>m("history"),children:"Payment History"})]}),(0,Ft.jsxs)("div",{className:"tab-content",children:["overview"===f&&(0,Ft.jsxs)("div",{className:"overview-tab",children:[(0,Ft.jsx)("h3",{children:"Fee Collection Overview"}),(0,Ft.jsxs)("div",{className:"overview-grid",children:[(0,Ft.jsxs)("div",{className:"overview-card",children:[(0,Ft.jsx)("h4",{children:"Quick Actions"}),(0,Ft.jsxs)("div",{className:"action-buttons",children:[(0,Ft.jsx)("button",{className:"action-btn primary",children:"\ud83d\udcf1 Scan Payment"}),(0,Ft.jsx)("button",{className:"action-btn secondary",children:"\ud83d\udcc4 Generate Report"}),(0,Ft.jsx)("button",{className:"action-btn secondary",children:"\ud83d\udce7 Send Reminders"})]})]}),(0,Ft.jsxs)("div",{className:"overview-card",children:[(0,Ft.jsx)("h4",{children:"This Month Summary"}),(0,Ft.jsxs)("div",{className:"summary-stats",children:[(0,Ft.jsxs)("div",{className:"summary-item",children:[(0,Ft.jsx)("span",{children:"Target Collection:"}),(0,Ft.jsx)("span",{children:y(2*o.totalCollected)})]}),(0,Ft.jsxs)("div",{className:"summary-item",children:[(0,Ft.jsx)("span",{children:"Actual Collection:"}),(0,Ft.jsx)("span",{className:"highlight",children:y(o.totalCollected)})]}),(0,Ft.jsxs)("div",{className:"summary-item",children:[(0,Ft.jsx)("span",{children:"Collection Rate:"}),(0,Ft.jsxs)("span",{className:"highlight",children:[null===(n=o.collectionRate)||void 0===n?void 0:n.toFixed(1),"%"]})]})]})]})]})]}),"overdue"===f&&(0,Ft.jsxs)("div",{className:"overdue-tab",children:[(0,Ft.jsxs)("div",{className:"section-header",children:[(0,Ft.jsx)("h3",{children:"Overdue Payments"}),(0,Ft.jsxs)("span",{className:"count-badge",children:[r.length," students"]})]}),0===r.length?(0,Ft.jsxs)("div",{className:"empty-state",children:[(0,Ft.jsx)("div",{className:"empty-icon",children:"\ud83c\udf89"}),(0,Ft.jsx)("h4",{children:"No Overdue Payments!"}),(0,Ft.jsx)("p",{children:"All students are up to date with their fees."})]}):(0,Ft.jsx)("div",{className:"overdue-list",children:r.map((e,t)=>(0,Ft.jsxs)("div",{className:"overdue-student",children:[(0,Ft.jsxs)("div",{className:"student-info",children:[(0,Ft.jsx)("h4",{children:e.studentName}),(0,Ft.jsxs)("p",{children:[e.studentId," \u2022 ",e.className]})]}),(0,Ft.jsxs)("div",{className:"fee-details",children:[(0,Ft.jsx)("div",{className:"amount-due",children:(0,Ft.jsxs)("span",{children:["Due: ",y(e.balance)]})}),p(e.overallStatus)]}),(0,Ft.jsxs)("div",{className:"action-buttons",children:[(0,Ft.jsx)("button",{className:"btn-small primary",children:"Mark Paid"}),(0,Ft.jsx)("button",{className:"btn-small secondary",children:"Send Reminder"})]})]},e.studentId||t))})]}),"history"===f&&(0,Ft.jsxs)("div",{className:"history-tab",children:[(0,Ft.jsxs)("div",{className:"section-header",children:[(0,Ft.jsx)("h3",{children:"Recent Payment History"}),(0,Ft.jsxs)("span",{className:"count-badge",children:[s.length," payments"]})]}),0===s.length?(0,Ft.jsxs)("div",{className:"empty-state",children:[(0,Ft.jsx)("div",{className:"empty-icon",children:"\ud83d\udcb8"}),(0,Ft.jsx)("h4",{children:"No Payments Yet"}),(0,Ft.jsx)("p",{children:"Payment history will appear here once payments are recorded."})]}):(0,Ft.jsx)("div",{className:"payment-history",children:(0,Ft.jsxs)("div",{className:"history-table",children:[(0,Ft.jsxs)("div",{className:"table-header",children:[(0,Ft.jsx)("span",{children:"Student"}),(0,Ft.jsx)("span",{children:"Amount"}),(0,Ft.jsx)("span",{children:"Date"}),(0,Ft.jsx)("span",{children:"Method"}),(0,Ft.jsx)("span",{children:"Month"}),(0,Ft.jsx)("span",{children:"Status"})]}),s.map(e=>{var t,n,r;return(0,Ft.jsxs)("div",{className:"table-row",children:[(0,Ft.jsxs)("span",{className:"student-name",children:[null===(t=e.student)||void 0===t?void 0:t.firstName," ",null===(n=e.student)||void 0===n?void 0:n.lastName]}),(0,Ft.jsx)("span",{className:"amount",children:y(e.amountPaid)}),(0,Ft.jsx)("span",{className:"date",children:(r=e.paymentDate,new Date(r).toLocaleDateString("en-LK"))}),(0,Ft.jsx)("span",{className:"method",children:e.paymentMethod}),(0,Ft.jsx)("span",{className:"month",children:e.month}),(0,Ft.jsx)("span",{className:"status",children:p(e.status)})]},e.id)})]})})]})]})]})]})},Fr=()=>{var t,n,r;const[a,s]=(0,e.useState)({recentPayments:[],overdueStudents:[],feeStatistics:{},allPayments:[]}),[i,o]=(0,e.useState)([]),[c,u]=(0,e.useState)("all"),[d,h]=(0,e.useState)((new Date).toISOString().substring(0,7)),[f,m]=(0,e.useState)("overview"),[g,p]=(0,e.useState)(!1),[y,v]=(0,e.useState)(null),[w,S]=(0,e.useState)(5),N=Array.from({length:6},(e,t)=>{const n=new Date;return n.setMonth(n.getMonth()-t),n.toISOString().substring(0,7)});(0,e.useEffect)(()=>{C()},[]),(0,e.useEffect)(()=>{"classWise"===f?E():"monthly"===f?A():"overdue"===f?x():"overview"===f&&b()},[f,c,d]);const C=async()=>{try{p(!0),v(null),console.log("\ud83d\ude80 Starting to load initial data...");const e=await Rt.getAllActive();console.log("\u2705 Loaded classes:",e.length),o(e),await b()}catch(y){console.error("\u274c Error loading initial data:",y),v("Failed to load initial data: ".concat(y.message))}finally{p(!1)}},b=async()=>{try{console.log("\ud83d\udcca Loading overview data...");const[e,t,n]=await Promise.all([Mt.getRecentPayments(),Mt.getOverdueStudents(),Mt.getFeeStatistics()]);console.log("\u2705 Overview data loaded:",{payments:e.length,overdue:t.length,stats:n}),s({recentPayments:e,overdueStudents:t,feeStatistics:n,allPayments:e})}catch(y){console.error("\u274c Error loading overview data:",y),v("Failed to load payment data: ".concat(y.message)),s({recentPayments:[],overdueStudents:[],feeStatistics:{},allPayments:[]})}},E=async()=>{try{p(!0),v(null),console.log("\ud83c\udfeb Loading class-wise data for class:",c);const[e,t,n]=await Promise.all([Mt.getRecentPayments(),Mt.getOverdueStudents(),Mt.getFeeStatistics()]);let r=e,a=t;if("all"!==c){const n=parseInt(c);r=e.filter(e=>{var t;const r=(null===(t=e.schoolClass)||void 0===t?void 0:t.id)||e.classId;return console.log("Payment ".concat(e.id," class:"),r,"Selected:",n),r===n}),a=t.filter(e=>{const t=e.classId;return console.log("Overdue student ".concat(e.studentId," class:"),t,"Selected:",n),t===n})}console.log("\ud83d\udccb Filtered Class Data:",{filteredPayments:r.length,filteredOverdue:a.length}),s(e=>l(l({},e),{},{allPayments:r,overdueStudents:a,feeStatistics:n}))}catch(y){console.error("\u274c Error loading class data:",y),v("Failed to load class data: ".concat(y.message))}finally{p(!1)}},A=async()=>{try{p(!0),v(null),console.log("\ud83d\udcc5 Loading monthly data for:",d);const e=await Mt.getRecentPayments(),t=e.filter(e=>{var t,n;const r=(e.month||(null===(t=e.paymentDate)||void 0===t?void 0:t.substring(0,7)))===d,a="all"===c||(null===(n=e.schoolClass)||void 0===n?void 0:n.id)===parseInt(c)||e.classId===parseInt(c);return r&&a});console.log("\u2705 Monthly data filtered:",{allPayments:e.length,filteredPayments:t.length}),s(e=>l(l({},e),{},{allPayments:t}))}catch(y){console.error("\u274c Error loading monthly data:",y),v("Failed to load monthly data")}finally{p(!1)}},x=async()=>{try{p(!0),v(null),console.log("\u26a0\ufe0f Loading overdue data for class:",c);const e=await Mt.getOverdueStudents(),t="all"!==c?e.filter(e=>e.classId===parseInt(c)):e;console.log("\u2705 Overdue data loaded:",{allOverdue:e.length,filteredOverdue:t.length}),s(e=>l(l({},e),{},{overdueStudents:t}))}catch(y){console.error("\u274c Error loading overdue data:",y),v("Failed to load overdue data")}finally{p(!1)}},I=e=>{var t;return e.classId||(null===(t=e.schoolClass)||void 0===t?void 0:t.id)},T=e=>{var t;return e.className||(null===(t=e.schoolClass)||void 0===t?void 0:t.className)||"Unknown Class"},_=e=>{if("all"===e)return"All Teachers";const t=i.find(t=>t.id===parseInt(e));return(null===t||void 0===t?void 0:t.classTeacher)||"No Teacher Assigned"},j=e=>{var t;const n=e.classId||(null===(t=e.schoolClass)||void 0===t?void 0:t.id);return _(n)},R=e=>new Intl.NumberFormat("en-LK",{style:"currency",currency:"LKR"}).format(e||0),D=e=>e?new Date(e).toLocaleDateString("en-LK",{year:"numeric",month:"short",day:"numeric"}):"N/A",M=e=>{if(!e)return(0,Ft.jsx)("span",{className:"status-badge unknown",children:"UNKNOWN"});const t="PAID"===e?"paid":"PARTIAL"===e?"partial":"PENDING"===e?"pending":"unknown";return(0,Ft.jsx)("span",{className:"status-badge ".concat(t),children:e})},O=e=>e.studentName?e.studentName:e.student?"".concat(e.student.firstName||""," ").concat(e.student.lastName||"").trim():"Unknown Student";return(0,Ft.jsxs)("div",{className:"payment-tracker",children:[(0,Ft.jsxs)("div",{className:"tracker-header",children:[(0,Ft.jsxs)("div",{className:"header-content",children:[(0,Ft.jsx)("h1",{children:"\ud83d\udcb0 Payment Tracking System"}),(0,Ft.jsx)("p",{children:"Monitor fee payments, track overdue amounts, and generate reports"})]}),(0,Ft.jsxs)("div",{className:"header-stats",children:[(0,Ft.jsxs)("div",{className:"stat-card",children:[(0,Ft.jsx)("div",{className:"stat-value",children:R(a.feeStatistics.totalCollected||0)}),(0,Ft.jsx)("div",{className:"stat-label",children:"Total Collected"})]}),(0,Ft.jsxs)("div",{className:"stat-card",children:[(0,Ft.jsx)("div",{className:"stat-value",children:a.feeStatistics.pendingStudents||0}),(0,Ft.jsx)("div",{className:"stat-label",children:"Pending Students"})]}),(0,Ft.jsxs)("div",{className:"stat-card",children:[(0,Ft.jsx)("div",{className:"stat-value",children:a.feeStatistics.recentPaymentCount||0}),(0,Ft.jsx)("div",{className:"stat-label",children:"Recent Payments"})]}),(0,Ft.jsxs)("div",{className:"stat-card",children:[(0,Ft.jsxs)("div",{className:"stat-value",children:[Math.round(a.feeStatistics.collectionRate||0),"%"]}),(0,Ft.jsx)("div",{className:"stat-label",children:"Collection Rate"})]})]})]}),(0,Ft.jsxs)("div",{className:"tracker-controls",children:[(0,Ft.jsxs)("div",{className:"view-tabs",children:[(0,Ft.jsx)("button",{className:"tab-btn ".concat("overview"===f?"active":""),onClick:()=>m("overview"),children:"\ud83d\udcca Overview"}),(0,Ft.jsx)("button",{className:"tab-btn ".concat("classWise"===f?"active":""),onClick:()=>m("classWise"),children:"\ud83c\udfeb Class Wise"}),(0,Ft.jsx)("button",{className:"tab-btn ".concat("monthly"===f?"active":""),onClick:()=>m("monthly"),children:"\ud83d\udcc5 Monthly Report"}),(0,Ft.jsx)("button",{className:"tab-btn ".concat("overdue"===f?"active":""),onClick:()=>m("overdue"),children:"\u26a0\ufe0f Overdue Fees"})]}),(0,Ft.jsxs)("div",{className:"filters",children:[(0,Ft.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"filter-select",children:[(0,Ft.jsx)("option",{value:"all",children:"All Classes"}),i.map(e=>(0,Ft.jsxs)("option",{value:e.id,children:[e.className," - ",e.grade," (",e.classTeacher||"No Teacher",")"]},e.id))]}),("monthly"===f||"overview"===f)&&(0,Ft.jsx)("select",{value:d,onChange:e=>h(e.target.value),className:"filter-select",children:N.map(e=>(0,Ft.jsx)("option",{value:e,children:new Date(e+"-01").toLocaleDateString("en-LK",{year:"numeric",month:"long"})},e))}),"classWise"===f&&"all"!==c&&(0,Ft.jsxs)("div",{className:"commission-control",children:[(0,Ft.jsx)("label",{children:"Commission Rate: "}),(0,Ft.jsx)("input",{type:"number",value:w,onChange:e=>S(parseFloat(e.target.value)),min:"0",max:"100",step:"0.5",className:"commission-input"}),(0,Ft.jsx)("span",{children:"%"})]})]})]}),y&&(0,Ft.jsxs)("div",{className:"error-message",children:[y,(0,Ft.jsx)("button",{onClick:()=>v(null),className:"close-error",children:"\xd7"})]}),(0,Ft.jsx)("div",{className:"tracker-content",children:g?(0,Ft.jsxs)("div",{className:"loading-state",children:[(0,Ft.jsx)("div",{className:"spinner"}),(0,Ft.jsx)("p",{children:"Loading payment data..."})]}):(0,Ft.jsxs)(Ft.Fragment,{children:["overview"===f&&(0,Ft.jsxs)("div",{className:"overview-grid",children:[(0,Ft.jsxs)("div",{className:"overview-card recent-payments",children:[(0,Ft.jsx)("h3",{children:"Recent Payments"}),(0,Ft.jsxs)("div",{className:"payments-list",children:[a.recentPayments.slice(0,10).map(e=>(0,Ft.jsxs)("div",{className:"payment-item",children:[(0,Ft.jsxs)("div",{className:"payment-info",children:[(0,Ft.jsx)("div",{className:"student-name",children:O(e)}),(0,Ft.jsxs)("div",{className:"payment-details",children:[T(e)," \u2022 ",R(e.amountPaid)]})]}),(0,Ft.jsxs)("div",{className:"payment-meta",children:[(0,Ft.jsx)("div",{className:"payment-date",children:D(e.paymentDate)}),M(e.status)]})]},e.id)),0===a.recentPayments.length&&(0,Ft.jsx)("div",{className:"no-data",children:"No recent payments found"})]})]}),(0,Ft.jsxs)("div",{className:"overview-card overdue-summary",children:[(0,Ft.jsx)("h3",{children:"Overdue Summary"}),(0,Ft.jsxs)("div",{className:"overdue-list",children:[a.overdueStudents.slice(0,8).map(e=>(0,Ft.jsxs)("div",{className:"overdue-item",children:[(0,Ft.jsxs)("div",{className:"student-info",children:[(0,Ft.jsx)("div",{className:"student-name",children:e.studentName}),(0,Ft.jsx)("div",{className:"class-name",children:e.className})]}),(0,Ft.jsx)("div",{className:"overdue-amount",children:R(e.balance)})]},e.studentId)),0===a.overdueStudents.length&&(0,Ft.jsx)("div",{className:"no-data",children:"No overdue students"})]})]})]}),"classWise"===f&&(0,Ft.jsxs)("div",{className:"class-wise-view",children:[(0,Ft.jsxs)("div",{className:"class-header",children:[(0,Ft.jsx)("h3",{children:"all"!==c?"Class: ".concat(null===(t=i.find(e=>e.id==c))||void 0===t?void 0:t.className," - ").concat(null===(n=i.find(e=>e.id==c))||void 0===n?void 0:n.grade):"All Classes"}),"all"!==c&&(0,Ft.jsxs)("div",{className:"teacher-info",children:[(0,Ft.jsxs)("div",{className:"teacher-details",children:[(0,Ft.jsx)("strong",{children:"Class Teacher:"})," ",_(c)]}),(0,Ft.jsxs)("div",{className:"commission-details",children:[(0,Ft.jsx)("strong",{children:"Commission Earned:"})," ",R((e=>{if("all"===e)return 0;return a.allPayments.filter(t=>I(t)===parseInt(e)).reduce((e,t)=>e+(t.amountPaid||0),0)*w/100})(c)),(0,Ft.jsxs)("span",{className:"commission-rate",children:["(",w,"% of ",R(a.allPayments.reduce((e,t)=>e+(t.amountPaid||0),0)),")"]})]})]})]}),(0,Ft.jsx)("div",{className:"class-payments-table",children:a.allPayments.length>0?(0,Ft.jsxs)(Ft.Fragment,{children:[(0,Ft.jsxs)("table",{children:[(0,Ft.jsx)("thead",{children:(0,Ft.jsxs)("tr",{children:[(0,Ft.jsx)("th",{children:"Student ID"}),(0,Ft.jsx)("th",{children:"Student Name"}),(0,Ft.jsx)("th",{children:"Class"}),(0,Ft.jsx)("th",{children:"Class Teacher"}),(0,Ft.jsx)("th",{children:"Amount Paid"}),(0,Ft.jsx)("th",{children:"Payment Date"}),(0,Ft.jsx)("th",{children:"Month"}),(0,Ft.jsx)("th",{children:"Status"}),(0,Ft.jsx)("th",{children:"Method"}),(0,Ft.jsx)("th",{children:"Teacher Commission"})]})}),(0,Ft.jsx)("tbody",{children:a.allPayments.map(e=>{var t;const n=e.amountPaid*w/100,r=I(e);return(0,Ft.jsxs)("tr",{children:[(0,Ft.jsx)("td",{className:"student-id-cell",children:(null===(t=e.student)||void 0===t?void 0:t.studentId)||"N/A"}),(0,Ft.jsx)("td",{className:"student-name-cell",children:(0,Ft.jsx)("strong",{children:O(e)})}),(0,Ft.jsx)("td",{className:"class-cell",children:T(e)}),(0,Ft.jsx)("td",{className:"teacher-cell",children:_(r)}),(0,Ft.jsx)("td",{className:"amount-cell",children:R(e.amountPaid)}),(0,Ft.jsx)("td",{className:"date-cell",children:D(e.paymentDate)}),(0,Ft.jsx)("td",{className:"month-cell",children:e.month||"N/A"}),(0,Ft.jsx)("td",{className:"status-cell",children:M(e.status)}),(0,Ft.jsx)("td",{className:"method-cell",children:(0,Ft.jsx)("span",{className:"payment-method",children:e.paymentMethod||"N/A"})}),(0,Ft.jsx)("td",{className:"commission-cell",children:R(n)})]},e.id)})})]}),(0,Ft.jsx)("div",{className:"table-summary",children:(0,Ft.jsxs)("p",{children:["Showing ",a.allPayments.length," payment(s) \u2022 Total: ",R(a.allPayments.reduce((e,t)=>e+(t.amountPaid||0),0))]})})]}):(0,Ft.jsxs)("div",{className:"no-data-message",children:[(0,Ft.jsx)("h4",{children:"No payment records found for selected class"}),(0,Ft.jsx)("p",{children:'Try selecting "All Classes" or check if payments are properly associated with classes.'}),(0,Ft.jsxs)("div",{className:"debug-suggestions",children:[(0,Ft.jsx)("p",{children:(0,Ft.jsx)("strong",{children:"Possible reasons:"})}),(0,Ft.jsxs)("ul",{children:[(0,Ft.jsx)("li",{children:"No payments recorded for this class"}),(0,Ft.jsx)("li",{children:"Payments might not be associated with classes"}),(0,Ft.jsx)("li",{children:"Check browser console for detailed error messages"})]})]})]})})]}),"monthly"===f&&(0,Ft.jsxs)("div",{className:"monthly-report-view",children:[(0,Ft.jsxs)("h3",{children:["Monthly Payment Report - ",new Date(d+"-01").toLocaleDateString("en-LK",{year:"numeric",month:"long"})]}),(0,Ft.jsxs)("div",{className:"monthly-stats",children:[(0,Ft.jsxs)("div",{className:"month-stat",children:[(0,Ft.jsx)("span",{className:"stat-label",children:"Total Collected:"}),(0,Ft.jsx)("span",{className:"stat-value",children:R(a.allPayments.reduce((e,t)=>e+(t.amountPaid||0),0))})]}),(0,Ft.jsxs)("div",{className:"month-stat",children:[(0,Ft.jsx)("span",{className:"stat-label",children:"Total Payments:"}),(0,Ft.jsx)("span",{className:"stat-value",children:a.allPayments.length})]}),"all"!==c&&(0,Ft.jsxs)("div",{className:"month-stat",children:[(0,Ft.jsx)("span",{className:"stat-label",children:"Class Teacher:"}),(0,Ft.jsx)("span",{className:"stat-value",children:_(c)})]})]}),(0,Ft.jsxs)("div",{className:"monthly-payments",children:[a.allPayments.map(e=>(0,Ft.jsxs)("div",{className:"monthly-payment-item",children:[(0,Ft.jsxs)("div",{className:"payment-main",children:[(0,Ft.jsxs)("div",{className:"student-class",children:[(0,Ft.jsx)("strong",{children:O(e)}),(0,Ft.jsx)("span",{children:T(e)}),"all"===c&&(0,Ft.jsxs)("span",{className:"teacher-name",children:["Teacher: ",_(I(e))]})]}),(0,Ft.jsx)("div",{className:"payment-amount",children:R(e.amountPaid)})]}),(0,Ft.jsxs)("div",{className:"payment-details",children:[(0,Ft.jsx)("span",{className:"payment-date",children:D(e.paymentDate)}),(0,Ft.jsx)("span",{className:"payment-method",children:e.paymentMethod||"N/A"}),M(e.status)]})]},e.id)),0===a.allPayments.length&&(0,Ft.jsx)("div",{className:"no-data-message",children:(0,Ft.jsx)("p",{children:"No payments found for the selected month and class."})})]})]}),"overdue"===f&&(0,Ft.jsxs)("div",{className:"overdue-view",children:[(0,Ft.jsxs)("h3",{children:["Overdue Fee Report ","all"!==c&&"- ".concat(null===(r=i.find(e=>e.id==c))||void 0===r?void 0:r.className)]}),(0,Ft.jsxs)("div",{className:"overdue-students-grid",children:[a.overdueStudents.map(e=>{const t=!(n=e.balance)||n<=0?"paid":n>5e3?"high":n>2e3?"medium":"low";var n;return(0,Ft.jsxs)("div",{className:"overdue-student-card ".concat(t),children:[(0,Ft.jsxs)("div",{className:"student-header",children:[(0,Ft.jsxs)("div",{className:"student-info",children:[(0,Ft.jsx)("h4",{children:e.studentName}),(0,Ft.jsxs)("p",{children:[e.className," \u2022 ",e.studentId]}),(0,Ft.jsxs)("p",{className:"teacher-name",children:["Class Teacher: ",j(e)]})]}),(0,Ft.jsx)("div",{className:"overdue-indicator",children:(0,Ft.jsx)("span",{className:"overdue-severity ".concat(t),children:"paid"===t?"PAID":t.toUpperCase()+" PRIORITY"})})]}),(0,Ft.jsxs)("div",{className:"fee-details",children:[(0,Ft.jsxs)("div",{className:"fee-item",children:[(0,Ft.jsx)("span",{children:"Total Due:"}),(0,Ft.jsx)("span",{children:R(e.totalDue)})]}),(0,Ft.jsxs)("div",{className:"fee-item",children:[(0,Ft.jsx)("span",{children:"Amount Paid:"}),(0,Ft.jsx)("span",{className:"paid-amount",children:R(e.totalPaid)})]}),(0,Ft.jsxs)("div",{className:"fee-item total",children:[(0,Ft.jsx)("span",{children:"Balance:"}),(0,Ft.jsx)("span",{className:"balance-amount",children:R(e.balance)})]})]}),(0,Ft.jsxs)("div",{className:"action-buttons",children:[(0,Ft.jsx)("button",{className:"btn-remind",children:"Send Reminder"}),(0,Ft.jsx)("button",{className:"btn-view",children:"View History"})]})]},e.studentId)}),0===a.overdueStudents.length&&(0,Ft.jsx)("div",{className:"no-data-message",children:(0,Ft.jsx)("p",{children:"No overdue students found for the selected criteria."})})]})]})]})})]})},Br=()=>{const[t,n]=(0,e.useState)({username:"",password:""}),[r,a]=(0,e.useState)(!1),[s,i]=(0,e.useState)(""),[o,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)(!1),h=e=>{n({admin:{username:"admin",password:"admin123"},teacher:{username:"teacher",password:"teacher123"},student:{username:"student",password:"student123"}}[e])};return(0,Ft.jsxs)("div",{className:"login-container",children:[(0,Ft.jsx)("div",{className:"login-background",children:(0,Ft.jsxs)("div",{className:"login-shapes",children:[(0,Ft.jsx)("div",{className:"shape shape-1"}),(0,Ft.jsx)("div",{className:"shape shape-2"}),(0,Ft.jsx)("div",{className:"shape shape-3"})]})}),(0,Ft.jsxs)("div",{className:"login-card",children:[(0,Ft.jsxs)("div",{className:"login-header",children:[(0,Ft.jsxs)("div",{className:"logo",children:[(0,Ft.jsx)("div",{className:"logo-icon",children:"\ud83c\udf93"}),(0,Ft.jsxs)("div",{className:"logo-text",children:[(0,Ft.jsx)("h2",{children:"EduManage Pro"}),(0,Ft.jsx)("p",{children:"School Management System"})]})]}),(0,Ft.jsx)("h3",{children:"Welcome Back"}),(0,Ft.jsx)("p",{children:"Sign in to your admin account"})]}),(0,Ft.jsxs)("form",{className:"login-form",onSubmit:async e=>{e.preventDefault(),a(!0),i("");try{console.log("\ud83d\udd10 Attempting login...");const e=await _t.login(t);return console.log("\ud83d\udd35 Login response:",e),console.log("\ud83d\ude80 FORCE REDIRECTING TO DASHBOARD"),localStorage.setItem("isAuthenticated","true"),localStorage.setItem("user",JSON.stringify(e.user||{username:t.username})),void(window.location.href="/dashboard")}catch(n){console.error("\u274c Login error:",n),i(n.message||"Login failed"),a(!1)}},children:[(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"username",children:"Username"}),(0,Ft.jsx)("input",{id:"username",type:"text",value:t.username,onChange:e=>n(l(l({},t),{},{username:e.target.value})),placeholder:"Enter your username",disabled:r,required:!0})]}),(0,Ft.jsxs)("div",{className:"form-group",children:[(0,Ft.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Ft.jsxs)("div",{className:"password-input-container",children:[(0,Ft.jsx)("input",{id:"password",type:o?"text":"password",value:t.password,onChange:e=>n(l(l({},t),{},{password:e.target.value})),placeholder:"Enter your password",disabled:r,required:!0}),(0,Ft.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>{c(!o)},disabled:r,children:o?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]})]}),(0,Ft.jsxs)("div",{className:"form-options",children:[(0,Ft.jsxs)("label",{className:"remember-me",children:[(0,Ft.jsx)("input",{type:"checkbox",checked:u,onChange:e=>d(e.target.checked),disabled:r}),"Remember me"]}),(0,Ft.jsx)("a",{href:"/forgot-password",className:"forgot-password",children:"Forgot password?"})]}),s&&(0,Ft.jsx)("div",{className:"submit-error",children:s}),(0,Ft.jsx)("button",{type:"submit",className:"login-btn",disabled:r,children:r?(0,Ft.jsxs)(Ft.Fragment,{children:[(0,Ft.jsx)("div",{className:"spinner"}),"Signing in..."]}):"Sign In"})]}),(0,Ft.jsxs)("div",{className:"demo-section",children:[(0,Ft.jsx)("div",{className:"demo-label",children:"Quick Demo Access"}),(0,Ft.jsxs)("div",{className:"demo-buttons",children:[(0,Ft.jsx)("button",{className:"demo-btn admin",onClick:()=>h("admin"),disabled:r,children:"Admin"}),(0,Ft.jsx)("button",{className:"demo-btn teacher",onClick:()=>h("teacher"),disabled:r,children:"Teacher"}),(0,Ft.jsx)("button",{className:"demo-btn student",onClick:()=>h("student"),disabled:r,children:"Student"})]})]}),(0,Ft.jsx)("div",{className:"login-footer",children:(0,Ft.jsxs)("p",{children:["Don't have an account?"," ",(0,Ft.jsx)("a",{href:"/signup",className:"signup-link",children:"Contact administrator"})]})})]})]})},Ur=e=>{let{redirectPath:t="/login"}=e;return(()=>{const e=localStorage.getItem("authToken"),t=localStorage.getItem("user");return!!e&&!!t})()?(0,Ft.jsx)(De,{}):(0,Ft.jsx)(Re,{to:t,replace:!0})},zr=()=>{const t=ue(),n=fe(),[r,a]=(0,e.useState)(!1),[s,i]=(0,e.useState)(""),[o,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(!1),d=e=>t.pathname===e?"active":"";(0,e.useEffect)(()=>{const e=()=>{a(window.scrollY>50)},t=()=>{const e=new Date;i(e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},n=()=>{const e=localStorage.getItem("authToken"),t=localStorage.getItem("user");u(!!e&&!!t)};t();const r=setInterval(t,6e4);return n(),window.addEventListener("storage",n),window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("storage",n),clearInterval(r)}},[]);return(0,Ft.jsxs)(Ft.Fragment,{children:[(0,Ft.jsxs)("header",{className:"header ".concat(r?"scrolled":""),children:[(0,Ft.jsxs)("div",{className:"header-content",children:[(0,Ft.jsxs)(pt,{to:"/",className:"logo",children:[(0,Ft.jsxs)("div",{className:"logo-icon",children:[(0,Ft.jsx)("div",{className:"logo-icon",children:"\ud83c\udf93"}),(0,Ft.jsx)("div",{className:"icon-star"})]}),(0,Ft.jsxs)("div",{className:"logo-text",children:[(0,Ft.jsx)("h1",{children:"Sammana"}),(0,Ft.jsx)("span",{children:"Educational Institute"})]})]}),(0,Ft.jsxs)("nav",{className:"nav",children:[(0,Ft.jsxs)(pt,{to:"/dashboard",className:"nav-link ".concat(d("/dashboard")),children:[(0,Ft.jsx)("span",{className:"nav-icon",children:"\ud83d\udcca"}),"Dashboard"]}),(0,Ft.jsxs)(pt,{to:"/register",className:"nav-link ".concat(d("/register")),children:[(0,Ft.jsx)("span",{className:"nav-icon",children:"\ud83d\udc64"}),"Register"]}),(0,Ft.jsxs)(pt,{to:"/attendance",className:"nav-link ".concat(d("/attendance")),children:[(0,Ft.jsx)("span",{className:"nav-icon",children:"\u2705"}),"Attendance"]}),(0,Ft.jsxs)(pt,{to:"/students",className:"nav-link ".concat(d("/students")),children:[(0,Ft.jsx)("span",{className:"nav-icon",children:"\ud83c\udf93"}),"Students"]}),(0,Ft.jsxs)(pt,{to:"/reports",className:"nav-link ".concat(d("/reports")),children:[(0,Ft.jsx)("span",{className:"nav-icon",children:"\ud83d\udcc8"}),"Reports"]})]}),(0,Ft.jsxs)("div",{className:"header-right",children:[(0,Ft.jsxs)("div",{className:"header-info",children:[(0,Ft.jsx)("div",{className:"current-time",children:s}),(0,Ft.jsx)("div",{className:"institute-badge",children:"Excellence in Education"})]}),(0,Ft.jsx)("div",{className:"user-section",children:c?(0,Ft.jsxs)(Ft.Fragment,{children:[(0,Ft.jsxs)("div",{className:"user-info",children:[(0,Ft.jsx)("span",{className:"user-icon",children:"\ud83d\udc64"}),(0,Ft.jsx)("span",{className:"username",children:localStorage.getItem("username")||"Admin"})]}),(0,Ft.jsxs)("button",{className:"logout-btn",onClick:()=>l(!0),title:"Logout",children:[(0,Ft.jsx)("span",{className:"logout-icon",children:"\ud83d\udeaa"}),(0,Ft.jsx)("span",{className:"logout-text",children:"Logout"})]})]}):(0,Ft.jsxs)(pt,{to:"/login",className:"login-btn",children:[(0,Ft.jsx)("span",{className:"login-icon",children:"\ud83d\udd11"}),(0,Ft.jsx)("span",{className:"login-text",children:"Logout"})]})})]})]}),(0,Ft.jsxs)("div",{className:"header-bg-elements",children:[(0,Ft.jsx)("div",{className:"bg-circle-1"}),(0,Ft.jsx)("div",{className:"bg-circle-2"}),(0,Ft.jsx)("div",{className:"bg-circle-3"})]})]}),o&&(0,Ft.jsx)("div",{className:"logout-modal-overlay",children:(0,Ft.jsxs)("div",{className:"logout-modal",children:[(0,Ft.jsx)("div",{className:"modal-icon",children:"\u26a0\ufe0f"}),(0,Ft.jsx)("h3",{children:"Confirm Logout"}),(0,Ft.jsx)("p",{children:"Are you sure you want to log out of the system?"}),(0,Ft.jsxs)("div",{className:"modal-actions",children:[(0,Ft.jsx)("button",{className:"modal-btn confirm-btn",onClick:async()=>{try{await fetch("http://localhost:8080/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("role"),localStorage.removeItem("username"),sessionStorage.clear(),u(!1),l(!1),n("/login"),console.log("\u2705 Logged out successfully")}catch(e){console.error("Logout error:",e),localStorage.clear(),sessionStorage.clear(),n("/login")}},children:"Yes, Logout"}),(0,Ft.jsx)("button",{className:"modal-btn cancel-btn",onClick:()=>l(!1),children:"Cancel"})]}),(0,Ft.jsx)("div",{className:"modal-footer",children:(0,Ft.jsx)("button",{className:"quick-logout-btn",onClick:()=>{localStorage.clear(),sessionStorage.clear(),n("/login")},title:"Admin Quick Logout",children:"Force Logout (Admin)"})})]})})]})},Hr=()=>{const t=(new Date).getFullYear(),[n,r]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{const e=()=>{window.pageYOffset>300?r(!0):r(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,Ft.jsxs)("footer",{className:"professional-footer",children:[(0,Ft.jsxs)("div",{className:"footer-container",children:[(0,Ft.jsx)("div",{className:"footer-main",children:(0,Ft.jsxs)("div",{className:"footer-grid",children:[(0,Ft.jsxs)("div",{className:"footer-column brand-column",children:[(0,Ft.jsxs)("div",{className:"footer-logo",children:[(0,Ft.jsx)("div",{className:"logo-icon",children:"\ud83c\udfeb"}),(0,Ft.jsxs)("div",{className:"logo-text",children:[(0,Ft.jsx)("h3",{children:"Sammana Institute"}),(0,Ft.jsx)("span",{children:"Excellence in Education"})]})]}),(0,Ft.jsx)("p",{className:"brand-description",children:"Empowering students through innovative learning solutions and comprehensive educational management systems since 2010."}),(0,Ft.jsxs)("div",{className:"accreditation",children:[(0,Ft.jsxs)("div",{className:"accreditation-badge",children:[(0,Ft.jsx)("span",{children:"\u2713"}),(0,Ft.jsx)("span",{children:"MOE Accredited"})]}),(0,Ft.jsxs)("div",{className:"accreditation-badge",children:[(0,Ft.jsx)("span",{children:"\u2713"}),(0,Ft.jsx)("span",{children:"ISO 9001:2015"})]})]})]}),(0,Ft.jsxs)("div",{className:"footer-column",children:[(0,Ft.jsx)("h4",{children:"Quick Links"}),(0,Ft.jsxs)("ul",{className:"footer-links",children:[(0,Ft.jsx)("li",{children:(0,Ft.jsx)(pt,{to:"/dashboard",children:"Dashboard"})}),(0,Ft.jsx)("li",{children:(0,Ft.jsx)(pt,{to:"/students",children:"Student Management"})}),(0,Ft.jsx)("li",{children:(0,Ft.jsx)(pt,{to:"/attendance",children:"Attendance"})}),(0,Ft.jsx)("li",{children:(0,Ft.jsx)(pt,{to:"/fees",children:"Fee Management"})}),(0,Ft.jsx)("li",{children:(0,Ft.jsx)(pt,{to:"/classes",children:"Class Management"})}),(0,Ft.jsx)("li",{children:(0,Ft.jsx)(pt,{to:"/reports",children:"Reports & Analytics"})})]})]}),(0,Ft.jsxs)("div",{className:"footer-column",children:[(0,Ft.jsx)("h4",{children:"Resources"}),(0,Ft.jsxs)("ul",{className:"footer-links",children:[(0,Ft.jsx)("li",{children:(0,Ft.jsx)(pt,{to:"/help",children:"Help Center"})}),(0,Ft.jsx)("li",{children:(0,Ft.jsx)(pt,{to:"/documentation",children:"Documentation"})}),(0,Ft.jsx)("li",{children:(0,Ft.jsx)(pt,{to:"/tutorials",children:"Video Tutorials"})}),(0,Ft.jsx)("li",{children:(0,Ft.jsx)(pt,{to:"/api-docs",children:"API Documentation"})}),(0,Ft.jsx)("li",{children:(0,Ft.jsx)(pt,{to:"/updates",children:"System Updates"})}),(0,Ft.jsx)("li",{children:(0,Ft.jsx)(pt,{to:"/support",children:"Technical Support"})})]})]}),(0,Ft.jsxs)("div",{className:"footer-column",children:[(0,Ft.jsx)("h4",{children:"Contact Info"}),(0,Ft.jsxs)("div",{className:"contact-info",children:[(0,Ft.jsxs)("div",{className:"contact-item",children:[(0,Ft.jsx)("span",{className:"contact-icon",children:"\ud83d\udccd"}),(0,Ft.jsxs)("div",{children:[(0,Ft.jsx)("p",{children:"123 Education Street"}),(0,Ft.jsx)("p",{children:"Colombo 07, Sri Lanka"})]})]}),(0,Ft.jsxs)("div",{className:"contact-item",children:[(0,Ft.jsx)("span",{className:"contact-icon",children:"\ud83d\udcde"}),(0,Ft.jsxs)("div",{children:[(0,Ft.jsx)("p",{children:"+94 11 234 5678"}),(0,Ft.jsx)("p",{children:"+94 77 123 4567"})]})]}),(0,Ft.jsxs)("div",{className:"contact-item",children:[(0,Ft.jsx)("span",{className:"contact-icon",children:"\u2709\ufe0f"}),(0,Ft.jsxs)("div",{children:[(0,Ft.jsx)("p",{children:"info@sammana.edu.lk"}),(0,Ft.jsx)("p",{children:"support@sammana.edu.lk"})]})]}),(0,Ft.jsxs)("div",{className:"contact-item",children:[(0,Ft.jsx)("span",{className:"contact-icon",children:"\ud83d\udd52"}),(0,Ft.jsxs)("div",{children:[(0,Ft.jsx)("p",{children:"Mon - Fri: 7:00 AM - 5:00 PM"}),(0,Ft.jsx)("p",{children:"Sat: 8:00 AM - 1:00 PM"})]})]})]})]}),(0,Ft.jsxs)("div",{className:"footer-column",children:[(0,Ft.jsx)("h4",{children:"Stay Updated"}),(0,Ft.jsxs)("div",{className:"newsletter-section",children:[(0,Ft.jsx)("p",{children:"Subscribe to our newsletter for updates and announcements."}),(0,Ft.jsxs)("div",{className:"newsletter-form",children:[(0,Ft.jsx)("input",{type:"email",placeholder:"Enter your email",className:"newsletter-input"}),(0,Ft.jsx)("button",{className:"newsletter-btn",children:"Subscribe"})]})]}),(0,Ft.jsxs)("div",{className:"social-section",children:[(0,Ft.jsx)("h5",{children:"Connect With Us"}),(0,Ft.jsxs)("div",{className:"social-links",children:[(0,Ft.jsx)("a",{href:"#",className:"social-link","aria-label":"Facebook",children:(0,Ft.jsx)("span",{className:"social-icon",children:"f"})}),(0,Ft.jsx)("a",{href:"#",className:"social-link","aria-label":"Twitter",children:(0,Ft.jsx)("span",{className:"social-icon",children:"\ud835\udd4f"})}),(0,Ft.jsx)("a",{href:"#",className:"social-link","aria-label":"LinkedIn",children:(0,Ft.jsx)("span",{className:"social-icon",children:"in"})}),(0,Ft.jsx)("a",{href:"#",className:"social-link","aria-label":"YouTube",children:(0,Ft.jsx)("span",{className:"social-icon",children:"\u25b6\ufe0f"})})]})]})]})]})}),(0,Ft.jsx)("div",{className:"footer-bottom",children:(0,Ft.jsxs)("div",{className:"footer-bottom-content",children:[(0,Ft.jsx)("div",{className:"copyright",children:(0,Ft.jsxs)("p",{children:["\xa9 ",t," Sammana Institute. All rights reserved."]})}),(0,Ft.jsxs)("div",{className:"legal-links",children:[(0,Ft.jsx)(pt,{to:"/privacy",className:"legal-link",children:"Privacy Policy"}),(0,Ft.jsx)("span",{className:"separator",children:"|"}),(0,Ft.jsx)(pt,{to:"/terms",className:"legal-link",children:"Terms of Service"}),(0,Ft.jsx)("span",{className:"separator",children:"|"}),(0,Ft.jsx)(pt,{to:"/cookies",className:"legal-link",children:"Cookie Policy"}),(0,Ft.jsx)("span",{className:"separator",children:"|"}),(0,Ft.jsx)(pt,{to:"/sitemap",className:"legal-link",children:"Sitemap"})]}),(0,Ft.jsx)("div",{className:"system-info",children:(0,Ft.jsxs)("span",{children:["v2.1.0 \u2022 Last updated: ",(new Date).toLocaleDateString()]})})]})})]}),(0,Ft.jsx)("button",{className:"back-to-top ".concat(n?"visible":""),onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},"aria-label":"Back to top",children:(0,Ft.jsx)("span",{className:"arrow-icon",children:"\u2191"})})]})};const Vr=()=>{const e=localStorage.getItem("authToken"),t=localStorage.getItem("user"),n=!!e&&!!t;return console.log("\ud83d\udd04 AuthRedirect - Checking authentication:",{tokenExists:!!e,userExists:!!t,isAuthenticated:n}),n?(console.log("\u2705 User authenticated, redirecting to dashboard"),(0,Ft.jsx)(Re,{to:"/dashboard",replace:!0})):(console.log("\u274c User not authenticated, redirecting to login"),(0,Ft.jsx)(Re,{to:"/login",replace:!0}))},Gr=e=>{let{children:t}=e;const n="true"===localStorage.getItem("isAuthenticated"),r=JSON.parse(localStorage.getItem("user")||"{}"),a=r.role||r.userRole||"";return console.log("\ud83d\udd10 ProtectedRouteWrapper Check:",{isAuthenticated:n,storedValue:localStorage.getItem("isAuthenticated"),userRole:a,userData:r}),n?(console.log("\u2705 User authenticated, showing protected content"),t):(console.log("\u274c Not authenticated, redirecting to login"),(0,Ft.jsx)(Re,{to:"/login",replace:!0}))},Wr=()=>(0,Ft.jsxs)("div",{className:"coming-soon",children:[(0,Ft.jsx)("h2",{children:"Manual Attendance"}),(0,Ft.jsx)("p",{children:"Record attendance manually for students"}),(0,Ft.jsx)("div",{className:"feature-preview",children:(0,Ft.jsx)("p",{children:"\ud83d\udcdd This feature will allow teachers to manually mark student attendance"})})]}),Yr=()=>(0,Ft.jsxs)("div",{className:"coming-soon",children:[(0,Ft.jsx)("h2",{children:"Today's Attendance"}),(0,Ft.jsx)("p",{children:"View and manage today's attendance records"}),(0,Ft.jsx)("div",{className:"feature-preview",children:(0,Ft.jsx)("p",{children:"\ud83d\udcca Real-time attendance overview for today's classes"})})]}),Xr=()=>(0,Ft.jsxs)("div",{className:"coming-soon",children:[(0,Ft.jsx)("h2",{children:"Student Reports"}),(0,Ft.jsx)("p",{children:"Comprehensive student performance and analytics"}),(0,Ft.jsx)("div",{className:"feature-preview",children:(0,Ft.jsx)("p",{children:"\ud83d\udcc8 Detailed student progress reports and analytics"})})]}),Qr=()=>(0,Ft.jsxs)("div",{className:"coming-soon",children:[(0,Ft.jsx)("h2",{children:"Overdue Fees"}),(0,Ft.jsx)("p",{children:"Track and manage overdue fee payments"}),(0,Ft.jsx)("div",{className:"feature-preview",children:(0,Ft.jsx)("p",{children:"\ud83d\udcb0 Monitor students with pending fee payments"})})]}),qr=()=>(0,Ft.jsxs)("div",{className:"coming-soon",children:[(0,Ft.jsx)("h2",{children:"Fee Structure Management"}),(0,Ft.jsx)("p",{children:"Configure and manage class fee structures"}),(0,Ft.jsx)("div",{className:"feature-preview",children:(0,Ft.jsx)("p",{children:"\ud83c\udff7\ufe0f Set up and modify fee structures for different classes"})})]}),Zr=()=>(0,Ft.jsxs)("div",{className:"coming-soon",children:[(0,Ft.jsx)("h2",{children:"Attendance Sessions"}),(0,Ft.jsx)("p",{children:"Manage class attendance sessions and schedules"}),(0,Ft.jsx)("div",{className:"feature-preview",children:(0,Ft.jsx)("p",{children:"\u23f0 Create and manage attendance sessions for classes"})})]}),Kr=()=>(0,Ft.jsxs)("div",{className:"coming-soon",children:[(0,Ft.jsx)("h2",{children:"QR Code Generator"}),(0,Ft.jsx)("p",{children:"Generate QR codes for students and classes"}),(0,Ft.jsx)("div",{className:"feature-preview",children:(0,Ft.jsx)("p",{children:"\ud83d\udd33 Generate and print QR codes for student IDs"})})]}),$r=()=>(0,Ft.jsxs)("div",{className:"coming-soon",children:[(0,Ft.jsx)("h2",{children:"Bulk Actions"}),(0,Ft.jsx)("p",{children:"Perform bulk operations on student data"}),(0,Ft.jsx)("div",{className:"feature-preview",children:(0,Ft.jsx)("p",{children:"\u26a1 Bulk student registration and data management"})})]}),Jr=()=>(0,Ft.jsxs)("div",{className:"coming-soon",children:[(0,Ft.jsx)("h2",{children:"Data Export"}),(0,Ft.jsx)("p",{children:"Export system data in various formats"}),(0,Ft.jsx)("div",{className:"feature-preview",children:(0,Ft.jsx)("p",{children:"\ud83d\udce4 Export student data, reports, and analytics"})})]}),ea=()=>(0,Ft.jsxs)("div",{className:"coming-soon",children:[(0,Ft.jsx)("h2",{children:"System Settings"}),(0,Ft.jsx)("p",{children:"Configure system preferences and settings"}),(0,Ft.jsx)("div",{className:"feature-preview",children:(0,Ft.jsx)("p",{children:"\u2699\ufe0f System configuration and administration settings"})})]}),ta=()=>(0,Ft.jsxs)("div",{className:"coming-soon",children:[(0,Ft.jsx)("h2",{children:"Unassigned Students"}),(0,Ft.jsx)("p",{children:"Manage students not assigned to any class"}),(0,Ft.jsx)("div",{className:"feature-preview",children:(0,Ft.jsx)("p",{children:"\ud83c\udfaf View and assign students to appropriate classes"})})]}),na=()=>(0,Ft.jsx)("div",{className:"not-found",children:(0,Ft.jsxs)("div",{className:"error-container",children:[(0,Ft.jsx)("h1",{children:"\ud83d\udd0d 404 - Page Not Found"}),(0,Ft.jsx)("p",{children:"The page you're looking for doesn't exist."}),(0,Ft.jsx)("button",{onClick:()=>window.location.href="/dashboard",className:"home-btn",children:"Go to Dashboard"})]})});if("undefined"!==typeof document){const e=document.createElement("style");e.innerText="\n.coming-soon {\n  padding: 40px;\n  text-align: center;\n  max-width: 800px;\n  margin: 40px auto;\n  background: white;\n  border-radius: 10px;\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n}\n\n.coming-soon h2 {\n  color: #2c3e50;\n  margin-bottom: 20px;\n}\n\n.feature-preview {\n  background: #f8f9fa;\n  border-radius: 10px;\n  padding: 30px;\n  margin-top: 30px;\n  border: 1px dashed #dee2e6;\n}\n\n.unauthorized, .not-found {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 60vh;\n  padding: 20px;\n}\n\n.error-container {\n  text-align: center;\n  max-width: 500px;\n  padding: 40px;\n  background: white;\n  border-radius: 10px;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n}\n\n.error-container h1 {\n  color: #e74c3c;\n  margin-bottom: 20px;\n}\n\n.error-container p {\n  color: #666;\n  margin-bottom: 10px;\n}\n\n.back-btn, .home-btn {\n  background: #3498db;\n  color: white;\n  border: none;\n  padding: 12px 30px;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 16px;\n  margin-top: 20px;\n  transition: background 0.3s;\n}\n\n.back-btn:hover, .home-btn:hover {\n  background: #2980b9;\n}\n\n.home-btn {\n  background: #2ecc71;\n}\n\n.home-btn:hover {\n  background: #27ae60;\n}\n\n/* Ensure main content has proper spacing */\n.main-content {\n  padding: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n  width: 100%;\n}\n",document.head.appendChild(e)}const ra=function(){return(0,Ft.jsx)(mt,{children:(0,Ft.jsx)("div",{className:"App",children:(0,Ft.jsxs)(ke,{children:[(0,Ft.jsx)(Me,{path:"/login",element:(0,Ft.jsx)(Br,{})}),(0,Ft.jsx)(Me,{path:"/",element:(0,Ft.jsx)(Vr,{})}),(0,Ft.jsx)(Me,{path:"/*",element:(0,Ft.jsxs)(Gr,{children:[(0,Ft.jsx)(zr,{}),(0,Ft.jsx)("main",{className:"main-content",children:(0,Ft.jsxs)(ke,{children:[(0,Ft.jsx)(Me,{path:"/dashboard",element:(0,Ft.jsx)(Bt,{})}),(0,Ft.jsx)(Me,{path:"/register",element:(0,Ft.jsx)(ln,{})}),(0,Ft.jsx)(Me,{path:"/students",element:(0,Ft.jsx)(gn,{})}),(0,Ft.jsx)(Me,{path:"/reports",element:(0,Ft.jsx)(pn,{})}),(0,Ft.jsx)(Me,{path:"/attendance",element:(0,Ft.jsx)(Mr,{})}),(0,Ft.jsx)(Me,{path:"/classes",element:(0,Ft.jsx)(Or,{})}),(0,Ft.jsx)(Me,{path:"/schedules",element:(0,Ft.jsx)(kr,{})}),(0,Ft.jsx)(Me,{path:"/fee-payment",element:(0,Ft.jsx)(Pr,{})}),(0,Ft.jsx)(Me,{path:"/fee-management",element:(0,Ft.jsx)(Lr,{})}),(0,Ft.jsx)(Me,{path:"/payment-tracker",element:(0,Ft.jsx)(Fr,{})}),(0,Ft.jsx)(Me,{path:"/manual-attendance",element:(0,Ft.jsx)(Ur,{requiredRole:"ADMIN",children:(0,Ft.jsx)(Wr,{})})}),(0,Ft.jsx)(Me,{path:"/student-reports",element:(0,Ft.jsx)(Ur,{requiredRole:"ADMIN",children:(0,Ft.jsx)(Xr,{})})}),(0,Ft.jsx)(Me,{path:"/overdue-fees",element:(0,Ft.jsx)(Ur,{requiredRole:"ADMIN",children:(0,Ft.jsx)(Qr,{})})}),(0,Ft.jsx)(Me,{path:"/fee-structure",element:(0,Ft.jsx)(Ur,{requiredRole:"ADMIN",children:(0,Ft.jsx)(qr,{})})}),(0,Ft.jsx)(Me,{path:"/bulk-actions",element:(0,Ft.jsx)(Ur,{requiredRole:"ADMIN",children:(0,Ft.jsx)($r,{})})}),(0,Ft.jsx)(Me,{path:"/system-settings",element:(0,Ft.jsx)(Ur,{requiredRole:"ADMIN",children:(0,Ft.jsx)(ea,{})})}),(0,Ft.jsx)(Me,{path:"/today-attendance",element:(0,Ft.jsx)(Ur,{requiredRoles:["ADMIN","TEACHER"],children:(0,Ft.jsx)(Yr,{})})}),(0,Ft.jsx)(Me,{path:"/attendance-sessions",element:(0,Ft.jsx)(Ur,{requiredRoles:["ADMIN","TEACHER"],children:(0,Ft.jsx)(Zr,{})})}),(0,Ft.jsx)(Me,{path:"/qr-generator",element:(0,Ft.jsx)(Kr,{})}),(0,Ft.jsx)(Me,{path:"/data-export",element:(0,Ft.jsx)(Jr,{})}),(0,Ft.jsx)(Me,{path:"/students/unassigned",element:(0,Ft.jsx)(ta,{})}),(0,Ft.jsx)(Me,{path:"*",element:(0,Ft.jsx)(na,{})})]})}),(0,Ft.jsx)(Hr,{})]})})]})})})},aa=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:s,getTTFB:i}=t;n(e),r(e),a(e),s(e),i(e)})};t.createRoot(document.getElementById("root")).render((0,Ft.jsx)(e.StrictMode,{children:(0,Ft.jsx)(ra,{})})),aa()})()})();
//# sourceMappingURL=main.eb66f44f.js.map